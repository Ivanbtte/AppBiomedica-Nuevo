(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[916],{40916:function(e,t,a){"use strict";a.r(t),a.d(t,{ValidacionSolicitudesModule:function(){return St}});var n=a(61116),l=a(8340),i=a(29996),o=a(75425),r=a(82573),d=a(15452),c=a(28736),s=a(39199),m=a(92935),u=a(35366),p=a(84369);let S=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](m.so),u["\u0275\u0275directiveInject"](m.WI))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-filtros-solicitud"]],decls:5,vars:0,consts:[["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"p"),u["\u0275\u0275text"](1," filtros-solicitud works!\n"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](2,"div"),u["\u0275\u0275elementStart"](3,"button",0),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275text"](4,"Aplicar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())},directives:[p.lW],styles:[""]}),e})();var f=a(22797),h=a(59241),v=a(77307);function x(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Nombre"),u["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Usuario.Persona.Nombre,"")}}function E(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Tipo"),u["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.TipoSolicitud.Tipo,"")}}function b(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Unidad M."),u["\u0275\u0275elementEnd"]())}function I(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.UnidadMed.DenominacionUni,"")}}function w(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Estatus"),u["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Estatus.Status,"")}}function D(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Revisar"),u["\u0275\u0275elementEnd"]())}const T=function(e){return["/requerimientos/revision/validar",e]};function F(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",14),u["\u0275\u0275elementStart"](2,"mat-icon"),u["\u0275\u0275text"](3,"visibility"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("routerLink",u["\u0275\u0275pureFunction1"](1,T,e.Id))}}function j(e,t){1&e&&u["\u0275\u0275element"](0,"mat-footer-cell")}function U(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function k(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}let P=(()=>{class e{constructor(e,t){this._solicitudes=e,this.dialog=t,this.displayedColumns=["Nombre","TipoSolicitud","UnidadMedi","Estatus","Validar"],this.resultado=[]}ngOnInit(){this.consultarSolicitudes()}consultarSolicitudes(){this._solicitudes.ConsultarTodasSolicitudes("","true").subscribe(e=>{this.resultado=e.Data,this.dataSource=new s.by,this.dataSource.data=this.resultado,console.log(this.resultado)})}openDialog(){this.dialog.open(S,{height:"auto",width:"auto",disableClose:!0,data:{datos:""}}).afterClosed().subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](c.o),u["\u0275\u0275directiveInject"](m.uw))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-validar"]],decls:24,vars:4,consts:[[1,"p-20"],[1,"responsive-table"],["matSort","",2,"border-style","solid","border-width","1px","border-color","#e0e0e0",3,"dataSource"],["matColumnDef","Nombre"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","TipoSolicitud"],["matColumnDef","UnidadMedi"],["matColumnDef","Estatus"],["matColumnDef","Validar"],[4,"matFooterCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-button","","value","left","color","primary",3,"routerLink"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-title",0),u["\u0275\u0275text"](2,"Validaci\xf3n de solicitudes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"mat-card-content"),u["\u0275\u0275elementStart"](4,"div",1),u["\u0275\u0275elementStart"](5,"mat-table",2),u["\u0275\u0275elementContainerStart"](6,3),u["\u0275\u0275template"](7,x,2,0,"mat-header-cell",4),u["\u0275\u0275template"](8,C,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](9,6),u["\u0275\u0275template"](10,E,2,0,"mat-header-cell",4),u["\u0275\u0275template"](11,g,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](12,7),u["\u0275\u0275template"](13,b,2,0,"mat-header-cell",4),u["\u0275\u0275template"](14,I,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](15,8),u["\u0275\u0275template"](16,w,2,0,"mat-header-cell",4),u["\u0275\u0275template"](17,y,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](18,9),u["\u0275\u0275template"](19,D,2,0,"mat-header-cell",4),u["\u0275\u0275template"](20,F,4,3,"mat-cell",5),u["\u0275\u0275template"](21,j,1,0,"mat-footer-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](22,U,1,0,"mat-header-row",11),u["\u0275\u0275template"](23,k,1,0,"mat-row",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](17),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[f.a8,f.n5,f.dn,s.BZ,h.YE,s.w1,s.fO,s.Dz,s.mD,s.as,s.nj,s.ge,h.nU,s.ev,p.lW,i.rH,v.Hw,s.yh,s.XQ,s.Gk],styles:[""]}),e})();var B=a(36911),R=a(22501),M=a.n(R),_=a(90911),$=a(35965),A=a(13070),H=a(13841),L=a(87064);function z(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",9),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.Id),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Status," ")}}let O=(()=>{class e{constructor(e,t,a,n){this.dialogRef=e,this.data=t,this._estatus=a,this._solicitudes=n,this.valor=0,this.usuarioLog=(0,_.Z)(localStorage.getItem("token")),this.resultado=t,console.log(this.resultado),this._estatus.ConsultaEstatus().subscribe(e=>{this.resultad=e.Data,console.log(this.resultad)})}valorSeleccionado(e){this.valor=e}actualizarSolicitud(){M().fire({title:"Confirmaci\xf3n",text:"Est\xe1s seguro de cambiar el estatus",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, cambiar"}).then(e=>{e.value&&this._solicitudes.Actualizarolicitud(this.resultado.Id,"aprobada","",this.valor.toString(),this.usuarioLog.UsuarioId,{Id:this.resultado.Id,UsuarioId:this.resultado.UsuarioId,UnidadMedId:this.resultado.UnidadMedId,TipoSolicitudId:this.resultado.TipoSolicitudId,EstatusId:this.resultado.EstatusId,FechaCreacion:this.resultado.FechaCreacion,Total:this.resultado.Total,Correo:this.resultado.Correo,Estado:this.resultado.Estado}).subscribe(e=>{M().fire({icon:"success",title:"Correcto",text:e.Mensaje}),this.onNoClick()})})}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](m.so),u["\u0275\u0275directiveInject"](m.WI),u["\u0275\u0275directiveInject"](B.K),u["\u0275\u0275directiveInject"](c.o))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-cambiar-estatus"]],decls:18,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","","fxLayout","row wrap"],[2,"color","#c90025"],["appearance","outline"],[2,"max-width","90%",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click"],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"h1",0),u["\u0275\u0275text"](1,"Busqueda Avanzada"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](2,"div",1),u["\u0275\u0275elementStart"](3,"mat-card"),u["\u0275\u0275elementStart"](4,"mat-card-header"),u["\u0275\u0275elementStart"](5,"mat-card-title",2),u["\u0275\u0275text"](6,"Selecciona lo que deseas buscar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-card-content"),u["\u0275\u0275elementStart"](8,"mat-form-field",3),u["\u0275\u0275elementStart"](9,"mat-label"),u["\u0275\u0275text"](10,"Selecciona un estatus"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"mat-select",4),u["\u0275\u0275listener"]("valueChange",function(e){return t.valor=e})("selectionChange",function(){return t.valorSeleccionado(t.valor)}),u["\u0275\u0275template"](12,z,2,2,"mat-option",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"button",6),u["\u0275\u0275listener"]("click",function(){return t.actualizarSolicitud()}),u["\u0275\u0275text"](14,"Cambiar Estado"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",7),u["\u0275\u0275elementStart"](16,"button",8),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275text"](17,"Cerrar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("value",t.valor),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.resultad))},directives:[m.uh,m.xY,$.xw,f.a8,f.dk,f.n5,f.dn,A.KE,A.hX,H.gD,n.sg,p.lW,m.H8,L.ey],styles:[""]}),e})();function V(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Nombre"),u["\u0275\u0275elementEnd"]())}function N(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Usuario.Persona.Nombre,"")}}function W(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Tipo"),u["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.TipoSolicitud.Tipo,"")}}function G(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Unidad M."),u["\u0275\u0275elementEnd"]())}function X(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.UnidadMed.DenominacionUni,"")}}function Z(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Estatus"),u["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Estatus.Status,"")}}function Q(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",13),u["\u0275\u0275text"](1,"Actualizar Estatus"),u["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",14),u["\u0275\u0275listener"]("click",function(){const t=u["\u0275\u0275restoreView"](e).$implicit;return u["\u0275\u0275nextContext"]().cambiarEstatus(t)}),u["\u0275\u0275elementStart"](2,"mat-icon"),u["\u0275\u0275text"](3,"edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function J(e,t){1&e&&u["\u0275\u0275element"](0,"mat-footer-cell")}function ee(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function te(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}let ae=(()=>{class e{constructor(e,t){this._solicitudes=e,this.dialog=t,this.displayedColumns=["Nombre","TipoSolicitud","UnidadMedi","Estatus","Validar2"],this.resultado=[]}ngOnInit(){this.consultarSolicitudes()}consultarSolicitudes(){this._solicitudes.ConsultarTodasSolicitudes("","false").subscribe(e=>{this.resultado=e.Data,this.dataSource=new s.by,this.dataSource.data=this.resultado,console.log(this.resultado)})}cambiarEstatus(e){this.dialog.open(O,{height:"auto",width:"auto",disableClose:!0,data:e}).afterClosed().subscribe(e=>{this.consultarSolicitudes()})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](c.o),u["\u0275\u0275directiveInject"](m.uw))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-ver"]],decls:24,vars:4,consts:[[1,"p-20"],[1,"responsive-table"],["matSort","",2,"border-style","solid","border-width","1px","border-color","#e0e0e0",3,"dataSource"],["matColumnDef","Nombre"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","TipoSolicitud"],["matColumnDef","UnidadMedi"],["matColumnDef","Estatus"],["matColumnDef","Validar2"],[4,"matFooterCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-button","","value","left","color","primary",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-title",0),u["\u0275\u0275text"](2,"Solicitudes Validadas"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"mat-card-content"),u["\u0275\u0275elementStart"](4,"div",1),u["\u0275\u0275elementStart"](5,"mat-table",2),u["\u0275\u0275elementContainerStart"](6,3),u["\u0275\u0275template"](7,V,2,0,"mat-header-cell",4),u["\u0275\u0275template"](8,N,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](9,6),u["\u0275\u0275template"](10,W,2,0,"mat-header-cell",4),u["\u0275\u0275template"](11,q,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](12,7),u["\u0275\u0275template"](13,G,2,0,"mat-header-cell",4),u["\u0275\u0275template"](14,X,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](15,8),u["\u0275\u0275template"](16,Z,2,0,"mat-header-cell",4),u["\u0275\u0275template"](17,Y,2,1,"mat-cell",5),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](18,9),u["\u0275\u0275template"](19,Q,2,0,"mat-header-cell",4),u["\u0275\u0275template"](20,K,4,0,"mat-cell",5),u["\u0275\u0275template"](21,J,1,0,"mat-footer-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](22,ee,1,0,"mat-header-row",11),u["\u0275\u0275template"](23,te,1,0,"mat-row",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](17),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[f.a8,f.n5,f.dn,s.BZ,h.YE,s.w1,s.fO,s.Dz,s.mD,s.as,s.nj,s.ge,h.nU,s.ev,p.lW,v.Hw,s.yh,s.XQ,s.Gk],styles:[""]}),e})();var ne=a(93721),le=a(84992),ie=a(55424);function oe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",19),u["\u0275\u0275elementStart"](1,"div",20),u["\u0275\u0275elementStart"](2,"span"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",21),u["\u0275\u0275elementStart"](5,"span"),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",22),u["\u0275\u0275elementStart"](8,"span"),u["\u0275\u0275text"](9,"Servicio que solicita"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](10,"br"),u["\u0275\u0275elementStart"](11,"strong"),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](13,"br"),u["\u0275\u0275elementStart"](14,"span"),u["\u0275\u0275text"](15,"Precio"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](16,"br"),u["\u0275\u0275elementStart"](17,"strong"),u["\u0275\u0275text"](18),u["\u0275\u0275pipe"](19,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",22),u["\u0275\u0275elementStart"](21,"span"),u["\u0275\u0275text"](22,"Cantidad Solictada"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](23,"br"),u["\u0275\u0275elementStart"](24,"strong"),u["\u0275\u0275text"](25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](26,"br"),u["\u0275\u0275elementStart"](27,"span"),u["\u0275\u0275text"](28,"Total"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](29,"br"),u["\u0275\u0275elementStart"](30,"strong"),u["\u0275\u0275text"](31),u["\u0275\u0275pipe"](32,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"div",22),u["\u0275\u0275elementStart"](34,"span"),u["\u0275\u0275text"](35,"Cantidad Aprobada"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](36,"br"),u["\u0275\u0275elementStart"](37,"strong"),u["\u0275\u0275text"](38),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](39,"br"),u["\u0275\u0275elementStart"](40,"span"),u["\u0275\u0275text"](41,"Total"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](42,"br"),u["\u0275\u0275elementStart"](43,"strong"),u["\u0275\u0275text"](44),u["\u0275\u0275pipe"](45,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Clave: ",e.objClave.ClaveId,""),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.objClave.Descripcion.substring(0,100)),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](e.objClave.ServiciosProforma.Descripcion),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](19,8,e.objClave.Precio)),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.objClave.CantidadSolicitada),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](32,10,e.objClave.Precio*e.objClave.CantidadSolicitada)),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.objClave.CantidadAprobada),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](45,12,e.objClave.Precio*e.objClave.CantidadAprobada))}}function re(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h4",28),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Presupuesto delegacional: ",u["\u0275\u0275pipeBind1"](2,1,e.presupuestoDelegacional.Presupuesto),"")}}function de(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h4"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Presupuesto restante: ",u["\u0275\u0275pipeBind1"](2,1,e.presupuestoDelegacional.Presupuesto-e.presupuestoGenera),"")}}function ce(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",29),u["\u0275\u0275elementStart"](1,"a",16),u["\u0275\u0275elementStart"](2,"mat-card",30),u["\u0275\u0275elementStart"](3,"div",12),u["\u0275\u0275elementStart"](4,"h4",13),u["\u0275\u0275text"](5),u["\u0275\u0275pipe"](6,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"small"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](6,2,e.Total)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.Unidad)}}function se(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275template"](1,re,3,3,"h4",24),u["\u0275\u0275template"](2,de,3,3,"h4",25),u["\u0275\u0275elementStart"](3,"div",26),u["\u0275\u0275template"](4,ce,9,4,"div",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.presupuestoDelegacional),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.presupuestoDelegacional),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",e.presupuestoPorSolici)}}function me(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",32),u["\u0275\u0275elementStart"](1,"a",16),u["\u0275\u0275elementStart"](2,"mat-card",11),u["\u0275\u0275elementStart"](3,"div",12),u["\u0275\u0275elementStart"](4,"h2",13),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"small"),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](e.cant),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.nombre)}}function ue(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"h4"),u["\u0275\u0275text"](2,"Cantidad solicitada por unidad m\xe9dica"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",26),u["\u0275\u0275template"](4,me,8,2,"div",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",e.totalPorUnidades)}}function pe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",34),u["\u0275\u0275elementStart"](1,"a",16),u["\u0275\u0275elementStart"](2,"mat-card",14),u["\u0275\u0275elementStart"](3,"div",12),u["\u0275\u0275elementStart"](4,"h2",13),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"strong"),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"br"),u["\u0275\u0275elementStart"](9,"small"),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](e.CantidadSolicitada),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.ServiciosProforma.Descripcion),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.Solicitud.UnidadMed.DenominacionUni)}}function Se(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"h4"),u["\u0275\u0275text"](2,"Cantidad solicitada el el mismo servicio en otras unidades"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",26),u["\u0275\u0275template"](4,pe,11,3,"div",33),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",e.totalporSercvicio)}}function fe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",29),u["\u0275\u0275elementStart"](1,"a",16),u["\u0275\u0275elementStart"](2,"mat-card",15),u["\u0275\u0275elementStart"](3,"div",12),u["\u0275\u0275elementStart"](4,"h2",13),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"strong"),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"br"),u["\u0275\u0275elementStart"](9,"small"),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](e.CantidadSolicitada),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.ServiciosProforma.Descripcion),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.Solicitud.UnidadMed.DenominacionUni)}}function he(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"h4"),u["\u0275\u0275text"](2,"Cantidad solicitada en esta solicitud"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",26),u["\u0275\u0275template"](4,fe,11,3,"div",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",e.totalPorSolicitud)}}let ve=(()=>{class e{constructor(e,t,a,n,l,i){this.dialogRef=e,this.data=t,this._conceptosSolicitud=a,this._solicitudes=n,this._presupuesto=l,this.dialog=i,this.clave=[],this.analizarclaveEstado=!1,this.desgloceUnidad=!1,this.desgloceServicio=!1,this.desgloceSolicitud=!1,this.usuarioLog=(0,_.Z)(localStorage.getItem("token")),this.consultaPresupuestoBD(),this.objClave=this.data.clave,console.log(this.data),console.log(this.objClave),this.consultarClave(),this.consultarTodasSolicitudes()}consultarClave(){this._conceptosSolicitud.ConsultarClaves("",this.objClave.ClaveId,"","","").subscribe(e=>{this.clave=e.Data,console.log(e.Data),this.totalClave=this.clave.map(e=>e.CantidadSolicitada).reduce((e,t)=>e+t),console.log("la misma clave",this.totalClave),this.cantidadTotalPorSErvicio(this.clave,this.objClave.ServiciosProformaId),this.cantidadTotalEstasolicitud(this.clave,this.objClave.SolicitudId),this.verUnidadClave(this.clave)})}consultarTodasSolicitudes(){this._solicitudes.ConsultarTodasSolicitudes("","true").subscribe(e=>{console.log(e.Data),this.calcularPresupues(e.Data)})}consultaPresupuestoBD(){this._presupuesto.ConsultaPresupuesto().subscribe(e=>{this.presupuestoDelegacional=e.Data,console.log(this.presupuestoDelegacional)})}calcularPresupues(e){this.presupuestoPorSolici=e.map(e=>({Unidad:e.UnidadMed.DenominacionUni,Total:e.Total})),console.log(this.presupuestoPorSolici),this.presupuestoGenera=e.map(e=>e.Total).reduce((e,t)=>e+t)}cantidadTotalEstasolicitud(e,t){const a=e.filter(e=>e.SolicitudId===t);console.log("filter",a),this.totalPorSolicitud=a,this.totalSolicitud=a.map(e=>e.CantidadSolicitada).reduce((e,t)=>e+t),console.log("total en esta solicitud",this.totalSolicitud)}verUnidadClave(e){e.map(e=>({unidad:e.Solicitud.UnidadMed.DenominacionUni,cantidad:e.CantidadSolicitada})),console.log(this.totalPorUnidades)}cantidadTotalPorSErvicio(e,t){const a=e.filter(e=>(console.log(e.ServiciosProformaId,"  ",t),e.ServiciosProformaId===t));this.totalporSercvicio=a,console.log(a),this.TotalPorServio=a.map(e=>e.CantidadSolicitada).reduce((e,t)=>e+t),console.log(this.TotalPorServio)}validarCantidad(){M().fire({title:"Confirmaci\xf3n",text:"Est\xe1s seguro de aprobar esta clave",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, aprobar"}).then(e=>{e.value&&(this.objClave.Total=this.objClave.Precio*this.objClave.CantidadSolicitada,this._conceptosSolicitud.ActualizarClave(this.objClave.Id,"","","","true",{SolicitudId:this.objClave.SolicitudId,ClaveId:this.objClave.ClaveId,Descripcion:this.objClave.Descripcion,CantidadSolicitada:this.objClave.CantidadSolicitada,Precio:this.objClave.Precio,Total:this.objClave.Total,ServiciosProformaId:this.objClave.ServiciosProformaId,EstatusId:this.objClave.EstatusId,Fecha:this.objClave.Fecha}).subscribe(e=>{console.log(e.Data),M().fire({icon:"success",title:"Correcto",text:e.Mensaje}),this.onNoClick()}))})}openDialogCantidad(e){this.dialog.open(ie.v,{height:"auto",width:"65%",disableClose:!0,data:{clave:e,editar:!1,agregar:!1,aprobar:!0}}).afterClosed().subscribe(e=>{e&&(console.log("entreee"),this.consultarLaClave(this.objClave.Id),this.consultarClave(),this.consultarTodasSolicitudes())})}consultarLaClave(e){this._conceptosSolicitud.ConsultarUnaClaves(e).subscribe(e=>{console.log(e.Data),this.objClave=e.Data})}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](m.so),u["\u0275\u0275directiveInject"](m.WI),u["\u0275\u0275directiveInject"](ne.z),u["\u0275\u0275directiveInject"](c.o),u["\u0275\u0275directiveInject"](le.H),u["\u0275\u0275directiveInject"](m.uw))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-consultas-analiticas"]],decls:56,vars:9,consts:[[1,"p-20"],["fxLayout","row wrap","fxLayoutAlign","space-around",2,"width","100%"],["mat-raised-button","","fxflex","30","color","primary",3,"click"],["aria-label","Example icon-button with a heart icon"],["fxflex","30","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click"],[2,"width","100%","height","auto"],["fxLayout","row","fxLayoutAlign","space-between none","class","p-10","style","width: 100%; height: max-content;border-style: solid; border-width: 1px",4,"ngIf"],["fxLayout","row wrap"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["href","javascript:void",3,"click"],[1,"bg-inverse","text-white","text-center"],[1,"p-10"],[1,"m-0"],[1,"bg-megna","text-white","text-center"],[1,"text-white","text-center",2,"background","#c62828"],["href","javascript:void"],["fxLayout","row wrap","fxLayoutAlign","space-between",2,"width","100%"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between none",1,"p-10",2,"width","100%","height","max-content","border-style","solid","border-width","1px"],["fxFlex","20"],["fxFlex","24"],["fxFlex","18",2,"text-align","center"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],["style","color: darkred",4,"ngIf"],[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between none",1,"p-10"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100",4,"ngFor","ngForOf"],[2,"color","darkred"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100"],[1,"text-white","text-center",2,"background","#1e88e5"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100",4,"ngFor","ngForOf"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","90",4,"ngFor","ngForOf"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","90"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-title",0),u["\u0275\u0275text"](2,"M\xf3dulo de an\xe1lisis de solicitudes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",1),u["\u0275\u0275elementStart"](4,"button",2),u["\u0275\u0275listener"]("click",function(){return t.openDialogCantidad(t.objClave)}),u["\u0275\u0275elementStart"](5,"mat-icon",3),u["\u0275\u0275text"](6,"border_color"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](7," Editar Cantidad "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"button",4),u["\u0275\u0275listener"]("click",function(){return t.validarCantidad()}),u["\u0275\u0275elementStart"](9,"mat-icon",3),u["\u0275\u0275text"](10,"done_outline"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](11," Validar Cantidad "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"button",5),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275elementStart"](13,"mat-icon",3),u["\u0275\u0275text"](14,"close"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](15," Cerrar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"mat-card-content",6),u["\u0275\u0275template"](17,oe,46,14,"div",7),u["\u0275\u0275elementStart"](18,"div",8),u["\u0275\u0275elementStart"](19,"div",9),u["\u0275\u0275elementStart"](20,"a",10),u["\u0275\u0275listener"]("click",function(){return t.desgloceUnidad=!t.desgloceUnidad}),u["\u0275\u0275elementStart"](21,"mat-card",11),u["\u0275\u0275elementStart"](22,"div",12),u["\u0275\u0275elementStart"](23,"h2",13),u["\u0275\u0275text"](24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"small"),u["\u0275\u0275text"](26,"Cantidad total solicitada por todas las unidades m\xe9dicas"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",9),u["\u0275\u0275elementStart"](28,"a",10),u["\u0275\u0275listener"]("click",function(){return t.desgloceServicio=!t.desgloceServicio}),u["\u0275\u0275elementStart"](29,"mat-card",14),u["\u0275\u0275elementStart"](30,"div",12),u["\u0275\u0275elementStart"](31,"h2",13),u["\u0275\u0275text"](32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"small"),u["\u0275\u0275text"](34,"Cantidad total solicitada por este servicio en otras unidades"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"div",9),u["\u0275\u0275elementStart"](36,"a",10),u["\u0275\u0275listener"]("click",function(){return t.desgloceSolicitud=!t.desgloceSolicitud}),u["\u0275\u0275elementStart"](37,"mat-card",15),u["\u0275\u0275elementStart"](38,"div",12),u["\u0275\u0275elementStart"](39,"h2",13),u["\u0275\u0275text"](40),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](41,"small"),u["\u0275\u0275text"](42,"Cantidad total solicitada en esta solicitud"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](43,"div",9),u["\u0275\u0275elementStart"](44,"a",16),u["\u0275\u0275elementStart"](45,"mat-card",14),u["\u0275\u0275elementStart"](46,"div",12),u["\u0275\u0275elementStart"](47,"h2",13),u["\u0275\u0275text"](48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](49,"small"),u["\u0275\u0275text"](50,"Cantidad solicitada"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](51,"div",17),u["\u0275\u0275template"](52,se,5,3,"div",18),u["\u0275\u0275template"](53,ue,5,1,"div",18),u["\u0275\u0275template"](54,Se,5,1,"div",18),u["\u0275\u0275template"](55,he,5,1,"div",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](17),u["\u0275\u0275property"]("ngIf",t.objClave),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](t.totalClave),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate"](t.TotalPorServio),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate"](t.totalSolicitud),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate"](t.objClave.CantidadSolicitada),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.desgloceUnidad),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.desgloceServicio),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.desgloceSolicitud))},directives:[f.a8,f.n5,$.xw,$.Wh,p.lW,v.Hw,f.dn,n.O5,$.yH,n.sg],pipes:[n.H9],styles:[""]}),e})();var xe=a(40994);function Ce(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",7),u["\u0275\u0275elementStart"](1,"h3",8),u["\u0275\u0275elementStart"](2,"strong"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.resultado.TipoSolicitud.Tipo)}}function Ee(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",1),u["\u0275\u0275elementStart"](1,"div",9),u["\u0275\u0275elementStart"](2,"h4",10),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",11),u["\u0275\u0275elementStart"](5,"span"),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"span"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"span"),u["\u0275\u0275text"](10),u["\u0275\u0275pipe"](11,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",12),u["\u0275\u0275elementStart"](13,"h4",13),u["\u0275\u0275text"](14,"Solicitante"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",11),u["\u0275\u0275elementStart"](16,"span"),u["\u0275\u0275text"](17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"span"),u["\u0275\u0275text"](19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"span"),u["\u0275\u0275text"](21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Unidad M\xe9dica: ",e.resultado.UnidadMed.DenominacionUni,""),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Estado: ",e.resultado.Estatus.Status,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Fecha de solicitud: ",e.resultado.FechaCreacion,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Total solicitado: ",u["\u0275\u0275pipeBind1"](11,8,e.resultado.Total),""),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate2"]("",e.resultado.Usuario.Persona.Nombre," ",e.resultado.Usuario.Persona.ApellidoPat,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.resultado.Correo),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Matricula: ",e.resultado.Usuario.Persona.Matricula,"")}}function ge(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-card-content"),u["\u0275\u0275template"](1,Ce,4,1,"div",5),u["\u0275\u0275template"](2,Ee,22,10,"div",6),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.resultado),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.resultado)}}function be(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",2),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().aprobarSolicitud()}),u["\u0275\u0275elementStart"](1,"mat-icon"),u["\u0275\u0275text"](2,"done"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](3," Aprobar Solicitud "),u["\u0275\u0275elementEnd"]()}}function Ie(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Validado"),u["\u0275\u0275elementEnd"]())}function we(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275element"](1,"mat-checkbox",33),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("checked",a.comprobarValidados(e))}}function ye(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Clave Cuadro Basico"),u["\u0275\u0275elementEnd"]())}function De(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.ClaveId,"")}}function Te(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Descripci\xf3n"),u["\u0275\u0275elementEnd"]())}function Fe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Descripcion.substring(0,160),"")}}function je(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Servicio"),u["\u0275\u0275elementEnd"]())}function Ue(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.ServiciosProforma.Descripcion,"")}}function ke(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Precio"),u["\u0275\u0275elementEnd"]())}function Pe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,e.Precio),"")}}function Be(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Cantidad Solicitada"),u["\u0275\u0275elementEnd"]())}function Re(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.CantidadSolicitada)}}function Me(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Cantidad Aprobada"),u["\u0275\u0275elementEnd"]())}function _e(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.CantidadAprobada)}}function $e(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"C P M"),u["\u0275\u0275elementEnd"]())}function Ae(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"number"),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](2,1,e.CantidadSolicitada/12,"1.0-0"))}}function He(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Total"),u["\u0275\u0275elementEnd"]())}function Le(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,e.Total),"")}}function ze(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Analizar"),u["\u0275\u0275elementEnd"]())}function Oe(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",34),u["\u0275\u0275listener"]("click",function(){const t=u["\u0275\u0275restoreView"](e).$implicit;return u["\u0275\u0275nextContext"](2).consultasAnaliticas(t)}),u["\u0275\u0275elementStart"](2,"mat-icon"),u["\u0275\u0275text"](3,"scatter_plot"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Ve(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",32),u["\u0275\u0275text"](1,"Eliminar"),u["\u0275\u0275elementEnd"]())}function Ne(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",35),u["\u0275\u0275listener"]("click",function(){const t=u["\u0275\u0275restoreView"](e).$implicit;return u["\u0275\u0275nextContext"](2).eliminarClave(t)}),u["\u0275\u0275elementStart"](2,"mat-icon"),u["\u0275\u0275text"](3,"remove_circle_outline"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function We(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function qe(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}function Ge(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",14),u["\u0275\u0275elementStart"](1,"mat-table",15),u["\u0275\u0275elementContainerStart"](2,16),u["\u0275\u0275template"](3,Ie,2,0,"mat-header-cell",17),u["\u0275\u0275template"](4,we,2,1,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](5,19),u["\u0275\u0275template"](6,ye,2,0,"mat-header-cell",17),u["\u0275\u0275template"](7,De,2,1,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](8,20),u["\u0275\u0275template"](9,Te,2,0,"mat-header-cell",17),u["\u0275\u0275template"](10,Fe,2,1,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](11,21),u["\u0275\u0275template"](12,je,2,0,"mat-header-cell",17),u["\u0275\u0275template"](13,Ue,2,1,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](14,22),u["\u0275\u0275template"](15,ke,2,0,"mat-header-cell",17),u["\u0275\u0275template"](16,Pe,3,3,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](17,23),u["\u0275\u0275template"](18,Be,2,0,"mat-header-cell",17),u["\u0275\u0275template"](19,Re,2,1,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](20,24),u["\u0275\u0275template"](21,Me,2,0,"mat-header-cell",17),u["\u0275\u0275template"](22,_e,2,1,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](23,25),u["\u0275\u0275template"](24,$e,2,0,"mat-header-cell",17),u["\u0275\u0275template"](25,Ae,3,4,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](26,26),u["\u0275\u0275template"](27,He,2,0,"mat-header-cell",17),u["\u0275\u0275template"](28,Le,3,3,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](29,27),u["\u0275\u0275template"](30,ze,2,0,"mat-header-cell",17),u["\u0275\u0275template"](31,Oe,4,0,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](32,28),u["\u0275\u0275template"](33,Ve,2,0,"mat-header-cell",17),u["\u0275\u0275template"](34,Ne,4,0,"mat-cell",18),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](35,We,1,0,"mat-header-row",29),u["\u0275\u0275template"](36,qe,1,0,"mat-row",30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"h4",31),u["\u0275\u0275text"](38),u["\u0275\u0275pipe"](39,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("dataSource",e.dataSource),u["\u0275\u0275advance"](34),u["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](39,5,e.totalSolicitud))}}let Xe=(()=>{class e{constructor(e,t,a,n,l){this._route=e,this._conceptosSolicitud=t,this._solicitudes=a,this.dialog=n,this._router=l,this.conceptosBase=[],this.informacion=!0,this.textBtnInf="Solicitud",this.displayedColumns=["Validado","Clave","Descripcion","Servicio","Precio","Cantidades","Aprobada","CPM","Total","Editar"],this.usuarioLog=(0,_.Z)(localStorage.getItem("token"))}ngOnInit(){this.id=this._route.snapshot.paramMap.get("id"),this.consultarSolicitudes()}consultarSolicitudes(){this._solicitudes.ConsultarSolicitud("","",this.id).subscribe(e=>{this.resultado=e.Data,this.solicitudResultado=e.Data,console.log(this.resultado),console.log(this.solicitudResultado)}),this.llenarTablaSolicitudes()}llenarTablaSolicitudes(){this._conceptosSolicitud.ConsultarClaves(this.id,"","","","").subscribe(e=>{console.log(e.Data),this.conceptosBase=e.Data,0===this.conceptosBase.length?this._solicitudes.Actualizarolicitud(this.resultado.Id,"aprobada","","6",this.usuarioLog.UsuarioId,{Id:this.resultado.Id,UsuarioId:this.resultado.UsuarioId,UnidadMedId:this.resultado.UnidadMedId,TipoSolicitudId:this.resultado.TipoSolicitudId,EstatusId:this.resultado.EstatusId,FechaCreacion:this.resultado.FechaCreacion,Total:this.resultado.Total,Correo:this.resultado.Correo,Estado:this.resultado.Estado}).subscribe(e=>{M().fire({icon:"success",title:"Correcto",text:"Solicitud Aprobada"}),this._router.navigate(["/requerimientos/revision"])}):(this.dataSource=new s.by,this.dataSource.data=this.conceptosBase,this.totalSolicitud=this.calcularIva(),this.subtotal=this.getTotalCost(),this.iva=this.getTotal()),console.log(this.conceptosBase)})}filtroNoAprobadas(e){return e.filter(e=>0===e.CantidadAprobada)}revisarSolicitud(){2===this.resultado.EstatusId&&(console.log("soy esttus 2"),this._solicitudes.Actualizarolicitud("","Solicitud Revisada","","3",this.usuarioLog.UsuarioId,{Id:this.solicitudResultado.Id,UsuarioId:this.solicitudResultado.UsuarioId,UnidadMedId:this.solicitudResultado.UnidadMedId,TipoSolicitudId:this.solicitudResultado.TipoSolicitudId,EstatusId:this.solicitudResultado.EstatusId,FechaCreacion:this.solicitudResultado.FechaCreacion,Total:this.solicitudResultado.Total,Correo:this.solicitudResultado.Correo,Estado:this.solicitudResultado.Estado}).subscribe(e=>{console.log(e.Data),this.consultarSolicitudes()})),this.informacion=!this.informacion,this.textBtnInf=this.informacion?"Solicitud":"Informaci\xf3n"}aprobarSolicitud(){M().fire({title:"Confirmaci\xf3n",text:"Est\xe1s seguro de aprobar esta solicitud",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, aprobar"}).then(e=>{e.value&&this._solicitudes.Actualizarolicitud(this.resultado.Id,"aprobada","","6",this.usuarioLog.UsuarioId,{Id:this.resultado.Id,UsuarioId:this.resultado.UsuarioId,UnidadMedId:this.resultado.UnidadMedId,TipoSolicitudId:this.resultado.TipoSolicitudId,EstatusId:this.resultado.EstatusId,FechaCreacion:this.resultado.FechaCreacion,Total:this.resultado.Total,Correo:this.resultado.Correo,Estado:this.resultado.Estado}).subscribe(e=>{M().fire({icon:"success",title:"Correcto",text:e.Mensaje}),this._router.navigate(["/requerimientos/revision"])})})}consultasAnaliticas(e){this.dialog.open(ve,{height:"95%",width:"95%",disableClose:!0,data:{idSolicitud:this.id,clave:e,clavesSolicitud:this.conceptosBase}}).afterClosed().subscribe(e=>{this.llenarTablaSolicitudes()})}comprobarValidados(e){return!0===e.Estado}getTotalCost(){return this.conceptosBase.map(e=>e.Total).reduce((e,t)=>e+t)}calcularIva(){return 1.16*this.getTotalCost()}getTotal(){return this.calcularIva()-this.getTotalCost()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](i.gz),u["\u0275\u0275directiveInject"](ne.z),u["\u0275\u0275directiveInject"](c.o),u["\u0275\u0275directiveInject"](m.uw),u["\u0275\u0275directiveInject"](i.F0))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-detalle-validar"]],decls:10,vars:4,consts:[[4,"ngIf"],["fxLayout","row wrap"],["mat-button","","value","left","fxflex","30","color","primary",2,"width","max-content",3,"click"],["mat-button","","value","left","fxflex","30","color","primary","style","width: max-content",3,"click",4,"ngIf"],["class","responsive-table",4,"ngIf"],["class","mb-1",4,"ngIf"],["fxLayout","row wrap",4,"ngIf"],[1,"mb-1"],[1,"m-0"],["fxFlex.gt-xs","50","fxFlex","100"],[1,"text-danger","font-bold","m-0"],["fxLayout","column"],["fxFlex.gt-xs","50","fxFlex","100",1,"text-right"],[1,"font-bold","m-0"],[1,"responsive-table"],["matSort","",3,"dataSource"],["matColumnDef","Validado"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Clave"],["matColumnDef","Descripcion"],["matColumnDef","Servicio"],["matColumnDef","Precio"],["matColumnDef","Cantidades"],["matColumnDef","Aprobada"],["matColumnDef","CPM"],["matColumnDef","Total"],["matColumnDef","Editar"],["matColumnDef","Eliminar"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"font-medium",2,"width","max-content","align-content","end"],["mat-sort-header",""],[2,"pointer-events","none","color","#1976d2",3,"checked"],["mat-button","","value","left","color","primary",3,"click"],["mat-button","","value","left","color","warn",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275template"](1,ge,3,2,"mat-card-content",0),u["\u0275\u0275elementStart"](2,"mat-card-content"),u["\u0275\u0275elementStart"](3,"div",1),u["\u0275\u0275elementStart"](4,"button",2),u["\u0275\u0275listener"]("click",function(){return t.revisarSolicitud()}),u["\u0275\u0275elementStart"](5,"mat-icon"),u["\u0275\u0275text"](6,"visibility"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,be,4,0,"button",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,Ge,40,7,"div",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.informacion),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",t.textBtnInf," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.informacion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.informacion))},directives:[f.a8,n.O5,f.dn,$.xw,p.lW,v.Hw,$.yH,s.BZ,h.YE,s.w1,s.fO,s.Dz,s.as,s.nj,s.ge,h.nU,s.ev,xe.oG,s.XQ,s.Gk],pipes:[n.H9,n.JJ],styles:[""]}),e})();function Ze(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",18),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.id),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.servicio," ")}}function Ye(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Clave Cuadro Basico"),u["\u0275\u0275elementEnd"]())}function Qe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.ClaveId,"")}}function Ke(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Descripci\xf3n"),u["\u0275\u0275elementEnd"]())}function Je(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.Descripcion.substring(0,160),"")}}function et(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Servicio"),u["\u0275\u0275elementEnd"]())}function tt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.ServiciosProforma.Descripcion,"")}}function at(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Unidad Medica"),u["\u0275\u0275elementEnd"]())}function nt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.Solicitud.UnidadMed.DenominacionUni)}}function lt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Precio"),u["\u0275\u0275elementEnd"]())}function it(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,e.Precio),"")}}function ot(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Cantidad Aprobada"),u["\u0275\u0275elementEnd"]())}function rt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.CantidadAprobada)}}function dt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell",19),u["\u0275\u0275text"](1,"Total"),u["\u0275\u0275elementEnd"]())}function ct(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,e.Total),"")}}function st(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function mt(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}const ut=[{path:"",children:[{path:"revision",component:P},{path:"validado",component:ae},{path:"final",component:(()=>{class e{constructor(e){this._conceptosSolicitud=e,this.displayedColumns=["Clave","Descripcion","Servicio","Unidad","Precio","Aprobada","Total"],this.valorServicio=""}ngOnInit(){this.llenarTabla()}llenarTabla(){this._conceptosSolicitud.ConsultarClaves("","","","true",this.valorServicio).subscribe(e=>{console.log(e.Data),this.datosClaves=e.Data,this.dataSource=new s.by,this.dataSource.data=e.Data,this.agruparServicios(this.datosClaves)})}valorSelecServicios(e){console.log(e),this._conceptosSolicitud.ConsultarClaves("","","","true",this.valorServicio).subscribe(e=>{this.dataSource=new s.by,this.dataSource.data=e.Data})}agruparServicios(e){e.map(e=>({id:e.ServiciosProformaId,servicio:e.ServiciosProforma.Descripcion}))}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](ne.z))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitud-final"]],decls:34,vars:6,consts:[[1,"p-20"],["fxLayout","row wrap"],["appearance","outline","fxFlex","55"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"responsive-table"],["matSort","",3,"dataSource"],["matColumnDef","Clave"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Descripcion"],["matColumnDef","Servicio"],["matColumnDef","Unidad"],["matColumnDef","Precio"],["matColumnDef","Aprobada"],["matColumnDef","Total"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-sort-header",""]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-title",0),u["\u0275\u0275text"](2,"Solicitudes Final"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"mat-card-content",1),u["\u0275\u0275elementStart"](4,"mat-form-field",2),u["\u0275\u0275elementStart"](5,"mat-label"),u["\u0275\u0275text"](6,"Filtrar por servicio"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-select",3),u["\u0275\u0275listener"]("valueChange",function(e){return t.valorServicio=e})("selectionChange",function(){return t.valorSelecServicios(t.valorServicio)}),u["\u0275\u0275template"](8,Ze,2,2,"mat-option",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",5),u["\u0275\u0275elementStart"](10,"mat-table",6),u["\u0275\u0275elementContainerStart"](11,7),u["\u0275\u0275template"](12,Ye,2,0,"mat-header-cell",8),u["\u0275\u0275template"](13,Qe,2,1,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](14,10),u["\u0275\u0275template"](15,Ke,2,0,"mat-header-cell",8),u["\u0275\u0275template"](16,Je,2,1,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](17,11),u["\u0275\u0275template"](18,et,2,0,"mat-header-cell",8),u["\u0275\u0275template"](19,tt,2,1,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](20,12),u["\u0275\u0275template"](21,at,2,0,"mat-header-cell",8),u["\u0275\u0275template"](22,nt,2,1,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](23,13),u["\u0275\u0275template"](24,lt,2,0,"mat-header-cell",8),u["\u0275\u0275template"](25,it,3,3,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](26,14),u["\u0275\u0275template"](27,ot,2,0,"mat-header-cell",8),u["\u0275\u0275template"](28,rt,2,1,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](29,15),u["\u0275\u0275template"](30,dt,2,0,"mat-header-cell",8),u["\u0275\u0275template"](31,ct,3,3,"mat-cell",9),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](32,st,1,0,"mat-header-row",16),u["\u0275\u0275template"](33,mt,1,0,"mat-row",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("value",t.valorServicio),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.serviciosSelect),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](22),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[f.a8,f.n5,f.dn,$.xw,A.KE,$.yH,A.hX,H.gD,n.sg,s.BZ,h.YE,s.w1,s.fO,s.Dz,s.as,s.nj,L.ey,s.ge,h.nU,s.ev,s.XQ,s.Gk],pipes:[n.H9],styles:[""]}),e})()},{path:"revision/validar/:id",component:Xe}],canActivate:[r.a,d.X]}];var pt=a(77154);let St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[n.ez,l.q,i.Bz.forChild(ut),o.m,pt.o9]]}),e})()}}]);