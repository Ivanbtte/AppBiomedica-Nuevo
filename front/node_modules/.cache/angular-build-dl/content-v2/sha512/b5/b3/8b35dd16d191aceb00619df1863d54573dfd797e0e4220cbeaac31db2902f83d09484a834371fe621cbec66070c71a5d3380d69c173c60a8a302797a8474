(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[874],{52874:function(e,t,n){"use strict";n.r(t),n.d(t,{TrasladoPacientesModule:function(){return Ta}});var a=n(61116),o=n(47066),i=n(29996),r=n(75425),l=n(82573),s=n(35366);let c=(()=>{class e{constructor(e){this._router=e,this.permisos=[]}canActivate(){return this.havePermission()}havePermission(){return this.permisos=JSON.parse(localStorage.getItem("permisos")),0!==this.permisos.filter(e=>"Traslado de pacientes"===e).length}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](i.F0))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=n(48116),d=n(31041),u=n(22501),p=n.n(u),f=n(90911),h=n(87064),x=n(85031),g=n(29609),v=n(86350),S=n(37312),b=n(66102),C=n(30990),E=n(92935),F=n(35965),I=n(13070),y=n(13841),w=n(9550),D=n(7436),M=n(84369);function V(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",26),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.justificacion," ")}}function N(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo numeros. "),s["\u0275\u0275elementEnd"]())}let k=(()=>{class e{constructor(e,t){this.dialogRef=e,this.fb=t,this.justificaciones=[{id:"Paciente mayor que no puede valerse por s\xed mismo",justificacion:"Paciente mayor que no puede valerse por s\xed mismo"},{id:"Paciente con padecimientos neuropsiqui\xe1tricos",justificacion:"Paciente con padecimientos neuropsiqui\xe1tricos"},{id:"Paciente con padecimientos invalidantes",justificacion:"Paciente con padecimientos invalidantes"},{id:"Paciente con una urgencia m\xe9dica",justificacion:"Paciente con una urgencia m\xe9dica"},{id:"Paciente programado para cirug\xeda de alta especialidad",justificacion:"Paciente programado para cirug\xeda de alta especialidad"},{id:"Paciente con padecimientos que pongan en riesgo su vida",justificacion:"Paciente con padecimientos que pongan en riesgo su vida"},{id:"Paciente menor de edad",justificacion:"Paciente menor de edad"}]}ngOnInit(){this.form=this.fb.group({motivo:[null,d.Validators.compose([d.Validators.required])],justificacion:[null,d.Validators.compose([d.Validators.required])],nombreAutoriza:[null,d.Validators.compose([d.Validators.required])],cargo:[null,d.Validators.compose([])],matricula:[null,d.Validators.compose([d.Validators.pattern("^([0-9])*$")])],tarjetaInapan:[null,d.Validators.compose([d.Validators.required])]})}onNoClick(){this.dialogRef.close(!1)}save(){let e="",t=1;"true"===this.form.controls.tarjetaInapan.value&&(e="Credencial INAPAN",t=2),this.datosAutorizacion=this.form.getRawValue(),this.datosAutorizacion.tarjetaInapan=JSON.parse(this.form.controls.tarjetaInapan.value),this.dialogRef.close({datos:this.form.getRawValue(),observacion:e,tipo:t,autorizacion:this.datosAutorizacion}),console.log("objeto acompaniante",this.datosAutorizacion)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](E.so),s["\u0275\u0275directiveInject"](d.FormBuilder))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-autoriza-acomp"]],decls:51,vars:5,consts:[["mat-dialog-title","","align","center",1,"font-bold","m-0",2,"color","#003366"],["mat-dialog-content","",1,"quita"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["appearance","outline"],["formControlName","motivo"],["style","font-size: 13px",3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Escriba la justificacion","autocomplete","off","required","","formControlName","justificacion","maxlength","250"],["input",""],["align","end"],["matInput","","placeholder","Nombre","autocomplete","off","required","","formControlName","nombreAutoriza"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Cargo","autocomplete","off","formControlName","cargo"],["fxFlex.gt-sm","22","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Matricula","autocomplete","off","formControlName","matricula","maxlength","11"],[4,"ngIf"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"m-t-10","m-b-10"],[1,"font-bold"],["formControlName","tarjetaInapan"],["value","true"],["value","false"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",1,"m-0","p-0"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[2,"font-size","13px",3,"value"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h1",0),s["\u0275\u0275text"](1,"Autorizacion de acompa\xf1ante"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"form",2),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275elementStart"](6,"mat-form-field",5),s["\u0275\u0275elementStart"](7,"mat-label"),s["\u0275\u0275text"](8,"Selecciona el motivo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"mat-select",6),s["\u0275\u0275template"](10,V,2,2,"mat-option",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",4),s["\u0275\u0275elementStart"](12,"mat-form-field",5),s["\u0275\u0275elementStart"](13,"mat-label"),s["\u0275\u0275text"](14,"Justificacion o Diagnostico medico"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](15,"input",8,9),s["\u0275\u0275elementStart"](17,"mat-hint",10),s["\u0275\u0275text"](18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",4),s["\u0275\u0275elementStart"](20,"mat-form-field",5),s["\u0275\u0275elementStart"](21,"mat-label"),s["\u0275\u0275text"](22,"Nombre de quien autoriza"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](23,"input",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",12),s["\u0275\u0275elementStart"](25,"mat-form-field",5),s["\u0275\u0275elementStart"](26,"mat-label"),s["\u0275\u0275text"](27,"Cargo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](28,"input",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",14),s["\u0275\u0275elementStart"](30,"mat-form-field",5),s["\u0275\u0275elementStart"](31,"mat-label"),s["\u0275\u0275text"](32,"Matricula"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](33,"input",15),s["\u0275\u0275template"](34,N,2,0,"mat-error",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"div",17),s["\u0275\u0275elementStart"](36,"mat-label",18),s["\u0275\u0275text"](37,"Acompa\xf1ante adulto mayor con INAPAN"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"div"),s["\u0275\u0275elementStart"](39,"mat-radio-group",19),s["\u0275\u0275elementStart"](40,"mat-radio-button",20),s["\u0275\u0275text"](41,"Si"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"mat-radio-button",21),s["\u0275\u0275text"](43,"No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"div",22),s["\u0275\u0275elementStart"](45,"div",23),s["\u0275\u0275elementStart"](46,"button",24),s["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),s["\u0275\u0275text"](47,"Cancelar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](48,"div",23),s["\u0275\u0275elementStart"](49,"button",25),s["\u0275\u0275listener"]("click",function(){return t.save()}),s["\u0275\u0275text"](50,"Aceptar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](16);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("formGroup",t.form),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",t.justificaciones),s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate1"]("",(null==e.value?null:e.value.length)||0,"/250"),s["\u0275\u0275advance"](16),s["\u0275\u0275property"]("ngIf",t.form.controls.matricula.hasError("pattern")),s["\u0275\u0275advance"](15),s["\u0275\u0275property"]("disabled",t.form.invalid)}},directives:[E.uh,E.xY,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,F.xw,F.Wh,F.yH,I.KE,I.hX,y.gD,d.NgControlStatus,d.FormControlName,a.sg,w.Nt,d.DefaultValueAccessor,d.RequiredValidator,d.MaxLengthValidator,I.bx,a.O5,D.VQ,D.U0,E.H8,M.lW,h.ey,I.TO],styles:[".mat-radio-button[_ngcontent-%COMP%]{margin:0 12px}.quita[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),e})();var O=n(11659),P=n(22797),A=n(39199);function B(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-label",26),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.nota)}}function R(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Tipo"),s["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.tipo," ")}}function j(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1," Ida"),s["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.ida," ")}}function _(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1," Regreso"),s["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.regreso," ")}}function z(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1," Boleto"),s["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.tipoBoleto," ")}}function $(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1," Total"),s["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.total," ")}}function G(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1," Observaciones"),s["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.observaciones," ")}}function W(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function Q(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}function X(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275elementStart"](1,"button",28),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().Cerrar()}),s["\u0275\u0275text"](2," Cerrar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Z(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275elementStart"](1,"button",28),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().onNoClick()}),s["\u0275\u0275text"](2," Editar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}const K=g;let J=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this._solicitud=n,this.acompaniante="",this.displayedColumns=["Tipo","Ida","Regreso","Boleto","Total","Observaciones"],this.solicitudRealizada=!0,this.nota="",this.solicitudValidada=!1,this.folioSolicitud="",this.dateCita=""}ngOnInit(){this.dateCita=K(this.data.solicitud.fechaCita).format("DD-MM-YYYY");const e=this.data.boletos.map(e=>({tipo:this.regresaTipo(e.Tipo),ida:this.regresaBoleano(e.Ida),regreso:this.regresaBoleano(e.Regreso),total:e.Total,tipoBoleto:this.regresaBoleto(e.TipoBoleto),observaciones:e.Observaciones}));this.datasource=e,this.acompaniante=!0===this.data.solicitud.acompa\u00f1ante?"Si":"No",this.data.edad<=18&&1===this.data.boletos.length&&(this.nota="Un menor de edad no tiene permitido viajar sin acompa\xf1ante",this.solicitudValidada=!0),1===this.data.boletos.length&&3===this.data.boletos[0].Tipo&&(this.solicitudValidada=!1),0===this.data.boletos.length&&(this.solicitudValidada=!0),console.log(this.data)}regresaBoleano(e){return e?"Si":" - "}regresaBoleto(e){switch(e){case 0:return"Sin boleto";case 1:return"Entero";case 2:return"Medio"}}regresaTipo(e){switch(e){case 1:return"Paciente Ni\xf1o";case 2:return"Paciente Adulto";case 3:return"Acompa\xf1ante Adulto"}}realizarsolicitud(){const e=this.data.solicitud.fechaCita;this.datos={Solicitud:this.data.solicitud,Boletos:this.data.boletos,Acompaniante:this.data.autorizacion},console.log(this.datos,e),p().fire({title:"Confirmar",text:"Al enviar la solicitud, no podras editar nuevamente los datos. En caso de requerir cambios posteriores tendras que cancelar el folio",icon:"warning",showCancelButton:!0,confirmButtonColor:"#36b729",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Cancelar"}).then(t=>{t.value&&(delete this.datos.Solicitud.fechaCita,this._solicitud.RealizarSolicitud(this.datos,e,this.data.uiPrei,this.data.firms).subscribe(e=>{console.log(e.Mensaje),this.folioSolicitud=e.Data.folio,this.solicitudRealizada=!1,p().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!0})},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;console.log(t.Data,t.Mensaje),p().fire({title:"Error al registrar la solictud",text:t.Mensaje,icon:"error"})}console.log(e.error)}))})}onNoClick(){this.dialogRef.close()}Cerrar(){this.dialogRef.close(!0)}imprimirSolicitud(){this._solicitud.printDataOnly(this.folioSolicitud).subscribe(e=>{const t=URL.createObjectURL(e);window.open(t)},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}imprimirSolicitudCompleta(){this._solicitud.printRequestComplete(this.folioSolicitud,"true").subscribe(e=>{const t=URL.createObjectURL(e);window.open(t)},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](E.so),s["\u0275\u0275directiveInject"](E.WI),s["\u0275\u0275directiveInject"](O.O))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-vista-previa-solicitud"]],decls:81,vars:19,consts:[["mat-dialog-title","","align","center",1,"font-bold",2,"color","#003366"],["mat-dialog-content",""],["style","color: #661421",4,"ngIf"],[1,"p-0"],[1,"m-t-10","m-b-10"],["fxLayout","row wrap"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[1,"responsive-table"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Tipo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Ida"],["matColumnDef","Regreso"],["matColumnDef","Boleto"],["matColumnDef","Total"],["matColumnDef","Observaciones"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","space-evently center","align","center",1,"m-0","p-0"],["fxFlex.gt-sm","13","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxFlex.gt-sm","29","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100"],[2,"color","#661421"],["fxFlex.gt-sm","13","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h1",0),s["\u0275\u0275text"](1,"Vista previa solicitud de vale de traslado"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275template"](3,B,2,1,"mat-label",2),s["\u0275\u0275elementStart"](4,"mat-card"),s["\u0275\u0275elementStart"](5,"mat-card-content",3),s["\u0275\u0275elementStart"](6,"h5",4),s["\u0275\u0275elementStart"](7,"strong"),s["\u0275\u0275text"](8,"Nombre Paciente: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",5),s["\u0275\u0275elementStart"](11,"div",6),s["\u0275\u0275elementStart"](12,"h5",4),s["\u0275\u0275elementStart"](13,"strong"),s["\u0275\u0275text"](14,"Folio FTP-01: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"h5",4),s["\u0275\u0275elementStart"](17,"strong"),s["\u0275\u0275text"](18,"Unidad Medica: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"h5",4),s["\u0275\u0275elementStart"](21,"strong"),s["\u0275\u0275text"](22,"Fecha de la Cita: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"h5",4),s["\u0275\u0275elementStart"](25,"strong"),s["\u0275\u0275text"](26,"Origen: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](27),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",6),s["\u0275\u0275elementStart"](29,"h5",4),s["\u0275\u0275elementStart"](30,"strong"),s["\u0275\u0275text"](31,"N.S.S.: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](32),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"h5",4),s["\u0275\u0275elementStart"](34,"strong"),s["\u0275\u0275text"](35,"Contrato: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](36),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"h5",4),s["\u0275\u0275elementStart"](38,"strong"),s["\u0275\u0275text"](39,"Acompa\xf1ante: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](40),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"h5",4),s["\u0275\u0275elementStart"](42,"strong"),s["\u0275\u0275text"](43,"Destino: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](44),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"div",5),s["\u0275\u0275elementStart"](46,"div",7),s["\u0275\u0275elementStart"](47,"div",8),s["\u0275\u0275elementStart"](48,"mat-table",9),s["\u0275\u0275elementContainerStart"](49,10),s["\u0275\u0275template"](50,R,2,0,"mat-header-cell",11),s["\u0275\u0275template"](51,T,2,1,"mat-cell",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](52,13),s["\u0275\u0275template"](53,j,2,0,"mat-header-cell",11),s["\u0275\u0275template"](54,q,2,1,"mat-cell",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](55,14),s["\u0275\u0275template"](56,_,2,0,"mat-header-cell",11),s["\u0275\u0275template"](57,L,2,1,"mat-cell",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](58,15),s["\u0275\u0275template"](59,z,2,0,"mat-header-cell",11),s["\u0275\u0275template"](60,U,2,1,"mat-cell",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](61,16),s["\u0275\u0275template"](62,$,2,0,"mat-header-cell",11),s["\u0275\u0275template"](63,Y,2,1,"mat-cell",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](64,17),s["\u0275\u0275template"](65,G,2,0,"mat-header-cell",11),s["\u0275\u0275template"](66,H,2,1,"mat-cell",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](67,W,1,0,"mat-header-row",18),s["\u0275\u0275template"](68,Q,1,0,"mat-row",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](69,"div",20),s["\u0275\u0275template"](70,X,3,0,"div",21),s["\u0275\u0275template"](71,Z,3,0,"div",21),s["\u0275\u0275elementStart"](72,"div",22),s["\u0275\u0275elementStart"](73,"button",23),s["\u0275\u0275listener"]("click",function(){return t.realizarsolicitud()}),s["\u0275\u0275text"](74,"Realizar Solicitud "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](75,"div",24),s["\u0275\u0275elementStart"](76,"button",23),s["\u0275\u0275listener"]("click",function(){return t.imprimirSolicitud()}),s["\u0275\u0275text"](77," Imprimir Solo Datos "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](78,"div",25),s["\u0275\u0275elementStart"](79,"button",23),s["\u0275\u0275listener"]("click",function(){return t.imprimirSolicitudCompleta()}),s["\u0275\u0275text"](80," Imprimir Solicitud Completa "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.solicitudValidada),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate"](t.data.solicitud.nombrePaciente),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate"](t.data.solicitud.ftp01),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.data.unidad),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.dateCita),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.data.solicitud.origen),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate2"]("",t.data.solicitud.nss,"\xa0-\xa0",t.data.solicitud.agregadoMedico,""),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.data.solicitud.contratoNumeroContrato),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.acompaniante),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.data.solicitud.destino),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("dataSource",t.datasource),s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.solicitudRealizada),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.solicitudRealizada),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",t.solicitudValidada||!t.solicitudRealizada),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",t.solicitudRealizada),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",t.solicitudRealizada))},directives:[E.uh,E.xY,a.O5,P.a8,P.dn,F.xw,F.yH,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,E.H8,F.Wh,M.lW,I.hX,A.ge,A.ev,A.XQ,A.Gk],styles:[""]}),e})();var ee=n(77307);function te(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"button",14),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().eliminarExcepciones()}),s["\u0275\u0275elementStart"](2,"mat-icon",15),s["\u0275\u0275text"](3,"delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4," Excepcion "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function ne(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",16),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.value),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.motivo," ")}}function ae(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",17),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"\xbfQuien viajara?"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div"),s["\u0275\u0275elementStart"](4,"mat-radio-group",18),s["\u0275\u0275elementStart"](5,"mat-radio-button",19),s["\u0275\u0275text"](6,"Solo el paciente"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"mat-radio-button",20),s["\u0275\u0275text"](8,"Solo el acompa\xf1ante"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("formControl",e.controlMedicamentos),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",e.mayorEdad)}}function oe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",17),s["\u0275\u0275elementStart"](1,"form",21),s["\u0275\u0275elementStart"](2,"mat-form-field",5),s["\u0275\u0275element"](3,"textarea",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"mat-label",23),s["\u0275\u0275text"](5,"Acompa\xf1ante adulto mayor con INAPAN"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div"),s["\u0275\u0275elementStart"](7,"mat-radio-group",24),s["\u0275\u0275elementStart"](8,"mat-radio-button",25),s["\u0275\u0275text"](9,"Si"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"mat-radio-button",26),s["\u0275\u0275text"](11,"No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",e.formAcompaniante)}}function ie(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",4),s["\u0275\u0275elementStart"](1,"mat-form-field",5),s["\u0275\u0275element"](2,"textarea",27),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("formControl",e.controlBoleto)}}let re=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.fb=n,this.excep=[{value:"1",motivo:"Recoleccion de medicamentos"},{value:"2",motivo:"Acompa\xf1ante extra"},{value:"3",motivo:"Medio boleto para ni\xf1os menores de 5 a\xf1os"}],this.medicamentos=!1,this.acompaniante=!1,this.medioBoleto=!1,this.controlMedicamentos=new d.FormControl("",d.Validators.required),this.controlBoleto=new d.FormControl("",d.Validators.required),this.mayorEdad=!0,this.eliminar=!1,0!=t.tipoBoleto&&this.excep.pop()}ngOnInit(){this.formAcompaniante=this.fb.group({justificacion:[null,d.Validators.compose([d.Validators.required])],tarjetaInapan:[null,d.Validators.compose([d.Validators.required])]}),this.data.edad>=18&&(this.mayorEdad=!1),null==this.data.exepcion&&null==this.data.exepcion||(this.eliminar=!0)}motivoSeleccionado(e){switch(this.medicamentos=!1,this.acompaniante=!1,this.medioBoleto=!1,this.controlBoleto.reset(),this.controlMedicamentos.reset(),this.formAcompaniante.reset(),parseInt(e,10)){case 1:this.medicamentos=!0;break;case 2:this.acompaniante=!0;break;case 3:this.medioBoleto=!0}}onNoClick(){this.dialogRef.close()}habilitarBoton(){return!(this.medicamentos||this.medioBoleto||this.acompaniante)||!(!this.controlMedicamentos.invalid||!this.medicamentos)||!(!this.controlBoleto.invalid||!this.medioBoleto)||!(!this.formAcompaniante.invalid||!this.acompaniante)||void 0}eliminarExcepciones(){this.dialogRef.close({valor:"",exepcion:4})}guardar(){this.medicamentos&&this.dialogRef.close({valor:this.controlMedicamentos.value,exepcion:1}),this.acompaniante&&this.dialogRef.close({valor:this.formAcompaniante.getRawValue(),exepcion:2}),this.medioBoleto&&this.dialogRef.close({valor:this.controlBoleto.value,exepcion:3})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](E.so),s["\u0275\u0275directiveInject"](E.WI),s["\u0275\u0275directiveInject"](d.FormBuilder))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-excepciones"]],decls:21,vars:6,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100"],["appearance","outline"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100","class","m-t-10 m-b-10",4,"ngIf"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",1,"m-0","p-0"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-icon-button","","color","warn",3,"click"],["aria-label","Example icon-button with a heart icon"],[3,"value"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100",1,"m-t-10","m-b-10"],["aria-label","Quien viajara",3,"formControl"],["value","1",3,"disabled"],["value","2"],[3,"formGroup"],["matInput","","placeholder","Justificacion","formControlName","justificacion",2,"height","100px"],[1,"font-bold"],["formControlName","tarjetaInapan"],["value","true"],["value","false"],["matInput","","placeholder","Justificacion",2,"height","100px",3,"formControl"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h1",0),s["\u0275\u0275text"](1,"Autorizaciones especiales"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](2,te,5,0,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275elementStart"](6,"mat-form-field",5),s["\u0275\u0275elementStart"](7,"mat-label"),s["\u0275\u0275text"](8,"Tipo de autorizacion"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"mat-select",6),s["\u0275\u0275listener"]("selectionChange",function(e){return t.motivoSeleccionado(e.value)}),s["\u0275\u0275template"](10,ne,2,2,"mat-option",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,ae,9,2,"div",8),s["\u0275\u0275template"](12,oe,12,1,"div",8),s["\u0275\u0275template"](13,ie,3,1,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",10),s["\u0275\u0275elementStart"](15,"div",11),s["\u0275\u0275elementStart"](16,"button",12),s["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),s["\u0275\u0275text"](17,"Cerrar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",11),s["\u0275\u0275elementStart"](19,"button",13),s["\u0275\u0275listener"]("click",function(){return t.guardar()}),s["\u0275\u0275text"](20,"Guardar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.eliminar),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",t.excep),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.medicamentos),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.acompaniante),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.medioBoleto),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("disabled",t.habilitarBoton()))},directives:[E.uh,a.O5,E.xY,F.xw,F.Wh,F.yH,I.KE,I.hX,y.gD,a.sg,E.H8,M.lW,ee.Hw,h.ey,D.VQ,d.NgControlStatus,d.FormControlDirective,D.U0,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,w.Nt,d.DefaultValueAccessor,d.FormControlName],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}"]}),e})();var le=n(30526),se=n(69024),ce=n(40994),me=n(24311);function de(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h6",20),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"currency"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Presupuesto: ",s["\u0275\u0275pipeBind1"](2,1,e.budget),"")}}function ue(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h6",20),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"currency"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Devengo: ",s["\u0275\u0275pipeBind1"](2,1,e.earn),"")}}function pe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h6",21),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"currency"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Disponible: ",s["\u0275\u0275pipeBind1"](2,1,e.available),"")}}function fe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h5",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.unidadMedica.unidadMed.DenominacionUni)}}function he(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275elementStart"](1,"button",24),s["\u0275\u0275elementStart"](2,"mat-icon",25),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().imprimirSoloPlantilla()}),s["\u0275\u0275text"](3,"picture_as_pdf "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function xe(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275elementStart"](1,"button",24),s["\u0275\u0275elementStart"](2,"mat-icon",25),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().imprimirSoloPlantilla()}),s["\u0275\u0275text"](3,"cancel "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function ge(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-label",10),s["\u0275\u0275text"](1,"Datos del traslado"),s["\u0275\u0275elementEnd"]())}function ve(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo numeros. "),s["\u0275\u0275elementEnd"]())}function Se(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",51),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.NumeroContrato),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.NumeroContrato," ")}}function be(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1,"No existe un contrato vigente para la fecha de cita seleccionada "),s["\u0275\u0275elementEnd"]())}function Ce(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-label"),s["\u0275\u0275text"](1,"Selecciona el destino (LUGAR DE CITA) "),s["\u0275\u0275elementEnd"]())}function Ee(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-label"),s["\u0275\u0275text"](1,"Selecciona el destino (PROCEDENCIA)"),s["\u0275\u0275elementEnd"]())}function Fe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",51),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.destino),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.destino," ")}}function Ie(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",51),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.origen),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.origen," ")}}function ye(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"mat-form-field",27),s["\u0275\u0275elementStart"](3,"mat-label"),s["\u0275\u0275text"](4,"Folio FTP-01"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"input",28,29),s["\u0275\u0275listener"]("keyup.enter",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().buscarFolio()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"mat-hint",30),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](9,ve,2,0,"mat-error",31),s["\u0275\u0275elementStart"](10,"button",32),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().buscarFolio()}),s["\u0275\u0275elementStart"](11,"mat-icon",33),s["\u0275\u0275text"](12,"search"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",34),s["\u0275\u0275elementStart"](14,"mat-form-field",14),s["\u0275\u0275elementStart"](15,"mat-label"),s["\u0275\u0275text"](16,"Fecha de la cita"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"input",35),s["\u0275\u0275listener"]("dateChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().fechaCitaSeleccionada(t)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](18,"mat-datepicker-toggle",36),s["\u0275\u0275element"](19,"mat-datepicker",37,38),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",39),s["\u0275\u0275elementStart"](22,"mat-form-field",14),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Numero Contrato"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"mat-select",40),s["\u0275\u0275listener"]("selectionChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().numeroContratoSeleccionado(t.value)}),s["\u0275\u0275template"](26,Se,2,2,"mat-option",41),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](27,be,2,0,"mat-error",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",42),s["\u0275\u0275elementStart"](29,"div",1),s["\u0275\u0275elementStart"](30,"div",43),s["\u0275\u0275elementStart"](31,"mat-checkbox",44),s["\u0275\u0275text"](32,"Ida"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",45),s["\u0275\u0275elementStart"](34,"mat-checkbox",44),s["\u0275\u0275text"](35,"Regreso "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"div",46),s["\u0275\u0275elementStart"](37,"mat-form-field",14),s["\u0275\u0275elementStart"](38,"mat-label"),s["\u0275\u0275text"](39,"Especialidad"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](40,"input",47),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"div",42),s["\u0275\u0275elementStart"](42,"div",1),s["\u0275\u0275elementStart"](43,"mat-form-field",14),s["\u0275\u0275template"](44,Ce,2,0,"mat-label",31),s["\u0275\u0275template"](45,Ee,2,0,"mat-label",31),s["\u0275\u0275elementStart"](46,"mat-select",48),s["\u0275\u0275listener"]("selectionChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().consultOrigin(t.value)}),s["\u0275\u0275template"](47,Fe,2,2,"mat-option",41),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](48,"div",1),s["\u0275\u0275elementStart"](49,"mat-form-field",14),s["\u0275\u0275elementStart"](50,"mat-label"),s["\u0275\u0275text"](51,"Selecciona el origen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"mat-select",49),s["\u0275\u0275template"](53,Ie,2,2,"mat-option",41),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"div",1),s["\u0275\u0275elementStart"](55,"mat-form-field",14),s["\u0275\u0275elementStart"](56,"mat-label"),s["\u0275\u0275text"](57,"Representante Legal"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](58,"input",50),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275reference"](6),t=s["\u0275\u0275reference"](20),n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate1"]("",(null==e.value?null:e.value.length)||0,"/10"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.formSolicitud.controls.ftp01.hasError("pattern")),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",n.formSolicitud.controls.ftp01.hasError("pattern")),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("matDatepicker",t),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("for",t),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",n.contratos),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0==n.contratos.length),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("checked",!0)("formControl",n.controlIda),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("checked",!0)("formControl",n.controlRegreso),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("value",n.especialidad),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",n.controlRegreso.value&&n.controlIda.value||n.controlIda.value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.controlRegreso.value&&!n.controlIda.value),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",n.destinos),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngForOf",n.origenes)}}function we(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-label",10),s["\u0275\u0275text"](1,"Datos del paciente"),s["\u0275\u0275elementEnd"]())}function De(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1,"Formato incorrecto "),s["\u0275\u0275elementEnd"]())}function Me(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Error formato incorrecto "),s["\u0275\u0275elementEnd"]())}function Ve(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275elementStart"](1,"div",39),s["\u0275\u0275elementStart"](2,"mat-form-field",14),s["\u0275\u0275elementStart"](3,"mat-label"),s["\u0275\u0275text"](4,"Nombre del Paciente"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](5,"input",52),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",53),s["\u0275\u0275elementStart"](7,"mat-form-field",14),s["\u0275\u0275elementStart"](8,"mat-label"),s["\u0275\u0275text"](9,"NSS"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](10,"input",54),s["\u0275\u0275template"](11,De,2,0,"mat-error",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",53),s["\u0275\u0275elementStart"](13,"mat-form-field",14),s["\u0275\u0275elementStart"](14,"mat-label"),s["\u0275\u0275text"](15,"Agregado M\xe9dico"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](16,"input",55,56),s["\u0275\u0275elementStart"](18,"mat-hint",30),s["\u0275\u0275text"](19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](20,Me,2,0,"mat-error",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](17),t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngIf",t.formSolicitud.controls.nss.hasError("pattern")&&t.formSolicitud.controls.nss.touched||t.formSolicitud.controls.nss.hasError("minLength")),s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate1"]("",(null==e.value?null:e.value.length)||0,"/8"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.formSolicitud.controls.agregadoMedico.hasError("pattern")&&t.formSolicitud.controls.agregadoMedico.touched)}}function Ne(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-label",10),s["\u0275\u0275text"](1,"Datos del boleto y acompa\xf1ante "),s["\u0275\u0275elementEnd"]())}function ke(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",70),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.mes," ")}}function Oe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",70),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.id," ")}}function Pe(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275elementStart"](1,"div",57),s["\u0275\u0275elementStart"](2,"mat-label"),s["\u0275\u0275elementStart"](3,"strong"),s["\u0275\u0275text"](4,"Datos del paciente:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",58),s["\u0275\u0275elementStart"](7,"mat-label"),s["\u0275\u0275text"](8,"Datos nacimiento"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",59),s["\u0275\u0275elementStart"](10,"div",45),s["\u0275\u0275elementStart"](11,"mat-form-field",14),s["\u0275\u0275elementStart"](12,"mat-label"),s["\u0275\u0275text"](13,"Mes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"mat-select",60),s["\u0275\u0275listener"]("selectionChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().validarMes(t.value)}),s["\u0275\u0275template"](15,ke,2,2,"mat-option",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",45),s["\u0275\u0275elementStart"](17,"mat-form-field",14),s["\u0275\u0275elementStart"](18,"mat-label"),s["\u0275\u0275text"](19,"Dia"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"mat-select",60),s["\u0275\u0275listener"]("selectionChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().validarDia(t.value)}),s["\u0275\u0275template"](21,Oe,2,2,"mat-option",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",61),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Cuenta con tarjeta INAPAN"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div"),s["\u0275\u0275elementStart"](26,"mat-radio-group",62),s["\u0275\u0275listener"]("change",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().tarjetaInapan(t)}),s["\u0275\u0275elementStart"](27,"mat-radio-button",63),s["\u0275\u0275text"](28,"Si "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"mat-radio-button",64),s["\u0275\u0275text"](30,"No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"div",65),s["\u0275\u0275elementStart"](32,"mat-label"),s["\u0275\u0275text"](33,"Autorizar Acompa\xf1ante"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"div"),s["\u0275\u0275elementStart"](35,"mat-radio-group",66),s["\u0275\u0275listener"]("change",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().valorAcompaniante(t)}),s["\u0275\u0275elementStart"](36,"mat-radio-button",67),s["\u0275\u0275text"](37,"Si"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"mat-radio-button",64),s["\u0275\u0275text"](39,"No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"div",68),s["\u0275\u0275elementStart"](41,"button",69),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().abrirDialogExcepciones()}),s["\u0275\u0275text"](42," Excepciones "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate3"](" ",e.tipo_paciente," de ",e.edad," a\xf1os ",e.tipo_boleto," "),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("disabled",!e.preguntarFechaNac),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.meses),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!e.pregunarDia),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.dias),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!e.pacienteInapan),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matTooltipDisabled",!e.pacienteInapan),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("formControl",e.control_acompaniante),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("disabled",e.formSolicitud.invalid)}}function Ae(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",70),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.nombre," ")}}function Be(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",70),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.nombre," ")}}function Re(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",71),s["\u0275\u0275elementStart"](1,"button",72),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().vistaPreviaSolicitud()}),s["\u0275\u0275text"](2," Siguiente "),s["\u0275\u0275elementStart"](3,"mat-icon"),s["\u0275\u0275text"](4,"trending_flat"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",e.formSolicitud.invalid||e.controlVoBo.invalid||e.controlValidate.invalid||!e.controlIda.value&&!e.controlRegreso.value)}}function Te(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",73),s["\u0275\u0275elementStart"](1,"button",72),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().sendPrintTemplate()}),s["\u0275\u0275elementStart"](2,"mat-icon"),s["\u0275\u0275text"](3,"print"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4," Imprimir Plantilla "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",e.controlVoBo.invalid||e.controlValidate.invalid)}}const je=g;let qe=(()=>{class e{constructor(e,t,n,a,o,i,r,l,s,c){this._folioFtp=e,this.fb=t,this.adapter=n,this._contrato=a,this.patientTransfer=o,this.firmService=i,this._usuario=r,this._representante=l,this.dialog=s,this._solicitud=c,this.meses=[{id:1,mes:"Enero"},{id:2,mes:"Febrero"},{id:3,mes:"Marzo"},{id:4,mes:"Abril"},{id:5,mes:"Mayo"},{id:6,mes:"Junio"},{id:7,mes:"Julio"},{id:8,mes:"Agosto"},{id:9,mes:"Septiembre"},{id:10,mes:"Octubre"},{id:11,mes:"Noviembre"},{id:12,mes:"Diciembre"}],this.dias=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10},{id:11},{id:12},{id:13},{id:14},{id:15},{id:16},{id:17},{id:18},{id:19},{id:20},{id:21},{id:22},{id:23},{id:24},{id:25},{id:26},{id:27},{id:28},{id:29},{id:30},{id:31}],this.today=new Date,this.year=this.today.getFullYear(),this.tipo_paciente="",this.tipo_boleto="",this.fechaCita="",this.pasajeros=[],this.contratos=[],this.destinos=[],this.origenes=[],this.especialidad="",this.preguntarFechaNac=!1,this.pregunarDia=!1,this.acompaniante=!1,this.control_acompaniante=new d.FormControl,this.controlIda=new d.FormControl(!0),this.controlRegreso=new d.FormControl(!0),this.pacienteInapan=!1,this.tipoBoleto=2,this.tipoBoletoAcompa=1,this.observacionesAcompa="",this.observacionesPac="",this.acompanianteExtra=!1,this.inapanExtra=!1,this.recoleccionMed=0,this.imprimirPlantilla=!0,this.ValidarFirmas=!1,this.controlVoBo=new d.FormControl("",[d.Validators.required]),this.firmsVoBo=[],this.controlValidate=new d.FormControl("",[d.Validators.required]),this.firmsValidate=[],this.budget=0,this.earn=0,this.available=0,this.adapter.setLocale("es-mx")}ngOnInit(){this.usuarioLog=(0,f.Z)(localStorage.getItem("token")),this.formularioSolicitud(),this.formSolicitud.controls.ftp01.valueChanges.subscribe(e=>{""===e&&this.borrarDatos(),this.formSolicitud.controls.ftp01.valid&&10===e.length?this.formSolicitud.controls.fechaCita.enable():this.formSolicitud.controls.fechaCita.disable()}),this._usuario.unidadUsuario(this.usuarioLog.UsuarioId).subscribe(e=>{console.log(e.Data),this.formSolicitud.controls.unidadMedId.setValue(e.Data.unidadMedId),this.unidadMedica=e.Data,this.fetchFirms()})}buscarFolio(){this._folioFtp.consultarFolioFtp(null!==this.formSolicitud.controls.ftp01.value?this.formSolicitud.controls.ftp01.value:"").subscribe(e=>{this.folio=e.Data,p().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!1,timer:900}),this.borrarDatos(),this.especialidad=this.folio.especialidad,this.formSolicitud.controls.fechaCita.enable(),this.formSolicitud.controls.ftp01.setValue(this.folio.folioTp),this.formSolicitud.controls.nombrePaciente.setValue(this.folio.paciente),this.formSolicitud.controls.nss.setValue(this.folio.nss),this.formSolicitud.controls.agregadoMedico.setValue(this.folio.agregado),this.formSolicitud.controls.nombrePaciente.disable(),this.formSolicitud.controls.nss.disable(),this.formSolicitud.controls.agregadoMedico.disable(),this.formSolicitud.controls.usuarioId.setValue(this.usuarioLog.UsuarioId)},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;p().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!1,timer:900})}})}fetchFirms(){const e=null!==this.formSolicitud.controls.unidadMedId.value?this.formSolicitud.controls.unidadMedId.value:"";this.firmService.GetAllTypeFirms(e,"1","true").subscribe(e=>{this.firmsVoBo=e.Data,console.log(this.firmsVoBo)},e=>{""===e.error&&void 0===e.error||console.log(e.error)}),this.firmService.GetAllTypeFirms(e,"2","true").subscribe(e=>{console.log(e.Data),this.firmsValidate=e.Data},e=>{""===e.error&&void 0===e.error||console.log(e.error)})}formularioSolicitud(){this.formSolicitud=this.fb.group({representanteLegal:[{value:"",disabled:!0},d.Validators.compose([d.Validators.required])],nombrePaciente:[null,d.Validators.compose([d.Validators.required])],nss:[null,d.Validators.compose([d.Validators.required,d.Validators.pattern("^([0-9])*$"),d.Validators.minLength(10)])],agregadoMedico:[null,d.Validators.compose([d.Validators.required,d.Validators.pattern("^[1-6]{1}[mfMF]{1}[0-9]{4}(([oO]{1}[rR]{1})|([eE]{1}[tT]{1})|([eE]{1}[cC]{1})|([sS]{1}[aA]{1})|([eE]{1}[sS]{1})|([sS]{1}[fF]{1})|([pP]{1}[eE]{1})|([nN]{1}[dD]{1}))")])],fechaCita:[{value:"",disabled:!0},d.Validators.compose([d.Validators.required])],origen:[{value:"",disabled:!0},d.Validators.compose([d.Validators.required])],destino:[{value:"",disabled:!0},d.Validators.compose([d.Validators.required])],"acompa\xf1ante":[null,d.Validators.compose([d.Validators.required])],ftp01:[null,d.Validators.compose([d.Validators.required,d.Validators.maxLength(10),d.Validators.pattern("^([0-9])*$")])],contratoNumeroContrato:[{value:"",disabled:!0},d.Validators.compose([d.Validators.required])],unidadMedId:[null,d.Validators.compose([d.Validators.required])],usuarioId:[null,d.Validators.compose([d.Validators.required])]})}validarEdad(e){this.preguntarFechaNac=!1,this.pacienteInapan=!1,this.edad=this.validarFecha.year()-e,this.tipo_paciente="Ni\xf1o",this.tipoBoleto=2,this.edad<5&&(this.tipo_boleto="Sin boleto",this.tipoBoleto=0),5===this.edad&&(this.preguntarFechaNac=!0),this.edad>5&&this.edad<12&&(this.tipo_boleto=" con Medio boleto",this.tipoBoleto=2),12===this.edad&&(this.preguntarFechaNac=!0),this.edad>12&&(this.tipo_paciente="Adulto",this.tipo_boleto="con Boleto Entero",this.tipoBoleto=1),16===this.edad&&(this.preguntarFechaNac=!0),this.edad>=60&&(this.pacienteInapan=!0),this.edad>16?(this.acompaniante=!0,this.control_acompaniante.setValue("")):this.edad<16&&(this.acompaniante=!0)}valorAcompaniante(e){"si"===e.value?this.dialog.open(k,{height:"auto",width:"45%",disableClose:!0}).afterClosed().subscribe(e=>{!1===e?(this.control_acompaniante.setValue("no"),this.formSolicitud.controls["acompa\xf1ante"].setValue(!1)):(this.formSolicitud.controls["acompa\xf1ante"].setValue(!0),console.log(e),this.observacionesAcompa=e.observacion,this.tipoBoletoAcompa=e.tipo,this.autorizacionAcompaniante=e.autorizacion)}):this.formSolicitud.controls["acompa\xf1ante"].setValue(!1)}validarMes(e){const t=parseInt(this.folio.agregado.slice(2,6));this.edad=this.validarFecha.year()-t;const n=e-(this.validarFecha.month()+1);console.log(n),n<0&&(this.pregunarDia=!1,this.diferenciaMenorCero(this.edad)),0===n&&(this.pregunarDia=!0),n>0&&(this.pregunarDia=!1,this.diferenciaMayorCero(this.edad))}validarDia(e){const t=parseInt(this.folio.agregado.slice(2,6));this.edad=this.validarFecha.year()-t;const n=e-this.validarFecha.date();console.log(e,this.validarFecha.date()),n<0&&this.diferenciaMenorCero(this.edad),n>=0&&this.diferenciaMayorCero(this.edad)}diferenciaMenorCero(e){switch(e){case 5:this.tipo_boleto="Medio Boleto",this.tipoBoleto=2;break;case 12:this.tipo_boleto="Boleto Entero",this.tipoBoleto=1;break;case 16:this.acompaniante=!0,this.control_acompaniante.setValue("")}}diferenciaMayorCero(e){switch(e){case 5:this.tipo_boleto="Sin Boleto",this.tipoBoleto=0,this.edad=this.edad-1;break;case 12:this.tipo_boleto="Medio Boleto",this.edad=this.edad-1,this.tipoBoleto=2;break;case 16:this.edad=this.edad-1,this.acompaniante=!0}}tarjetaInapan(e){"si"===e.value?(this.tipo_boleto="Medio Boleto INAPAN",this.observacionesPac="Credencial INAPAN",this.tipoBoleto=2):(this.tipo_boleto="Boleto Entero",this.observacionesPac="",this.tipoBoleto=1)}fechaCitaSeleccionada(e){this.fechaCita=e.value.format();const t=je(this.fechaCita).format("DD-MM-YYYY");this.validarFecha=je(t,"DD-MM-YYYY"),console.log("valores ",this.fechaCita,"  ",t),this.consultarContratos();const n=parseInt(this.folio.agregado.slice(2,6));this.validarEdad(n)}numeroContratoSeleccionado(e){console.log(e),this.consultDestination(e),this._representante.ConsultaRepresentante(e).subscribe(e=>{console.log(e.Data),null!==e.Data&&(this.formSolicitud.controls.representanteLegal.setValue(e.Data.NombreCompleto),this.formSolicitud.controls.representanteLegal.disable())},e=>{""===e.error&&void 0===e.error||(console.log(e.error),this.formSolicitud.controls.representanteLegal.setValue(""),this.formSolicitud.controls.representanteLegal.enable())})}consultarContratos(){this._contrato.ConsultarContratoTraslado(null!==this.formSolicitud.controls.unidadMedId.value?this.formSolicitud.controls.unidadMedId.value:"",this.fechaCita).subscribe(e=>{null!==e.Data?(this.contratos=e.Data,this.formSolicitud.controls.contratoNumeroContrato.enable()):(this.contratos=[],this.formSolicitud.controls.contratoNumeroContrato.disable())})}consultDestination(e){const t=null!==this.formSolicitud.controls.unidadMedId.value?this.formSolicitud.controls.unidadMedId.value:"";this.patientTransfer.ConsultarDestinos(e,t).subscribe(n=>{this.destinos=n.Data,console.log(this.destinos),this.formSolicitud.controls.destino.enable(),this.consultBudget(e,t),this.consultEarn("true",e,t)})}consultOrigin(e){console.log(e);const t=null!==this.formSolicitud.controls.unidadMedId.value?this.formSolicitud.controls.unidadMedId.value:"",n=this.formSolicitud.controls.contratoNumeroContrato.value;this.patientTransfer.ConsultarOrigenes(n,t,e).subscribe(a=>{this.origenes=a.Data,console.log(this.origenes),this.formSolicitud.controls.origen.enable(),this.formSolicitud.controls.origen.setValue(this.origenes[0].origen),this.consultTicketGoingAvailable(e,"entero",n,"true",t)})}consultBudget(e,t){this.patientTransfer.ConsultBudget(e,t).subscribe(e=>{this.budget=e.Data})}consultEarn(e,t,n){this.patientTransfer.ConsultEarn(e,t,n).subscribe(e=>{this.earn=e.Data,this.available=this.budget-this.earn})}consultTicketGoingAvailable(e,t,n,a,o){this.patientTransfer.ConsultTicketGoingAvailable(e,t,n,a,o).subscribe(e=>{console.log("boletos devengados",e.Data)})}borrarDatos(){const e=this.formSolicitud.controls.unidadMedId.value;this.formSolicitud.reset(),this.formSolicitud.controls.unidadMedId.setValue(e),this.especialidad="",this.tipoBoletoAcompa=1,this.observacionesAcompa="",this.tipoBoleto=2,this.observacionesPac="",this.controlVoBo.reset(),this.controlValidate.reset(),this.controlIda.setValue(!0),this.controlRegreso.setValue(!0)}vistaPreviaSolicitud(){this.solicitudTraslado=this.formSolicitud.getRawValue(),this.solicitudTraslado.fechaCita=this.fechaCita;let e=0;if(this.controlIda.value&&(e+=1),this.controlRegreso.value&&(e+=1),0===this.tipoBoleto&&2!=this.recoleccionMed&&this.agregarPasajero({Tipo:1,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:0,TipoBoleto:this.tipoBoleto,Observaciones:"Ni\xf1o con "+this.edad+" a\xf1os."+this.observacionesPac}),2===this.tipoBoleto&&this.edad<13?2!=this.recoleccionMed&&this.agregarPasajero({Tipo:1,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:e,TipoBoleto:this.tipoBoleto,Observaciones:"Ni\xf1o con "+this.edad+" a\xf1os. "+this.observacionesPac}):2===this.tipoBoleto&&2!=this.recoleccionMed&&this.agregarPasajero({Tipo:2,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:e,TipoBoleto:this.tipoBoleto,Observaciones:this.observacionesPac}),1===this.tipoBoleto&&2!=this.recoleccionMed&&this.agregarPasajero({Tipo:2,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:e,TipoBoleto:this.tipoBoleto,Observaciones:this.observacionesPac}),!0===this.formSolicitud.controls["acompa\xf1ante"].value&&1!=this.recoleccionMed&&this.agregarPasajero({Tipo:3,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:e,TipoBoleto:this.tipoBoletoAcompa,Observaciones:this.observacionesAcompa}),this.acompanianteExtra){let t=1,n="Acompa\xf1ante extra ";this.inapanExtra&&(t=2,n+=", Credencial INAPAN"),this.agregarPasajero({Tipo:3,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:e,TipoBoleto:t,Observaciones:n})}console.log(this.pasajeros,this.solicitudTraslado),this.dialog.open(J,{height:"auto",width:"60%",data:{solicitud:this.solicitudTraslado,boletos:this.pasajeros,unidad:this.unidadMedica.unidadMed.DenominacionUni,edad:this.edad,uiPrei:this.unidadMedica.unidadMed.UiPrei,autorizacion:this.autorizacionAcompaniante,firms:this.controlVoBo.value+","+this.controlValidate.value},disableClose:!0}).afterClosed().subscribe(e=>{this.pasajeros=[],e&&(this.borrarDatos(),this.borrarExepciones())})}agregarPasajero(e){this.pasajeros.push(e)}abrirDialogExcepciones(){this.dialog.open(re,{height:"auto",width:"40%",disableClose:!0,data:{tipoBoleto:this.tipoBoleto,edad:this.edad,exepcion:this.exepcion}}).afterClosed().subscribe(e=>{if(e)switch(console.log(e,this.pasajeros),this.exepcion=e.exepcion,e.exepcion){case 1:console.log("es una exepcion de medicamentos"),"1"===e.valor?(this.recoleccionMed=1,this.observacionesPac+=" Recoleccion de medicamentos. "):(this.recoleccionMed=2,this.observacionesAcompa+=" Recoleccion de medicamentos. ");break;case 2:console.log("es para un acompa\xf1ante extra"),this.acompanianteExtra=!0,"true"===e.valor.inapan&&(console.log("Si we"),this.inapanExtra=!0);break;case 3:console.log("es para un medio boleto de un ni\xf1o "),this.tipoBoleto=2,this.tipo_boleto=" con Medio boleto",this.observacionesPac=" Autorizacion de medio boleto.";break;case 4:this.exepcion=void 0,this.borrarExepciones()}})}borrarExepciones(){this.acompanianteExtra=!1,this.inapanExtra=!1;const e=parseInt(this.folio.agregado.slice(2,6));this.validarEdad(e),this.observacionesPac="",this.recoleccionMed=0,this.observacionesAcompa=""}imprimirSoloPlantilla(){this.imprimirPlantilla=!this.imprimirPlantilla,this.controlVoBo.reset(),this.controlValidate.reset()}sendPrintTemplate(){console.log("enviando  "),this._solicitud.PrintTemplate(this.unidadMedica.unidadMedId,this.controlVoBo.value,this.controlValidate.value).subscribe(e=>{const t=URL.createObjectURL(e);window.open(t)},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](m.k),s["\u0275\u0275directiveInject"](d.FormBuilder),s["\u0275\u0275directiveInject"](h._A),s["\u0275\u0275directiveInject"](v.d),s["\u0275\u0275directiveInject"](S.o),s["\u0275\u0275directiveInject"](le.K),s["\u0275\u0275directiveInject"](b.i),s["\u0275\u0275directiveInject"](C.i),s["\u0275\u0275directiveInject"](E.uw),s["\u0275\u0275directiveInject"](O.O))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitud-traslado"]],features:[s["\u0275\u0275ProvidersFeature"]([{provide:h.Ad,useValue:"en-GB"},{provide:h._A,useClass:x.t7,deps:[h.Ad]},{provide:h.sG,useValue:x.$o}])],decls:43,vars:19,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["class","m-0",4,"ngIf"],["class","m-0 colorAvailable",4,"ngIf"],["align","center",1,"font-bold",2,"color","#003366","align-items","center!important"],["class","m-0 font-bold text-info","align","center",4,"ngIf"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],[3,"formGroup"],["style","color: #003366","class","font-bold",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center","class","p-t-20 p-r-20 p-l-20 b-all m-t-5 m-b-15","style","border-color: #a2a2a2",4,"ngIf"],[1,"font-bold",2,"color","#003366"],["fxLayout","row wrap","fxLayoutAlign","space-between center","align","end",1,"p-t-20","p-r-20","p-l-20","b-all","m-t-5",2,"border-color","#a2a2a2"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100",1,"centerText"],[1,"font-bold",2,"margin-right","15px"],["appearance","outline"],["required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","end center","align","end"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100","class","m-r-15",4,"ngIf"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100","class","m-r-15",4,"ngIf"],[1,"m-0"],[1,"m-0","colorAvailable"],["align","center",1,"m-0","font-bold","text-info"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-icon-button","",2,"margin-right","18px","font-size","25pt","color","#d60017"],["aria-label","Example",2,"font-size","25pt",3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"p-t-20","p-r-20","p-l-20","b-all","m-t-5","m-b-15",2,"border-color","#a2a2a2"],["appearance","outline","hintLabel","Maximo 10 numeros"],["matInput","","autocomplete","off","required","","formControlName","ftp01","maxlength","10",3,"keyup.enter"],["folionu",""],["align","end"],[4,"ngIf"],["matSuffix","","mat-icon-button","","color","primary","type","button",3,"disabled","click"],["aria-label","Selecciona"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","DD/MM/AAAA","autocomplete","off","formControlName","fechaCita",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["touchUi","","color","primary"],["picker",""],["fxFlex.gt-sm","40","fxFlex.gt-xs","100","fxFlex","100"],["formControlName","contratoNumeroContrato",3,"selectionChange"],["style","font-size: 14px",3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between center","fxFlex","100"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100",1,"p-r-20"],["color","primary","required","",3,"checked","formControl"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","60","fxFlex.gt-xs","100","fxFlex","100",1,"m-l-30"],["matInput","","autocomplete","off","required","","readonly","",3,"value"],["formControlName","destino",3,"selectionChange"],["formControlName","origen"],["matInput","","autocomplete","off","required","","formControlName","representanteLegal"],[2,"font-size","14px",3,"value"],["matInput","","autocomplete","off","required","","formControlName","nombrePaciente"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","autocomplete","off","required","","formControlName","nss","maxlength","11"],["matInput","","autocomplete","off","required","","formControlName","agregadoMedico","maxlength","8"],["agregado",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"b-b","m-b-10"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100"],["fxLayout","row wrap","fxLayoutAlign","space-evenly center"],[3,"disabled","selectionChange"],["fxFlex.gt-sm","22","fxFlex.gt-xs","100","fxFlex","100","align","center",1,"m-b-10"],[3,"disabled","change"],["value","si","matTooltip","Validar que cuente con su Tarjeta Vigente de INAPAN y solicitarle presentarla.","matTooltipClass","example-tooltip-red","matTooltipShowDelay","0","aria-label","Button that shows a red tooltip","matTooltipHideDelay","2500",3,"matTooltipDisabled"],["value","no"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100","align","center",1,"m-b-10"],[3,"formControl","change"],["value","si"],["fxFlex.gt-sm","15","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"disabled","click"],[3,"value"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100",1,"m-r-15"],["mat-flat-button","","type","button","color","primary",3,"disabled","click"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100",1,"m-r-15"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-card"),s["\u0275\u0275elementStart"](1,"mat-card-content"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275template"](4,de,3,3,"h6",2),s["\u0275\u0275template"](5,ue,3,3,"h6",2),s["\u0275\u0275template"](6,pe,3,3,"h6",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",1),s["\u0275\u0275elementStart"](8,"mat-card-title",4),s["\u0275\u0275text"](9," Solicitud de Traslado de Pacientes "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](10,fe,2,1,"h5",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,he,4,0,"div",6),s["\u0275\u0275template"](12,xe,4,0,"div",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"form",7),s["\u0275\u0275template"](14,ge,2,0,"mat-label",8),s["\u0275\u0275template"](15,ye,59,16,"div",9),s["\u0275\u0275template"](16,we,2,0,"mat-label",8),s["\u0275\u0275template"](17,Ve,21,3,"div",9),s["\u0275\u0275template"](18,Ne,2,0,"mat-label",8),s["\u0275\u0275template"](19,Pe,43,11,"div",9),s["\u0275\u0275elementStart"](20,"mat-label",10),s["\u0275\u0275text"](21,"Datos de las firmas"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",11),s["\u0275\u0275elementStart"](23,"div",12),s["\u0275\u0275elementStart"](24,"mat-label",13),s["\u0275\u0275text"](25,"Vo. Bo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"mat-form-field",14),s["\u0275\u0275elementStart"](27,"mat-label"),s["\u0275\u0275text"](28,"Selecciona la firma"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"mat-select",15),s["\u0275\u0275template"](30,Ae,2,2,"mat-option",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"div",12),s["\u0275\u0275elementStart"](32,"mat-label",13),s["\u0275\u0275text"](33,"Autoriza"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"mat-form-field",14),s["\u0275\u0275elementStart"](35,"mat-label"),s["\u0275\u0275text"](36,"Selecciona la firma"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"mat-select",15),s["\u0275\u0275template"](38,Be,2,2,"mat-option",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"mat-card-actions"),s["\u0275\u0275elementStart"](40,"div",17),s["\u0275\u0275template"](41,Re,5,1,"div",18),s["\u0275\u0275template"](42,Te,5,1,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",t.budget),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.earn),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.available),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",t.unidadMedica),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",t.formSolicitud),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.formSolicitud.controls.agregadoMedico.value&&t.formSolicitud.controls.fechaCita.value&&t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.formSolicitud.controls.agregadoMedico.value&&t.formSolicitud.controls.fechaCita.value&&t.imprimirPlantilla),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("formControl",t.controlVoBo),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.firmsVoBo),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("formControl",t.controlValidate),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.firmsValidate),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.imprimirPlantilla))},directives:[P.a8,P.dn,F.xw,F.Wh,F.yH,a.O5,P.n5,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,I.hX,I.KE,y.gD,d.RequiredValidator,d.NgControlStatus,d.FormControlDirective,a.sg,P.hq,M.lW,ee.Hw,w.Nt,d.DefaultValueAccessor,d.FormControlName,d.MaxLengthValidator,I.bx,I.R9,se.hl,se.nW,se.Mq,ce.oG,ce.e_,I.TO,h.ey,D.VQ,D.U0,me.gM],pipes:[a.H9],styles:[".mat-radio-button{margin:0 12px}.example-tooltip-red{background:#de8500}.example-tooltip-firma,.example-tooltip-red{font-size:11pt;font-weight:700;font-family:Montserrat Light,serif}.example-tooltip-firma{background:#f15333}.mat-he{text-align:left!important}.colorAvailable{color:#1976d2}"],encapsulation:2}),e})();var _e=n(5609),Le=n(34546),ze=n(98418),Ue=n(60126),$e=n(95522),Ye=n(27701);const Ge=["sidenav"];function He(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",57),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function We(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",57),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function Qe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",57),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.NumeroContrato),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.NumeroContrato," ")}}function Xe(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",58),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](),s["\u0275\u0275reference"](2).open()}),s["\u0275\u0275elementStart"](1,"mat-icon",25),s["\u0275\u0275text"](2,"arrow_back_ios"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Ze(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",58),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](),s["\u0275\u0275reference"](2).close()}),s["\u0275\u0275elementStart"](1,"mat-icon",25),s["\u0275\u0275text"](2,"arrow_forward_ios"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Ke(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h5",59),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.unitMedic.unidadMed.DenominacionUni)}}function Je(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",60),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().resetFilterDates()}),s["\u0275\u0275elementStart"](1,"mat-icon"),s["\u0275\u0275text"](2,"cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function et(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-chip",61),s["\u0275\u0275listener"]("removed",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().removeChips(t)}),s["\u0275\u0275text"](1),s["\u0275\u0275elementStart"](2,"mat-icon",62),s["\u0275\u0275text"](3,"cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",e.filter," ")}}function tt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Folio"),s["\u0275\u0275elementEnd"]())}function nt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.folio," ")}}function at(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Elaboracion"),s["\u0275\u0275elementEnd"]())}function ot(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.formatExpeditionDate(e.fechaExpedicion)," ")}}function it(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"FTP01"),s["\u0275\u0275elementEnd"]())}function rt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.ftp01,"")}}function lt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Origen"),s["\u0275\u0275elementEnd"]())}function st(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.origen," ")}}function ct(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Destino"),s["\u0275\u0275elementEnd"]())}function mt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.destino," ")}}function dt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Nombre Paciente"),s["\u0275\u0275elementEnd"]())}function ut(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.nombrePaciente," ")}}function pt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Fecha de Cita"),s["\u0275\u0275elementEnd"]())}function ft(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.formatDate(e.fechaCita)," ")}}function ht(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"PDF"),s["\u0275\u0275elementEnd"]())}function xt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275elementStart"](1,"button",63),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().getPDF(t.folio)}),s["\u0275\u0275elementStart"](2,"mat-icon",25),s["\u0275\u0275text"](3,"picture_as_pdf"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function gt(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function vt(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}const St=g;let bt=(()=>{class e{constructor(e,t,n,a,o,i){this.userService=e,this.transferRequestService=n,this.adapter=o,this.contractService=i,this.config={},this.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"],this.pageSize=20,this.pageSizeOptions=[20,50,100],this.length=0,this.pageIndex=1,this.loadingData=!1,this.searchInputControl=new d.FormControl,this.filters=[],this.controlCompanion=new d.FormControl,this.controlDestination=new d.FormControl,this.controlOrigin=new d.FormControl,this.controlNumberContract=new d.FormControl,this.origins=[],this.destinations=[],this.withCompanion=!0,this.unaccompanied=!0,this.unitMedicalId="",this.filterNumberContract="",this.dateStart="",this.dateEnd="",this.adapter.setLocale("es-mx"),t.observe(["(max-width: 600px)"]).subscribe(e=>{this.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"]}),this.userToken=(0,f.Z)(localStorage.getItem("token")),this.range=a.group({start:new d.FormControl(null),end:new d.FormControl(null)})}ngOnInit(){this.userService.unidadUsuario(this.userToken.UsuarioId).subscribe(e=>{this.unitMedic=e.Data,this.unitMedicalId=this.unitMedic.unidadMed.Id.toString(),this.consultCurrentContract()}),this.paginator.page.subscribe(e=>{e&&(this.pageIndex=e.pageIndex+1,this.pageSize=e.pageSize,this.consultRequest())}),this.paginator._intl.itemsPerPageLabel="Resultados por pagina",this.paginator._intl.nextPageLabel="Siguiente p\xe1gina",this.paginator._intl.lastPageLabel="\xdaltima p\xe1gina",this.paginator._intl.previousPageLabel="Pagina anterior",this.paginator._intl.firstPageLabel="Primera p\xe1gina",this.searchInputControl.valueChanges.subscribe(e=>{e||this.consultRequest()})}consultCurrentContract(){const e=St().format("YYYY-MM-DDTHH:mm:ssZ");this.contractService.ConsultarContratoTraslado(this.unitMedicalId,e).subscribe(e=>{this.contracts=e.Data,this.determineFilters(),this.determineRangeDates()})}determineFilters(){const e=this.contracts.map(e=>e.NumeroContrato);this.filterNumberContract=e.join(","),1===this.contracts.length&&(this.controlNumberContract.setValue(this.filterNumberContract),this.controlNumberContract.disable()),this.consultRequest(),this.consultOriginsFilter(this.unitMedicalId,"true","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"true","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"true","","",this.filterNumberContract,this.dateStart,this.dateEnd)}determineRangeDates(){if(this.contracts.length>1){const e=this.contracts.map(e=>e.InicioContrato).reduce(function(e,t){return new Date(e)<new Date(t)?e:t}),t=St(e,"DD/MM/YYYY");this.minDate=t.toDate();const n=this.contracts.map(e=>e.FinContrato).reduce(function(e,t){return new Date(e)>new Date(t)?e:t}),a=St(n,"DD/MM/YYYY");this.maxDate=a.toDate()}else{const e=St(this.contracts[0].InicioContrato,"DD/MM/YYYY");this.minDate=e.toDate();const t=St(this.contracts[0].FinContrato,"DD/MM/YYYY");this.maxDate=t.toDate()}}consultCompanionFilter(e,t,n,a,o,i,r){this.transferRequestService.GetCompanionFilters(e,t,n,a,o,i,r).subscribe(e=>{const t=e.Data.map(e=>e.acompa\u00f1ante.Bool);this.defineCompanionFilterStatus(t)})}defineCompanionFilterStatus(e){this.withCompanion=!0,this.unaccompanied=!0;for(let t of e)t?this.withCompanion=!1:this.unaccompanied=!1}consultOriginsFilter(e,t,n,a,o,i,r){this.transferRequestService.GetOriginFilters(e,t,n,a,o,i,r).subscribe(e=>{this.origins=e.Data.map(e=>e.origen)})}consultDestinationsFilter(e,t,n,a,o,i,r){this.transferRequestService.GetDestinationFilters(e,t,n,a,o,i,r).subscribe(e=>{this.destinations=e.Data.map(e=>e.destino)})}removeChips(e){const t=this.filters.indexOf(e);t>=0&&(this.filters.splice(t,1),this.resetValueFilters(e.filter),this.consultRequest())}resetValueFilters(e){switch(e){case"Acompa\xf1ante":this.resetFilterCompanion();break;case"Destino":this.resetFilterDestination();break;case"Origen":this.resetFilterOrigin();break;case"Numero Contrato":this.resetFilterContract()}}resetFilterCompanion(){this.controlCompanion.reset(),this.resetAllFilters()}resetFilterDestination(){this.controlDestination.reset(),this.resetAllFilters()}resetFilterOrigin(){this.controlOrigin.reset(),this.resetAllFilters()}resetFilterContract(){this.controlNumberContract.reset(),this.consultCurrentContract(),this.resetAllFilters()}resetFilterDates(){this.range.reset(),this.range.markAsUntouched(),this.range.markAsPristine(),this.dateStart="",this.dateEnd="",this.resetAllFilters(),this.consultRequest()}resetAllFilters(){const e=null!==this.controlOrigin.value?this.controlOrigin.value:"",t=null!==this.controlDestination.value?this.controlDestination.value:"",n=null!==this.controlCompanion.value?this.controlCompanion.value:"";this.consultOriginsFilter(this.unitMedicalId,"true",t,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"true",e,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"true",e,t,this.filterNumberContract,this.dateStart,this.dateEnd)}changeOrigin(e){this.checkRepeatNotChips(e),this.resetAllFilters()}changeDestination(e){this.checkRepeatNotChips(e),this.resetAllFilters()}changeCompanion(e){const t=null!==this.controlCompanion.value?this.controlCompanion.value:"",n=null!==this.controlDestination.value?this.controlDestination.value:"";this.consultDestinationsFilter(this.unitMedicalId,"true",null!==this.controlOrigin.value?this.controlOrigin.value:"",t,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultOriginsFilter(this.unitMedicalId,"true",n,t,this.filterNumberContract,this.dateStart,this.dateEnd),this.checkRepeatNotChips(e)}changeContractNumber(e){this.filterNumberContract=e.value,this.checkRepeatNotChips(e),this.resetAllFilters()}checkRepeatNotChips(e){this.filters.find(t=>t.filter===e.filter)?this.updateValueChip(e):this.addChips(e)}addChips(e){this.filters.push(e),this.consultRequest()}updateValueChip(e){const t=this.filters.findIndex(t=>t.filter===e.filter);this.filters[t].value=e.value,this.consultRequest()}consultRequest(){const e=null!==this.searchInputControl.value?this.searchInputControl.value:"",t=null!==this.controlCompanion.value?this.controlCompanion.value:"",n=null!==this.controlOrigin.value?this.controlOrigin.value:"",a=null!==this.controlDestination.value?this.controlDestination.value:"";this.transferRequestService.ConsultSolicitudes(this.unitMedicalId,this.pageIndex.toString(),this.pageSize.toString(),e,"true",t,n,a,this.filterNumberContract,this.dateStart,this.dateEnd).subscribe(e=>{this.dataSource=new A.by(e.Data.registros),this.length=e.Data.total,this.loadingData=!0,0===this.dataSource.data.length&&p().fire({icon:"error",title:"Sin Resultados",text:"No se encontraron resultados para tu busqueda"})})}formatDate(e){return St(e).format("DD-MM-YYYY")}formatExpeditionDate(e){return St(e).format("DD-MM-YYYY")}getPDF(e){this.transferRequestService.printRequestComplete(e,"true").subscribe(e=>{const t=URL.createObjectURL(e);window.open(t,"Solituddetraslado")},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}rangeDateChange(){this.range.get("end").value&&(console.log("Filtrando por rango"),this.dateStart=this.range.get("start").value.toISOString(),this.dateEnd=this.range.get("end").value.toISOString(),this.consultRequest(),this.resetAllFilters())}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](b.i),s["\u0275\u0275directiveInject"](Le.Yg),s["\u0275\u0275directiveInject"](O.O),s["\u0275\u0275directiveInject"](d.FormBuilder),s["\u0275\u0275directiveInject"](h._A),s["\u0275\u0275directiveInject"](v.d))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitudes-realizadas"]],viewQuery:function(e,t){if(1&e&&(s["\u0275\u0275viewQuery"](Ge,5),s["\u0275\u0275viewQuery"](_e.NW,7)),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.sidenav=e.first),s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.paginator=e.first)}},decls:111,vars:29,consts:[[1,"example-container"],["fixedTopGap","0","disableClose","","mode","side",3,"perfectScrollbar"],["sidenav",""],[2,"padding","6px 12px"],[2,"margin","10px 0","color","#1976d2","font-weight","bold","text-align","center"],[1,"titles"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"formControl","change"],["value","1",3,"disabled"],["value","2",3,"disabled"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["mat-card-avatar","","fxFlex.gt-sm","3","fxFlex.gt-xs","100","fxFlex","100"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["fxFlex.gt-sm","97","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText","m-0"],[1,"m-0","centerText"],["class","m-0 font-bold text-info centerText",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"bg-light","p-r-20","p-l-20"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100"],[1,"p-b-0",2,"padding-bottom","0!important"],["matInput","","placeholder","Buscar solicitud","autocomplete","off",3,"formControl","keyup.enter"],["fxFlex.gt-sm","12","fxFlex.gt-xs","100","fxFlex","100",1,"startText"],["mat-raised-button","",1,"buttonBlue","font-bold",3,"click"],["aria-label","Example icon-button with a heart icon"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["appearance","legacy",1,"p-t-15"],[3,"formGroup","rangePicker","min","max"],["matStartDate","","formControlName","start","placeholder","Inicio","readonly",""],["matEndDate","","formControlName","end","placeholder","Fin","readonly",""],["matSuffix","",3,"for"],["picker",""],["type","button","mat-stroked-button","","matDateRangePickerCancel","","color","warn",3,"click"],["mat-raised-button","","color","primary","matDateRangePickerApply","",3,"click"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click",4,"ngIf"],["fxFlex.gt-sm","10","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["mat-raised-button","","color","accent",3,"click"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100"],["style","border-radius: 5px; font-family: 'Lucida Console', monospace; font-size: small",3,"removed",4,"ngFor","ngForOf"],[3,"hidden"],["mode","query"],[1,"responsive-table"],[3,"dataSource"],["matColumnDef","folio"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","elaboracion"],["matColumnDef","ftp"],["matColumnDef","origen"],["matColumnDef","destino"],["matColumnDef","nombre_pac"],["matColumnDef","fecha"],["matColumnDef","accion"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[3,"value"],["mat-icon-button","","color","primary",3,"click"],[1,"m-0","font-bold","text-info","centerText"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click"],[2,"border-radius","5px","font-family","'Lucida Console', monospace","font-size","small",3,"removed"],["matChipRemove",""],["mat-icon-button","",2,"font-size","25pt","color","#d60017",3,"click"]],template:function(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-sidenav-container",0),s["\u0275\u0275elementStart"](1,"mat-sidenav",1,2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"h4",4),s["\u0275\u0275text"](5,"Filtros"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"h5",5),s["\u0275\u0275text"](7,"Acompa\xf1ante"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"mat-radio-group",6),s["\u0275\u0275listener"]("change",function(e){return t.changeCompanion({filter:"Acompa\xf1ante",value:e.value})}),s["\u0275\u0275elementStart"](9,"mat-radio-button",7),s["\u0275\u0275text"](10,"Si"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"mat-radio-button",8),s["\u0275\u0275text"](12,"No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"h5",5),s["\u0275\u0275text"](14,"Origen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"mat-form-field",9),s["\u0275\u0275elementStart"](16,"mat-label"),s["\u0275\u0275text"](17,"Filtrar por origen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"mat-select",10),s["\u0275\u0275listener"]("selectionChange",function(e){return t.changeOrigin({filter:"Origen",value:e.value})}),s["\u0275\u0275template"](19,He,2,2,"mat-option",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"h5",5),s["\u0275\u0275text"](21,"Destino"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"mat-form-field",9),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Filtrar por destino"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"mat-select",10),s["\u0275\u0275listener"]("selectionChange",function(e){return t.changeDestination({filter:"Destino",value:e.value})}),s["\u0275\u0275template"](26,We,2,2,"mat-option",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"h5",5),s["\u0275\u0275text"](28,"Contrato(s)"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"mat-form-field",9),s["\u0275\u0275elementStart"](30,"mat-label"),s["\u0275\u0275text"](31,"Filtrar por contrato"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"mat-select",10),s["\u0275\u0275listener"]("selectionChange",function(e){return t.changeContractNumber({filter:"Numero Contrato",value:e.value})}),s["\u0275\u0275template"](33,Qe,2,2,"mat-option",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"mat-sidenav-content"),s["\u0275\u0275elementStart"](35,"mat-card"),s["\u0275\u0275elementStart"](36,"mat-card-content"),s["\u0275\u0275elementStart"](37,"div",12),s["\u0275\u0275elementStart"](38,"div",13),s["\u0275\u0275template"](39,Xe,3,0,"button",14),s["\u0275\u0275template"](40,Ze,3,0,"button",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"div",15),s["\u0275\u0275elementStart"](42,"h4",16),s["\u0275\u0275text"](43,"Solicitudes Realizadas de Traslado de Pacientes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"h4",17),s["\u0275\u0275text"](45,"Contratos Vigentes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](46,Ke,2,1,"h5",18),s["\u0275\u0275elementStart"](47,"div",19),s["\u0275\u0275elementStart"](48,"div",20),s["\u0275\u0275elementStart"](49,"mat-form-field",21),s["\u0275\u0275elementStart"](50,"input",22),s["\u0275\u0275listener"]("keyup.enter",function(){return t.consultRequest()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](51,"div",23),s["\u0275\u0275elementStart"](52,"button",24),s["\u0275\u0275listener"]("click",function(){return t.consultRequest()}),s["\u0275\u0275elementStart"](53,"mat-icon",25),s["\u0275\u0275text"](54,"find_in_page"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](55," Buscar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](56,"div",26),s["\u0275\u0275elementStart"](57,"mat-form-field",27),s["\u0275\u0275elementStart"](58,"mat-label"),s["\u0275\u0275text"](59,"Buscar por fechas"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](60,"mat-date-range-input",28),s["\u0275\u0275element"](61,"input",29),s["\u0275\u0275element"](62,"input",30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](63,"mat-datepicker-toggle",31),s["\u0275\u0275elementStart"](64,"mat-date-range-picker",null,32),s["\u0275\u0275elementStart"](66,"mat-date-range-picker-actions"),s["\u0275\u0275elementStart"](67,"button",33),s["\u0275\u0275listener"]("click",function(){return t.resetFilterDates()}),s["\u0275\u0275text"](68,"Borrar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](69,"button",34),s["\u0275\u0275listener"]("click",function(){return t.rangeDateChange()}),s["\u0275\u0275text"](70,"Filtrar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](71,Je,3,0,"button",35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](72,"div",36),s["\u0275\u0275elementStart"](73,"button",37),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275reference"](2).toggle()}),s["\u0275\u0275elementStart"](74,"mat-icon",25),s["\u0275\u0275text"](75,"filter_alt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](76," Filtros "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](77,"div",38),s["\u0275\u0275elementStart"](78,"mat-chip-list"),s["\u0275\u0275template"](79,et,4,1,"mat-chip",39),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](80,"div",40),s["\u0275\u0275element"](81,"mat-progress-bar",41),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](82,"div",42),s["\u0275\u0275elementStart"](83,"mat-table",43),s["\u0275\u0275elementContainerStart"](84,44),s["\u0275\u0275template"](85,tt,2,0,"mat-header-cell",45),s["\u0275\u0275template"](86,nt,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](87,47),s["\u0275\u0275template"](88,at,2,0,"mat-header-cell",45),s["\u0275\u0275template"](89,ot,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](90,48),s["\u0275\u0275template"](91,it,2,0,"mat-header-cell",45),s["\u0275\u0275template"](92,rt,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](93,49),s["\u0275\u0275template"](94,lt,2,0,"mat-header-cell",45),s["\u0275\u0275template"](95,st,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](96,50),s["\u0275\u0275template"](97,ct,2,0,"mat-header-cell",45),s["\u0275\u0275template"](98,mt,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](99,51),s["\u0275\u0275template"](100,dt,2,0,"mat-header-cell",45),s["\u0275\u0275template"](101,ut,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](102,52),s["\u0275\u0275template"](103,pt,2,0,"mat-header-cell",45),s["\u0275\u0275template"](104,ft,2,1,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](105,53),s["\u0275\u0275template"](106,ht,2,0,"mat-header-cell",45),s["\u0275\u0275template"](107,xt,4,0,"mat-cell",46),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](108,gt,1,0,"mat-header-row",54),s["\u0275\u0275template"](109,vt,1,0,"mat-row",55),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](110,"mat-paginator",56),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275reference"](2),n=s["\u0275\u0275reference"](65);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("perfectScrollbar",t.config),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("formControl",t.controlCompanion),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",t.withCompanion),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",t.unaccompanied),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("formControl",t.controlOrigin),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.origins),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("formControl",t.controlDestination),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.destinations),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("formControl",t.controlNumberContract),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.contracts),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.opened),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.opened),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.unitMedic),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("formControl",t.searchInputControl),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("formGroup",t.range)("rangePicker",n)("min",t.minDate)("max",t.maxDate),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("for",n),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngIf",t.range.get("end").value),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",t.filters),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",t.loadingData),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("dataSource",t.dataSource),s["\u0275\u0275advance"](25),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.length)("showFirstLastButtons",!0)}},directives:[ze.TM,ze.JX,Ue.$V,D.VQ,d.NgControlStatus,d.FormControlDirective,D.U0,I.KE,I.hX,y.gD,a.sg,ze.Rh,P.a8,P.dn,F.xw,F.Wh,P.kc,F.yH,a.O5,w.Nt,d.DefaultValueAccessor,M.lW,ee.Hw,se.wx,d.NgControlStatusGroup,d.FormGroupDirective,se.zY,d.FormControlName,se.By,se.nW,I.R9,se._g,se.M5,se.dp,se.DK,$e.qn,Ye.pW,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,_e.NW,h.ey,$e.HS,$e.qH,A.ge,A.ev,A.XQ,A.Gk],styles:[".example-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;flex:1}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:6px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.titles[_ngcontent-%COMP%]{color:#0d453c;margin:10px 0;font-weight:700}.example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),e})();const Ct=["sidenav"];function Et(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",38),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function Ft(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",38),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function It(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",38),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.NumeroContrato),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.NumeroContrato," ")}}function yt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",41),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2),s["\u0275\u0275reference"](2).open()}),s["\u0275\u0275elementStart"](1,"mat-icon",42),s["\u0275\u0275text"](2,"arrow_back_ios"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function wt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",41),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2),s["\u0275\u0275reference"](2).close()}),s["\u0275\u0275elementStart"](1,"mat-icon",42),s["\u0275\u0275text"](2,"arrow_forward_ios"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Dt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",39),s["\u0275\u0275template"](1,yt,3,0,"button",40),s["\u0275\u0275template"](2,wt,3,0,"button",40),s["\u0275\u0275elementEnd"]()),2&e){s["\u0275\u0275nextContext"]();const e=s["\u0275\u0275reference"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.opened),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.opened)}}function Mt(e,t){1&e&&s["\u0275\u0275element"](0,"div",39)}function Vt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h5",43),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.unitMedic.unidadMed.DenominacionUni)}}function Nt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",44),s["\u0275\u0275elementStart"](1,"button",45),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().habilitarCancelacion()}),s["\u0275\u0275elementStart"](2,"mat-icon",42),s["\u0275\u0275text"](3,"delete_forever"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4," Cancelar Folio "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function kt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",44),s["\u0275\u0275elementStart"](1,"button",46),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().habilitarCancelacion()}),s["\u0275\u0275elementStart"](2,"mat-icon",42),s["\u0275\u0275text"](3,"cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4," Cerrar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Ot(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Introduce un numero de folio valido. "),s["\u0275\u0275elementEnd"]())}function Pt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Campo obligatorio. "),s["\u0275\u0275elementEnd"]())}function At(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",54),s["\u0275\u0275elementStart"](1,"mat-form-field",9),s["\u0275\u0275elementStart"](2,"mat-label"),s["\u0275\u0275text"](3,"Ingresa el motivo de cancelacion"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](4,"textarea",55),s["\u0275\u0275template"](5,Pt,2,0,"mat-error",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",e.formCancelar.controls.Motivo.hasError("required")&&e.formCancelar.controls.Motivo.touched)}}function Bt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",56),s["\u0275\u0275elementStart"](1,"button",57),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).buscarFolio()}),s["\u0275\u0275elementStart"](2,"mat-icon",42),s["\u0275\u0275text"](3,"find_in_page"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4," Buscar Folio "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",e.formCancelar.controls.Folio.invalid)}}function Rt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",58),s["\u0275\u0275elementStart"](1,"button",59),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).solicitarCancelacion()}),s["\u0275\u0275elementStart"](2,"mat-icon",42),s["\u0275\u0275text"](3,"disabled_by_default"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4," Cancelar Solicitud "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",e.formCancelar.invalid)}}function Tt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"form",47),s["\u0275\u0275elementStart"](1,"div",48),s["\u0275\u0275elementStart"](2,"div",49),s["\u0275\u0275elementStart"](3,"mat-form-field",9),s["\u0275\u0275elementStart"](4,"mat-label"),s["\u0275\u0275text"](5,"Ingresa el Folio a cancelar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](6,"input",50),s["\u0275\u0275template"](7,Ot,2,0,"mat-error",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,At,6,1,"div",51),s["\u0275\u0275template"](9,Bt,5,1,"div",52),s["\u0275\u0275template"](10,Rt,5,1,"div",53),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("formGroup",e.formCancelar),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",e.formCancelar.controls.Folio.hasError("pattern")&&e.formCancelar.controls.Folio.touched),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.solicitud),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.solicitud),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.solicitud)}}function jt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"h5",60),s["\u0275\u0275elementStart"](2,"strong"),s["\u0275\u0275text"](3,"Folio de solicitud: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",61),s["\u0275\u0275elementStart"](6,"div",62),s["\u0275\u0275elementStart"](7,"h5",63),s["\u0275\u0275elementStart"](8,"strong"),s["\u0275\u0275text"](9,"Nombre: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"h5",63),s["\u0275\u0275elementStart"](12,"strong"),s["\u0275\u0275text"](13,"Folio FTP-01: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"h5",63),s["\u0275\u0275elementStart"](16,"strong"),s["\u0275\u0275text"](17,"Unidad Medica: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"h5",63),s["\u0275\u0275elementStart"](20,"strong"),s["\u0275\u0275text"](21,"Fecha de la Cita: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"h5",63),s["\u0275\u0275elementStart"](24,"strong"),s["\u0275\u0275text"](25,"Origen: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](26),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",62),s["\u0275\u0275elementStart"](28,"h5",63),s["\u0275\u0275elementStart"](29,"strong"),s["\u0275\u0275text"](30,"N.S.S.: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"h5",63),s["\u0275\u0275elementStart"](33,"strong"),s["\u0275\u0275text"](34,"Contrato: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"h5",63),s["\u0275\u0275elementStart"](37,"strong"),s["\u0275\u0275text"](38,"Acompa\xf1ante: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](39),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"h5",63),s["\u0275\u0275elementStart"](41,"strong"),s["\u0275\u0275text"](42,"Destino: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](43),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"h5",63),s["\u0275\u0275elementStart"](45,"strong"),s["\u0275\u0275text"](46,"Fecha Expedicion: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](47),s["\u0275\u0275pipe"](48,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.solicitudTralado.folio),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate"](e.solicitudTralado.nombrePaciente),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.solicitudTralado.ftp01),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("",e.solicitudTralado.unidadMed.DenominacionUni," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.dateAppointment),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.solicitudTralado.origen),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate2"]("",e.solicitudTralado.nss,"\xa0-\xa0",e.solicitudTralado.agregadoMedico," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.solicitudTralado.contratoNumeroContrato),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.acompaniante),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.solicitudTralado.destino),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"]("",e.dateRequest," Hora: ",s["\u0275\u0275pipeBind2"](48,13,e.dateRequestTmp,"mediumTime"),"")}}function qt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",83),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).resetFilterDates()}),s["\u0275\u0275elementStart"](1,"mat-icon"),s["\u0275\u0275text"](2,"cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function _t(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-chip",84),s["\u0275\u0275listener"]("removed",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"](2).removeChips(t)}),s["\u0275\u0275text"](1),s["\u0275\u0275elementStart"](2,"mat-icon",85),s["\u0275\u0275text"](3,"cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",e.filter," ")}}function Lt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",64),s["\u0275\u0275elementStart"](1,"div",14),s["\u0275\u0275elementStart"](2,"mat-form-field",65),s["\u0275\u0275elementStart"](3,"input",66),s["\u0275\u0275listener"]("keyup.enter",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().consultRequest()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",67),s["\u0275\u0275elementStart"](5,"button",68),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().consultRequest()}),s["\u0275\u0275elementStart"](6,"mat-icon",42),s["\u0275\u0275text"](7,"find_in_page"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](8," Buscar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",69),s["\u0275\u0275elementStart"](10,"mat-form-field",70),s["\u0275\u0275elementStart"](11,"mat-label"),s["\u0275\u0275text"](12,"Buscar por fechas"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"mat-date-range-input",71),s["\u0275\u0275element"](14,"input",72),s["\u0275\u0275element"](15,"input",73),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](16,"mat-datepicker-toggle",74),s["\u0275\u0275elementStart"](17,"mat-date-range-picker",null,75),s["\u0275\u0275elementStart"](19,"mat-date-range-picker-actions"),s["\u0275\u0275elementStart"](20,"button",76),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().resetFilterDates()}),s["\u0275\u0275text"](21,"Borrar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"button",77),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().rangeDateChange()}),s["\u0275\u0275text"](23,"Filtrar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](24,qt,3,0,"button",78),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",79),s["\u0275\u0275elementStart"](26,"button",80),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](),s["\u0275\u0275reference"](2).toggle()}),s["\u0275\u0275elementStart"](27,"mat-icon",42),s["\u0275\u0275text"](28,"filter_alt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](29," Filtros "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"div",81),s["\u0275\u0275elementStart"](31,"mat-chip-list"),s["\u0275\u0275template"](32,_t,4,1,"mat-chip",82),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275reference"](18),t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("formControl",t.searchInputControl),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("formGroup",t.range)("rangePicker",e)("min",t.minDate)("max",t.maxDate),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("for",e),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngIf",t.range.get("end").value),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngForOf",t.filters)}}function zt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Folio"),s["\u0275\u0275elementEnd"]())}function Ut(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.folio," ")}}function $t(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Elaboracion"),s["\u0275\u0275elementEnd"]())}function Yt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.formatExpeditionDate(e.fechaExpedicion)," ")}}function Gt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"FTP01"),s["\u0275\u0275elementEnd"]())}function Ht(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.ftp01,"")}}function Wt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Origen"),s["\u0275\u0275elementEnd"]())}function Qt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.origen," ")}}function Xt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Destino"),s["\u0275\u0275elementEnd"]())}function Zt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.destino," ")}}function Kt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Nombre Paciente"),s["\u0275\u0275elementEnd"]())}function Jt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.nombrePaciente," ")}}function en(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Fecha de Cita"),s["\u0275\u0275elementEnd"]())}function tn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.formatoFecha(e.fechaCita)," ")}}function nn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"PDF"),s["\u0275\u0275elementEnd"]())}function an(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275elementStart"](1,"button",86),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().consultarPDF(t.folio)}),s["\u0275\u0275elementStart"](2,"mat-icon",42),s["\u0275\u0275text"](3,"picture_as_pdf"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function on(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function rn(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}const ln=g;let sn=(()=>{class e{constructor(e,t,n,a,o,i){this.userService=e,this.transferRequestService=n,this.fb=a,this.adapter=o,this.contractService=i,this.cancel=!0,this.config={},this.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"],this.pageSize=20,this.pageSizeOptions=[20,50,100],this.length=0,this.pageIndex=1,this.loadingData=!1,this.searchInputControl=new d.FormControl,this.filters=[],this.controlCompanion=new d.FormControl,this.controlDestination=new d.FormControl,this.controlOrigin=new d.FormControl,this.controlNumberContract=new d.FormControl,this.origins=[],this.destinations=[],this.withCompanion=!0,this.unaccompanied=!0,this.unitMedicalId="",this.filterNumberContract="",this.dateStart="",this.dateEnd="",this.acompaniante="",this.solicitud=!1,this.dateAppointment="",this.dateRequest="",this.cancel=!0,this.adapter.setLocale("es-mx"),t.observe(["(max-width: 600px)"]).subscribe(e=>{this.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"]}),this.userToken=(0,f.Z)(localStorage.getItem("token")),this.range=a.group({start:new d.FormControl(null),end:new d.FormControl(null)})}ngOnInit(){this.userService.unidadUsuario(this.userToken.UsuarioId).subscribe(e=>{this.unitMedic=e.Data,this.unitMedicalId=this.unitMedic.unidadMed.Id.toString(),this.consultCurrentContract()}),this.paginator.page.subscribe(e=>{e&&(this.pageIndex=e.pageIndex+1,this.pageSize=e.pageSize,this.consultRequest())}),this.formCancelar=this.fb.group({Folio:["",d.Validators.compose([d.Validators.required,d.Validators.pattern("^([0-9]){6}-[0-9]{2}-[0-9]{1,6}")])],Motivo:["",d.Validators.compose([d.Validators.required,d.Validators.minLength(30)])]}),this.paginator._intl.itemsPerPageLabel="Resultados por pagina",this.paginator._intl.nextPageLabel="Siguiente p\xe1gina",this.paginator._intl.lastPageLabel="\xdaltima p\xe1gina",this.paginator._intl.previousPageLabel="Pagina anterior",this.paginator._intl.firstPageLabel="Primera p\xe1gina",this.searchInputControl.valueChanges.subscribe(e=>{e||this.consultRequest()})}consultCurrentContract(){const e=ln().format("YYYY-MM-DDTHH:mm:ssZ");this.contractService.ConsultarContratoTraslado(this.unitMedicalId,e).subscribe(e=>{this.contracts=e.Data,this.determineFilters(),this.determineRangeDates()})}determineFilters(){const e=this.contracts.map(e=>e.NumeroContrato);this.filterNumberContract=e.join(","),1===this.contracts.length&&(this.controlNumberContract.setValue(this.filterNumberContract),this.controlNumberContract.disable()),this.consultRequest(),this.consultOriginsFilter(this.unitMedicalId,"false","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"false","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"false","","",this.filterNumberContract,this.dateStart,this.dateEnd)}determineRangeDates(){if(this.contracts.length>1){const e=this.contracts.map(e=>e.InicioContrato).reduce(function(e,t){return new Date(e)<new Date(t)?e:t}),t=ln(e,"DD/MM/YYYY");this.minDate=t.toDate();const n=this.contracts.map(e=>e.FinContrato).reduce(function(e,t){return new Date(e)>new Date(t)?e:t}),a=ln(n,"DD/MM/YYYY");this.maxDate=a.toDate()}else{const e=ln(this.contracts[0].InicioContrato,"DD/MM/YYYY");this.minDate=e.toDate();const t=ln(this.contracts[0].FinContrato,"DD/MM/YYYY");this.maxDate=t.toDate()}}consultRequest(){const e=null!==this.searchInputControl.value?this.searchInputControl.value:"",t=null!==this.controlCompanion.value?this.controlCompanion.value:"",n=null!==this.controlOrigin.value?this.controlOrigin.value:"",a=null!==this.controlDestination.value?this.controlDestination.value:"";this.transferRequestService.ConsultSolicitudes(this.unitMedicalId,this.pageIndex.toString(),this.pageSize.toString(),e,"false",t,n,a,this.filterNumberContract,this.dateStart,this.dateEnd).subscribe(e=>{this.dataSource=new A.by(e.Data.registros),this.length=e.Data.total,this.loadingData=!0,0===this.dataSource.data.length&&p().fire({icon:"error",title:"Sin Resultados",text:"No se encontraron resultados para tu busqueda"})})}formatoFecha(e){const t=e.indexOf("T");return e.substring(0,t)}consultarPDF(e){this.transferRequestService.printRequestComplete(e,"false").subscribe(e=>{const t=URL.createObjectURL(e);window.open(t)},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}habilitarCancelacion(){this.sidenav.close(),this.cancel=!this.cancel,this.formCancelar.reset(),this.solicitudTralado="",this.solicitud=!1}buscarFolio(){this.transferRequestService.ConsultarFolioSolicitud(this.formCancelar.controls.Folio.value).subscribe(e=>{console.log(e.Data);const t=new Date(e.Data.fechaCita),n=new Date(e.Data.fechaExpedicion);this.dateRequestTmp=new Date(e.Data.fechaExpedicion),this.dateAppointment=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear(),this.dateRequest=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),this.solicitud=!0,this.solicitudTralado=e.Data,this.regresarAcompaniante(this.solicitudTralado.acompa\u00f1ante)},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:e.error.Mensaje,icon:"error",showConfirmButton:!0})})}regresarAcompaniante(e){this.acompaniante=e?"Si":"No"}solicitarCancelacion(){p().fire({title:"Advertencia",text:"Al solicitar la cancelacion, se guardaran tus datos de usuario y el motivo de cancelacion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#36b729",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Regresar"}).then(e=>{e.value&&(this.bitacora={motivo:this.formCancelar.controls.Motivo.value,solicitudTrasladoFolio:this.formCancelar.controls.Folio.value,usuarioId:this.userToken.UsuarioId},this.transferRequestService.CancelarFolioSolicitud(this.bitacora,this.formCancelar.controls.Folio.value).subscribe(e=>{console.log(e.Mensaje),p().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!0}),this.habilitarCancelacion(),this.consultRequest(),this.resetAllFilters()},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;p().fire({title:"Error al cancelar la solictud",text:t.Mensaje,icon:"error"})}console.log(e.error)}))})}changeCompanion(e){const t=null!==this.controlCompanion.value?this.controlCompanion.value:"",n=null!==this.controlDestination.value?this.controlDestination.value:"";this.consultDestinationsFilter(this.unitMedicalId,"false",null!==this.controlOrigin.value?this.controlOrigin.value:"",t,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultOriginsFilter(this.unitMedicalId,"false",n,t,this.filterNumberContract,this.dateStart,this.dateEnd),this.checkRepeatNotChips(e)}changeDestination(e){this.checkRepeatNotChips(e),this.resetAllFilters()}changeContractNumber(e){this.filterNumberContract=e.value,this.checkRepeatNotChips(e),this.resetAllFilters()}consultDestinationsFilter(e,t,n,a,o,i,r){this.transferRequestService.GetDestinationFilters(e,t,n,a,o,i,r).subscribe(e=>{this.destinations=e.Data.map(e=>e.destino)})}consultOriginsFilter(e,t,n,a,o,i,r){this.transferRequestService.GetOriginFilters(e,t,n,a,o,i,r).subscribe(e=>{this.origins=e.Data.map(e=>e.origen)})}changeOrigin(e){this.checkRepeatNotChips(e),this.resetAllFilters()}checkRepeatNotChips(e){this.filters.find(t=>t.filter===e.filter)?this.updateValueChip(e):this.addChips(e)}addChips(e){this.filters.push(e),this.consultRequest()}updateValueChip(e){const t=this.filters.findIndex(t=>t.filter===e.filter);this.filters[t].value=e.value,this.consultRequest()}resetAllFilters(){const e=null!==this.controlOrigin.value?this.controlOrigin.value:"",t=null!==this.controlDestination.value?this.controlDestination.value:"",n=null!==this.controlCompanion.value?this.controlCompanion.value:"";this.consultOriginsFilter(this.unitMedicalId,"false",t,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"false",e,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"false",e,t,this.filterNumberContract,this.dateStart,this.dateEnd)}consultCompanionFilter(e,t,n,a,o,i,r){this.transferRequestService.GetCompanionFilters(e,t,n,a,o,i,r).subscribe(e=>{const t=e.Data.map(e=>e.acompa\u00f1ante.Bool);this.defineCompanionFilterStatus(t)})}defineCompanionFilterStatus(e){this.withCompanion=!0,this.unaccompanied=!0;for(let t of e)t?this.withCompanion=!1:this.unaccompanied=!1}resetFilterDates(){this.range.reset(),this.range.markAsUntouched(),this.range.markAsPristine(),this.dateStart="",this.dateEnd="",this.resetAllFilters(),this.consultRequest()}rangeDateChange(){this.range.get("end").value&&(console.log("Filtrando por rango"),this.dateStart=this.range.get("start").value.toISOString(),this.dateEnd=this.range.get("end").value.toISOString(),this.consultRequest(),this.resetAllFilters())}removeChips(e){const t=this.filters.indexOf(e);t>=0&&(this.filters.splice(t,1),this.resetValueFilters(e.filter),this.consultRequest())}resetValueFilters(e){switch(e){case"Acompa\xf1ante":this.resetFilterCompanion();break;case"Destino":this.resetFilterDestination();break;case"Origen":this.resetFilterOrigin();break;case"Numero Contrato":this.resetFilterContract()}}resetFilterCompanion(){this.controlCompanion.reset(),this.resetAllFilters()}resetFilterDestination(){this.controlDestination.reset(),this.resetAllFilters()}resetFilterOrigin(){this.controlOrigin.reset(),this.resetAllFilters()}resetFilterContract(){this.controlNumberContract.reset(),this.consultCurrentContract(),this.resetAllFilters()}formatExpeditionDate(e){return ln(e).format("DD-MM-YYYY")}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](b.i),s["\u0275\u0275directiveInject"](Le.Yg),s["\u0275\u0275directiveInject"](O.O),s["\u0275\u0275directiveInject"](d.FormBuilder),s["\u0275\u0275directiveInject"](h._A),s["\u0275\u0275directiveInject"](v.d))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitudes-canceladas"]],viewQuery:function(e,t){if(1&e&&(s["\u0275\u0275viewQuery"](Ct,5),s["\u0275\u0275viewQuery"](_e.NW,7)),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.sidenav=e.first),s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.paginator=e.first)}},decls:83,vars:26,consts:[[1,"example-container"],["fixedTopGap","0","disableClose","","mode","side",3,"perfectScrollbar"],["sidenav",""],[2,"padding","6px 12px"],[2,"margin","10px 0","color","#8e2545","font-weight","bold","text-align","center"],[1,"titles"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"formControl","change"],["value","1",3,"disabled"],["value","2",3,"disabled"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"m-b-15"],["mat-card-avatar","","fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText","m-0"],[2,"color","#ff0000"],[1,"m-0","centerText"],["class","m-0 font-bold text-info centerText",4,"ngIf"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100","class","endText",4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center","class","bg-light p-r-20 p-l-20",4,"ngIf"],[1,"responsive-table",3,"hidden"],[3,"dataSource"],["matColumnDef","folio"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","elaboracion"],["matColumnDef","ftp"],["matColumnDef","origen"],["matColumnDef","destino"],["matColumnDef","nombre_pac"],["matColumnDef","fecha"],["matColumnDef","accion"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[3,"value"],["mat-card-avatar","","fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["aria-label","Example icon-button with a heart icon"],[1,"m-0","font-bold","text-info","centerText"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["mat-raised-button","",2,"font-weight","bold","background","#eb4138","color","white",3,"click"],["mat-stroked-button","","color","warn",2,"font-weight","bold",3,"click"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"b-all",2,"padding-top","16px","padding-left","16px","padding-right","16px","margin-top","10px"],["fxFlex.gt-sm","28","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Ingresa el Folio a cancelar","autocomplete","off","formControlName","Folio"],["fxFlex.gt-sm","47","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],["fxFlex.gt-sm","23","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],["fxFlex.gt-sm","47","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Ingresa el motivo de cancelacion","autocomplete","off","formControlName","Motivo",2,"height","70px"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-raised-button","","color","primary","type","button",2,"font-weight","bold",3,"disabled","click"],["fxFlex.gt-sm","23","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-raised-button","","color","warn",2,"font-weight","bold",3,"disabled","click"],[1,"m-t-10","m-b-10",2,"color","#003366"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],[1,"m-t-10","m-b-10"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"bg-light","p-r-20","p-l-20"],[1,"p-b-0",2,"padding-bottom","0!important"],["matInput","","placeholder","Buscar solicitud cancelada","autocomplete","off",3,"formControl","keyup.enter"],["fxFlex.gt-sm","12","fxFlex.gt-xs","100","fxFlex","100",1,"startText"],["mat-raised-button","",1,"buttonBlue","font-bold",3,"click"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["appearance","legacy",1,"p-t-15"],[3,"formGroup","rangePicker","min","max"],["matStartDate","","formControlName","start","placeholder","Inicio","readonly",""],["matEndDate","","formControlName","end","placeholder","Fin","readonly",""],["matSuffix","",3,"for"],["picker",""],["type","button","mat-stroked-button","","matDateRangePickerCancel","","color","warn",3,"click"],["mat-raised-button","","color","primary","matDateRangePickerApply","",3,"click"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click",4,"ngIf"],["fxFlex.gt-sm","10","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["mat-raised-button","","color","accent",3,"click"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100"],["style","border-radius: 5px; font-family: 'Lucida Console', monospace; font-size: small",3,"removed",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click"],[2,"border-radius","5px","font-family","'Lucida Console', monospace","font-size","small",3,"removed"],["matChipRemove",""],["mat-icon-button","",2,"font-size","25pt","color","#d60017",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-sidenav-container",0),s["\u0275\u0275elementStart"](1,"mat-sidenav",1,2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"h4",4),s["\u0275\u0275text"](5,"Filtros"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"h5",5),s["\u0275\u0275text"](7,"Acompa\xf1ante"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"mat-radio-group",6),s["\u0275\u0275listener"]("change",function(e){return t.changeCompanion({filter:"Acompa\xf1ante",value:e.value})}),s["\u0275\u0275elementStart"](9,"mat-radio-button",7),s["\u0275\u0275text"](10,"Si"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"mat-radio-button",8),s["\u0275\u0275text"](12,"No"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"h5",5),s["\u0275\u0275text"](14,"Origen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"mat-form-field",9),s["\u0275\u0275elementStart"](16,"mat-label"),s["\u0275\u0275text"](17,"Filtrar por origen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"mat-select",10),s["\u0275\u0275listener"]("selectionChange",function(e){return t.changeOrigin({filter:"Origen",value:e.value})}),s["\u0275\u0275template"](19,Et,2,2,"mat-option",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"h5",5),s["\u0275\u0275text"](21,"Destino"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"mat-form-field",9),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Filtrar por destino"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"mat-select",10),s["\u0275\u0275listener"]("selectionChange",function(e){return t.changeDestination({filter:"Destino",value:e.value})}),s["\u0275\u0275template"](26,Ft,2,2,"mat-option",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"h5",5),s["\u0275\u0275text"](28,"Contrato(s)"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"mat-form-field",9),s["\u0275\u0275elementStart"](30,"mat-label"),s["\u0275\u0275text"](31,"Filtrar por contrato"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"mat-select",10),s["\u0275\u0275listener"]("selectionChange",function(e){return t.changeContractNumber({filter:"Numero Contrato",value:e.value})}),s["\u0275\u0275template"](33,It,2,2,"mat-option",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"mat-sidenav-content"),s["\u0275\u0275elementStart"](35,"mat-card"),s["\u0275\u0275elementStart"](36,"mat-card-content"),s["\u0275\u0275elementStart"](37,"div",12),s["\u0275\u0275template"](38,Dt,3,2,"div",13),s["\u0275\u0275template"](39,Mt,1,0,"div",13),s["\u0275\u0275elementStart"](40,"div",14),s["\u0275\u0275elementStart"](41,"h4",15),s["\u0275\u0275text"](42,"Solicitudes "),s["\u0275\u0275elementStart"](43,"b",16),s["\u0275\u0275text"](44,"Canceladas"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](45," de Traslado de Pacientes "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"h4",17),s["\u0275\u0275text"](47,"Contratos Vigentes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](48,Vt,2,1,"h5",18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](49,Nt,5,0,"div",19),s["\u0275\u0275template"](50,kt,5,0,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](51,Tt,11,5,"form",20),s["\u0275\u0275template"](52,jt,49,16,"div",21),s["\u0275\u0275template"](53,Lt,33,8,"div",22),s["\u0275\u0275elementStart"](54,"div",23),s["\u0275\u0275elementStart"](55,"mat-table",24),s["\u0275\u0275elementContainerStart"](56,25),s["\u0275\u0275template"](57,zt,2,0,"mat-header-cell",26),s["\u0275\u0275template"](58,Ut,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](59,28),s["\u0275\u0275template"](60,$t,2,0,"mat-header-cell",26),s["\u0275\u0275template"](61,Yt,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](62,29),s["\u0275\u0275template"](63,Gt,2,0,"mat-header-cell",26),s["\u0275\u0275template"](64,Ht,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](65,30),s["\u0275\u0275template"](66,Wt,2,0,"mat-header-cell",26),s["\u0275\u0275template"](67,Qt,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](68,31),s["\u0275\u0275template"](69,Xt,2,0,"mat-header-cell",26),s["\u0275\u0275template"](70,Zt,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](71,32),s["\u0275\u0275template"](72,Kt,2,0,"mat-header-cell",26),s["\u0275\u0275template"](73,Jt,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](74,33),s["\u0275\u0275template"](75,en,2,0,"mat-header-cell",26),s["\u0275\u0275template"](76,tn,2,1,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](77,34),s["\u0275\u0275template"](78,nn,2,0,"mat-header-cell",26),s["\u0275\u0275template"](79,an,4,0,"mat-cell",27),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](80,on,1,0,"mat-header-row",35),s["\u0275\u0275template"](81,rn,1,0,"mat-row",36),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](82,"mat-paginator",37),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("perfectScrollbar",t.config),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("formControl",t.controlCompanion),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",t.withCompanion),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",t.unaccompanied),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("formControl",t.controlOrigin),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.origins),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("formControl",t.controlDestination),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.destinations),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("formControl",t.controlNumberContract),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.contracts),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.cancel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.cancel),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngIf",t.unitMedic),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.cancel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.cancel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.cancel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.solicitud),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.cancel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!t.cancel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("dataSource",t.dataSource),s["\u0275\u0275advance"](25),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.length)("showFirstLastButtons",!0))},directives:[ze.TM,ze.JX,Ue.$V,D.VQ,d.NgControlStatus,d.FormControlDirective,D.U0,I.KE,I.hX,y.gD,a.sg,ze.Rh,P.a8,P.dn,F.xw,F.Wh,a.O5,F.yH,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,_e.NW,h.ey,P.kc,M.lW,ee.Hw,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,w.Nt,d.DefaultValueAccessor,d.FormControlName,I.TO,se.wx,se.zY,se.By,se.nW,I.R9,se._g,se.M5,se.dp,se.DK,$e.qn,$e.HS,$e.qH,A.ge,A.ev,A.XQ,A.Gk],pipes:[a.uU],styles:["[hidden][_ngcontent-%COMP%]{display:none!important}.example-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;flex:1}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:6px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.titles[_ngcontent-%COMP%]{color:#0d453c;margin:10px 0;font-weight:700}.example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),e})();function cn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo letras. "),s["\u0275\u0275elementEnd"]())}function mn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo letras. "),s["\u0275\u0275elementEnd"]())}function dn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo n\xfameros. "),s["\u0275\u0275elementEnd"]())}function un(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",20),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.tipo," ")}}function pn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275elementStart"](1,"mat-form-field",7),s["\u0275\u0275elementStart"](2,"mat-label"),s["\u0275\u0275text"](3,"Tipo firma"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"mat-select",18),s["\u0275\u0275template"](5,un,2,2,"mat-option",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.types)}}let fn=(()=>{class e{constructor(e,t,n,a){this.fb=e,this.dialogRef=t,this.usuarioService=n,this.firmService=a,this.unitId=0,this.pattern="^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1]+( [a-zA-Z_\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1]+)*$",this.types=[],this.types=[{value:"1",tipo:"Vo. Bo."},{value:"2",tipo:"Autoriza"}],this.createForm()}ngOnInit(){}getUnit(e){let t=!0;return this.usuarioService.unidadUsuario(e).subscribe(t=>{this.unitId=t.Data.UnidadMedId,this.firmObject.usuarioId=e,this.firmObject.unidadMedId=this.unitId},e=>{if(""!==e.error||void 0!==e.error){const n=e.error;p().fire({icon:"error",title:"Error",text:n.Mensaje,showConfirmButton:!0}),t=!1}}),t}createForm(){this.formFirm=this.fb.group({nombre:["",d.Validators.compose([d.Validators.required,d.Validators.pattern(this.pattern)])],cargo:["",d.Validators.compose([d.Validators.required,d.Validators.pattern(this.pattern)])],matricula:["",d.Validators.compose([d.Validators.required,d.Validators.pattern("^([0-9])*$")])],tipo:["",d.Validators.compose([d.Validators.required])]})}onNoClick(){this.dialogRef.close()}saveFirm(){const e=localStorage.getItem("idUser");if(this.getUnit(e)){this.firmObject=this.formFirm.getRawValue();const e=this.formFirm.get("tipo").value;this.firmObject.tipo=parseInt(e.value,10),p().fire({title:"Estas seguro de agregar estos datos",showCancelButton:!0,icon:"warning",confirmButtonColor:"#00b162",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Cancelar"}).then(e=>{e.value&&this.firmService.AgregarFirma(this.firmObject).subscribe(e=>{console.log(e.Mensaje),p().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!0}),this.dialogRef.close(!0)},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;p().fire({position:"center",title:"Duplicado",text:t.Mensaje,icon:"error",showConfirmButton:!0})}})})}}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.FormBuilder),s["\u0275\u0275directiveInject"](E.so),s["\u0275\u0275directiveInject"](b.i),s["\u0275\u0275directiveInject"](le.K))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-new-firm"]],decls:37,vars:6,consts:[[3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["align","center",2,"color","#003366","font-weight","bold"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end"],["appearance","outline"],["matInput","","placeholder","Nombre Completo","required","","autocomplete","off","formControlName","nombre"],[4,"ngIf"],["matInput","","placeholder","Cargo","autocomplete","off","required","","formControlName","cargo"],["matInput","","placeholder","Matricula","autocomplete","off","required","","formControlName","matricula"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",2,"padding-right","24px","padding-left","24px"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["aria-label","Exampl"],["required","","formControlName","tipo"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"form",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"mat-card"),s["\u0275\u0275elementStart"](5,"mat-card-title",4),s["\u0275\u0275text"](6,"Agregar nueva firma "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"mat-card-content"),s["\u0275\u0275elementStart"](8,"div",5),s["\u0275\u0275elementStart"](9,"div",6),s["\u0275\u0275elementStart"](10,"mat-form-field",7),s["\u0275\u0275elementStart"](11,"mat-label"),s["\u0275\u0275text"](12,"Nombre Completo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](13,"input",8),s["\u0275\u0275template"](14,cn,2,0,"mat-error",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",6),s["\u0275\u0275elementStart"](16,"mat-form-field",7),s["\u0275\u0275elementStart"](17,"mat-label"),s["\u0275\u0275text"](18,"Cargo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](19,"input",10),s["\u0275\u0275template"](20,mn,2,0,"mat-error",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",6),s["\u0275\u0275elementStart"](22,"mat-form-field",7),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Matricula"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](25,"input",11),s["\u0275\u0275template"](26,dn,2,0,"mat-error",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](27,pn,6,1,"div",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",13),s["\u0275\u0275elementStart"](29,"div",14),s["\u0275\u0275elementStart"](30,"button",15),s["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),s["\u0275\u0275text"](31,"Cancelar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"div",14),s["\u0275\u0275elementStart"](33,"button",16),s["\u0275\u0275listener"]("click",function(){return t.saveFirm()}),s["\u0275\u0275elementStart"](34,"mat-icon",17),s["\u0275\u0275text"](35,"save"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](36," Guardar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("formGroup",t.formFirm),s["\u0275\u0275advance"](14),s["\u0275\u0275property"]("ngIf",t.formFirm.controls.nombre.hasError("pattern")&&t.formFirm.controls.nombre.touched),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.formFirm.controls.cargo.hasError("pattern")&&t.formFirm.controls.cargo.touched),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.formFirm.controls.matricula.hasError("pattern")&&t.formFirm.controls.matricula.touched),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.types),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("disabled",t.formFirm.invalid))},directives:[d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,E.xY,F.xw,F.yH,P.a8,P.n5,P.dn,F.Wh,I.KE,I.hX,w.Nt,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.FormControlName,a.O5,E.H8,M.lW,ee.Hw,I.TO,y.gD,a.sg,h.ey],styles:[""]}),e})(),hn=(()=>{class e{transform(e){return 1===e?"Vo. Bo.":"Autoriza"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s["\u0275\u0275definePipe"]({name:"returnTypeFirm",type:e,pure:!0}),e})();function xn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo letras. "),s["\u0275\u0275elementEnd"]())}function gn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo letras. "),s["\u0275\u0275elementEnd"]())}function vn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Ingresa solo n\xfameros. "),s["\u0275\u0275elementEnd"]())}function Sn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",19),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.tipo," ")}}let bn=(()=>{class e{constructor(e,t,n,a,o){this.fb=e,this.dialogRef=t,this.usuarioService=n,this.firmService=a,this.data=o,this.unitId=0,this.pattern="^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1]+( [a-zA-Z_\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1]+)*$",this.types=[{value:"1",tipo:"Vo. Bo."},{value:"2",tipo:"Autoriza"}],this.changeDetect=!1,this.createForm()}ngOnInit(){}createForm(){this.formFirm=this.fb.group({nombre:["",d.Validators.compose([d.Validators.required,d.Validators.pattern(this.pattern)])],cargo:["",d.Validators.compose([d.Validators.required,d.Validators.pattern(this.pattern)])],tipo:["",d.Validators.compose([d.Validators.required])],matricula:["",d.Validators.compose([d.Validators.required,d.Validators.pattern("^([0-9])*$")])]}),this.formFirm.patchValue(this.data.firm);const e=new hn;this.formFirm.controls.tipo.setValue(e.transform(this.data.firm.tipo))}onNoClick(){this.dialogRef.close()}compareFn(e,t){return e.tipo===t}changeSelect(){this.changeDetect=!0}editFirm(){p().fire({title:"Estas seguro de agregar estos datos",showCancelButton:!0,icon:"warning",confirmButtonColor:"#00b162",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Cancelar"}).then(e=>{if(e.value){this.firmObj=this.formFirm.getRawValue();const e=this.formFirm.get("tipo").value;this.firmObj.tipo=parseInt(e.value,10),this.changeDetect||delete this.firmObj.tipo;let t="";this.data.firm.matricula!==this.firmObj.matricula&&(t="si");const n=localStorage.getItem("idUser");this.firmService.UpdateFirm(this.firmObj,this.data.firm.id,this.data.firm.unidadMedId.toString(),t,n).subscribe(e=>{p().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!0}),console.log(e.Data),this.dialogRef.close(!0)},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;p().fire({position:"center",title:"Error",text:t.Mensaje,icon:"error",showConfirmButton:!0})}})}})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.FormBuilder),s["\u0275\u0275directiveInject"](E.so),s["\u0275\u0275directiveInject"](b.i),s["\u0275\u0275directiveInject"](le.K),s["\u0275\u0275directiveInject"](E.WI))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-edit-firm"]],decls:42,vars:7,consts:[["mat-dialog-content",""],[3,"formGroup"],["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["align","center",2,"color","#003366","font-weight","bold"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end"],["appearance","outline"],["matInput","","placeholder","Nombre Completo","required","","autocomplete","off","formControlName","nombre"],[4,"ngIf"],["matInput","","placeholder","Cargo","autocomplete","off","required","","formControlName","cargo"],["matInput","","placeholder","Matricula","autocomplete","off","required","","formControlName","matricula"],["required","","formControlName","tipo",3,"compareWith","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",2,"padding-right","24px","padding-left","24px"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["aria-label","Exampl"],[3,"value"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"form",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"mat-card"),s["\u0275\u0275elementStart"](5,"mat-card-title",4),s["\u0275\u0275text"](6,"Editar firma "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"mat-card-content"),s["\u0275\u0275elementStart"](8,"div",5),s["\u0275\u0275elementStart"](9,"div",6),s["\u0275\u0275elementStart"](10,"mat-form-field",7),s["\u0275\u0275elementStart"](11,"mat-label"),s["\u0275\u0275text"](12,"Nombre Completo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](13,"input",8),s["\u0275\u0275template"](14,xn,2,0,"mat-error",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",6),s["\u0275\u0275elementStart"](16,"mat-form-field",7),s["\u0275\u0275elementStart"](17,"mat-label"),s["\u0275\u0275text"](18,"Cargo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](19,"input",10),s["\u0275\u0275template"](20,gn,2,0,"mat-error",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",6),s["\u0275\u0275elementStart"](22,"mat-form-field",7),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Matricula"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](25,"input",11),s["\u0275\u0275template"](26,vn,2,0,"mat-error",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"div",6),s["\u0275\u0275elementStart"](28,"mat-form-field",7),s["\u0275\u0275elementStart"](29,"mat-label"),s["\u0275\u0275text"](30,"Tipo firma"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"mat-select",12),s["\u0275\u0275listener"]("selectionChange",function(){return t.changeSelect()}),s["\u0275\u0275template"](32,Sn,2,2,"mat-option",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",14),s["\u0275\u0275elementStart"](34,"div",15),s["\u0275\u0275elementStart"](35,"button",16),s["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),s["\u0275\u0275text"](36,"Cancelar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"div",15),s["\u0275\u0275elementStart"](38,"button",17),s["\u0275\u0275listener"]("click",function(){return t.editFirm()}),s["\u0275\u0275elementStart"](39,"mat-icon",18),s["\u0275\u0275text"](40,"edit "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](41," Editar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",t.formFirm),s["\u0275\u0275advance"](13),s["\u0275\u0275property"]("ngIf",t.formFirm.controls.nombre.hasError("pattern")&&t.formFirm.controls.nombre.touched),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.formFirm.controls.cargo.hasError("pattern")&&t.formFirm.controls.cargo.touched),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.formFirm.controls.matricula.hasError("pattern")&&t.formFirm.controls.matricula.touched),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("compareWith",t.compareFn),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.types),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("disabled",!t.formFirm.dirty))},directives:[E.xY,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,F.xw,F.yH,P.a8,P.n5,P.dn,F.Wh,I.KE,I.hX,w.Nt,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.FormControlName,a.O5,y.gD,a.sg,E.H8,M.lW,ee.Hw,I.TO,h.ey],styles:[""]}),e})(),Cn=(()=>{class e{transform(e){return e?"Inactivar":"Activar"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s["\u0275\u0275definePipe"]({name:"returnConditionFirm",type:e,pure:!0}),e})(),En=(()=>{class e{transform(e){return e?{text:"Activo",color:"#09b107"}:{text:"Inactivo",color:"#d60017"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s["\u0275\u0275definePipe"]({name:"returnStateFirm",type:e,pure:!0}),e})();function Fn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Nombre"),s["\u0275\u0275elementEnd"]())}function In(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.nombre," ")}}function yn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Cargo"),s["\u0275\u0275elementEnd"]())}function wn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.cargo,"")}}function Dn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Matricula"),s["\u0275\u0275elementEnd"]())}function Mn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.matricula)}}function Vn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Tipo de firma"),s["\u0275\u0275elementEnd"]())}function Nn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"returnTypeFirm"),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](2,1,e.tipo)," ")}}function kn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Estado"),s["\u0275\u0275elementEnd"]())}function On(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell",20),s["\u0275\u0275pipe"](1,"returnStateFirm"),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"returnStateFirm"),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275styleProp"]("color",s["\u0275\u0275pipeBind1"](1,3,e.estado).color),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](3,5,e.estado).text," ")}}function Pn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Acciones"),s["\u0275\u0275elementEnd"]())}function An(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",25),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().enableFirm(t)}),s["\u0275\u0275elementStart"](1,"mat-icon",22),s["\u0275\u0275text"](2,"person_off"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Bn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",26),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().enableFirm(t)}),s["\u0275\u0275elementStart"](1,"mat-icon",22),s["\u0275\u0275text"](2,"person"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Rn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275elementStart"](1,"button",21),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().openDialogFirmEdit(t)}),s["\u0275\u0275elementStart"](2,"mat-icon",22),s["\u0275\u0275text"](3,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](4,An,3,0,"button",23),s["\u0275\u0275template"](5,Bn,3,0,"button",24),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",!e.estado),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",e.estado),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.estado)}}function Tn(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function jn(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}let qn=(()=>{class e{constructor(e,t){this.dialog=e,this.firmService=t,this.displayedColumns=["name","position","matric","type","state","action"],this.pageSize=20,this.size=[20,50,100],this.totalRecords=0,this.actualPage=1,this.dataSource=new A.by}ngOnInit(){this.paginator._intl.itemsPerPageLabel="Resultados por pagina",this.getAllFirm()}getAllFirm(){this.firmService.GetFirmsByUnit("783").subscribe(e=>{console.log(e),this.dataSource.data=e.Data,this.dataSource.paginator=this.paginator,this.totalRecords=this.dataSource.data.length})}openDialogFirm(){this.dialog.open(fn,{height:"auto",width:"55%",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getAllFirm()})}openDialogFirmEdit(e){this.dialog.open(bn,{height:"auto",width:"55%",disableClose:!0,data:{firm:e}}).afterClosed().subscribe(e=>{e&&this.getAllFirm()})}enableFirm(e){console.log(e);const t=(new Cn).transform(e.estado),n=(new hn).transform(e.tipo),a=JSON.parse(localStorage.getItem("unit"));console.log(a),p().fire({title:"\xbfDeseas "+t+"?",html:"A <b>"+e.nombre+"</b>,<br>Como: <b>"+n+"</b> <br>Para el:  <b>"+a.unidadMed.DenominacionUni+"</b> ",showCancelButton:!0,icon:"warning",confirmButtonColor:"#00b162",cancelButtonColor:"#d33",confirmButtonText:t,cancelButtonText:"Cancelar"}).then(t=>{if(t.value){e.estado||(e.estado=!1);const t=localStorage.getItem("idUser");this.firmService.EnableFirm(e.id,e.estado.toString(),e.unidadMedId.toString(),t).subscribe(e=>{p().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!0}),console.log(e.Data),this.getAllFirm()},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;p().fire({position:"center",title:"Error",text:t.Mensaje,icon:"error",showConfirmButton:!0})}})}})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](E.uw),s["\u0275\u0275directiveInject"](le.K))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-firmas"]],viewQuery:function(e,t){if(1&e&&s["\u0275\u0275viewQuery"](_e.NW,7),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.paginator=e.first)}},decls:35,vars:7,consts:[["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["align","center",2,"color","#003366","font-weight","bold"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-raised-button","","color","primary",3,"click"],["aria-label","Exampl"],[1,"responsive-table"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","position"],["matColumnDef","matric"],["matColumnDef","type"],["matColumnDef","state"],["style","font-weight: bold",3,"color",4,"matCellDef"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[2,"font-weight","bold"],["mat-icon-button","","color","accent",3,"disabled","click"],["aria-label","Icon"],["mat-icon-button","","style","color: #d60017",3,"click",4,"ngIf"],["mat-icon-button","","style","color: #1E88E5",3,"click",4,"ngIf"],["mat-icon-button","",2,"color","#d60017",3,"click"],["mat-icon-button","",2,"color","#1E88E5",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"mat-card"),s["\u0275\u0275elementStart"](3,"mat-card-title",2),s["\u0275\u0275text"](4,"Firmas autorizadas para las solicitudes de traslado de pacientes "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"mat-card-content"),s["\u0275\u0275elementStart"](6,"div",0),s["\u0275\u0275elementStart"](7,"div",3),s["\u0275\u0275elementStart"](8,"button",4),s["\u0275\u0275listener"]("click",function(){return t.openDialogFirm()}),s["\u0275\u0275elementStart"](9,"mat-icon",5),s["\u0275\u0275text"](10,"add_circle"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](11," Agregar firma "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",6),s["\u0275\u0275elementStart"](13,"mat-table",7),s["\u0275\u0275elementContainerStart"](14,8),s["\u0275\u0275template"](15,Fn,2,0,"mat-header-cell",9),s["\u0275\u0275template"](16,In,2,1,"mat-cell",10),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](17,11),s["\u0275\u0275template"](18,yn,2,0,"mat-header-cell",9),s["\u0275\u0275template"](19,wn,2,1,"mat-cell",10),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](20,12),s["\u0275\u0275template"](21,Dn,2,0,"mat-header-cell",9),s["\u0275\u0275template"](22,Mn,2,1,"mat-cell",10),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](23,13),s["\u0275\u0275template"](24,Vn,2,0,"mat-header-cell",9),s["\u0275\u0275template"](25,Nn,3,3,"mat-cell",10),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](26,14),s["\u0275\u0275template"](27,kn,2,0,"mat-header-cell",9),s["\u0275\u0275template"](28,On,4,7,"mat-cell",15),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](29,16),s["\u0275\u0275template"](30,Pn,2,0,"mat-header-cell",9),s["\u0275\u0275template"](31,Rn,6,3,"mat-cell",10),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](32,Tn,1,0,"mat-header-row",17),s["\u0275\u0275template"](33,jn,1,0,"mat-row",18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](34,"mat-paginator",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](13),s["\u0275\u0275property"]("dataSource",t.dataSource),s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageSizeOptions",t.size)("pageSize",t.pageSize)("length",t.totalRecords)("showFirstLastButtons",!0))},directives:[F.xw,F.yH,P.a8,P.n5,P.dn,M.lW,ee.Hw,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,_e.NW,A.ge,A.ev,a.O5,A.XQ,A.Gk],pipes:[hn,En],styles:[""]}),e})();var _n=n(42693),Ln=n(79996),zn=n(529);let Un=(()=>{class e{constructor(e){this.http=e}AddBitacoraUsuarioPuesto(e,t){const n=(new _n.LE).set("status",t);return this.http.post(`${zn.N.host}/usuarioPuesto/bitacora`,e,{params:n}).pipe((0,Ln.U)(e=>e))}GetTipoModificaciones(e){const t=(new _n.LE).set("notId",e);return this.http.get(`${zn.N.host}/usuarios/tipo/modificacion`,{params:t}).pipe((0,Ln.U)(e=>e))}UnsuscribeUsuarioPuesto(e,t){const n=(new _n.LE).set("idUser",t);return this.http.put(`${zn.N.host}/usuarios/unsuscribe`,e,{params:n}).pipe((0,Ln.U)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](_n.eN))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function $n(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",14),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.tipo," ")}}let Yn=(()=>{class e{constructor(e,t,n){this.usuarioPuesto=e,this.fb=t,this.dialogRef=n}ngOnInit(){this.consultTipoModificaciones(),this.form=this.fb.group({tipoModificacion:[null,d.Validators.compose([d.Validators.required])],justificacion:[null,d.Validators.compose([d.Validators.required,d.Validators.minLength(20)])]})}consultTipoModificaciones(){this.usuarioPuesto.GetTipoModificaciones("61f1a754d7be0a2b052e887e").subscribe(e=>{console.log(e.Data),this.tiposModificaciones=e.Data})}onSubmit(){p().fire({title:"Confirmaci\xf3n de baja",text:"\xbfEstas seguro de realizar esta baja?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, dar de baja",cancelButtonText:"Cancelar",reverseButtons:!0}).then(e=>{e.isConfirmed&&this.dialogRef.close(this.form.value)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](Un),s["\u0275\u0275directiveInject"](d.FormBuilder),s["\u0275\u0275directiveInject"](E.so))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-delete-user"]],decls:23,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],["fxLayout","row wrap"],["fxFlex.gt-sm","95","fxFlex.gt-xs","95","fxFlex","80"],["appearance","outline"],["formControlName","tipoModificacion"],[3,"value",4,"ngFor","ngForOf"],[2,"color","crimson"],["fxFlex.gt-sm","95","fxFlex.gt-xs","95","fxFlex","80",1,"m-t-15"],["matInput","","formControlName","justificacion"],["align","end"],["mat-stroked-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h2",0),s["\u0275\u0275text"](1,"Selecciona el tipo de baja"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"mat-dialog-content",1),s["\u0275\u0275elementStart"](3,"form",2),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275elementStart"](6,"mat-form-field",5),s["\u0275\u0275elementStart"](7,"mat-label"),s["\u0275\u0275text"](8,"Selecciona"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"mat-select",6),s["\u0275\u0275template"](10,$n,2,2,"mat-option",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"mat-hint",8),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",9),s["\u0275\u0275elementStart"](14,"mat-form-field",5),s["\u0275\u0275elementStart"](15,"mat-label"),s["\u0275\u0275text"](16,"Escribe la justificaci\xf3n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](17,"textarea",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"mat-dialog-actions",11),s["\u0275\u0275elementStart"](19,"button",12),s["\u0275\u0275text"](20,"Cancelar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"button",13),s["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),s["\u0275\u0275text"](22,"Aceptar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("formGroup",t.form),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",t.tiposModificaciones),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](null==t.form.get("tipoModificacion").value?null:t.form.get("tipoModificacion").value.descripcion),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("disabled",t.form.invalid))},directives:[E.uh,E.xY,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,F.xw,F.yH,I.KE,I.hX,y.gD,d.NgControlStatus,d.FormControlName,a.sg,I.bx,w.Nt,d.DefaultValueAccessor,E.H8,M.lW,E.ZT,h.ey],styles:[""]}),e})();var Gn=function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function r(e){try{s(a.next(e))}catch(t){i(t)}}function l(e){try{s(a.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,l)}s((a=a.apply(e,t||[])).next())})};function Hn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h2",15),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.unitMedic.unidadMed.DenominacionUni)}}function Wn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Permisos"),s["\u0275\u0275elementEnd"]())}const Qn=function(e,t){return["/traslado/permit",e,t]};function Xn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275elementStart"](1,"button",16),s["\u0275\u0275elementStart"](2,"mat-icon"),s["\u0275\u0275text"](3,"manage_accounts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction2"](2,Qn,e.user.UsuarioId,n.unitMedic.unidadMed.DenominacionUni))("disabled",!(e.user.Valid||e.permit))}}function Zn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Nombre"),s["\u0275\u0275elementEnd"]())}function Kn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate3"]("",e.user.Usuario.Persona.Nombre," ",e.user.Usuario.Persona.ApellidoPat," ",e.user.Usuario.Persona.ApellidoMat,"")}}function Jn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Puesto"),s["\u0275\u0275elementEnd"]())}function ea(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.user.PuestoOrganigrama.catalogoPuesto.Puesto)}}function ta(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Departamento"),s["\u0275\u0275elementEnd"]())}function na(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.user.PuestoOrganigrama.organigramaUnidad.departamento.Nombre)}}function aa(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Unidad"),s["\u0275\u0275elementEnd"]())}function oa(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.unitMedic.unidadMed.DenominacionUni)}}function ia(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Usuario"),s["\u0275\u0275elementEnd"]())}function ra(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",19),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().ValidateUser(t)}),s["\u0275\u0275text"](1," Validar "),s["\u0275\u0275elementEnd"]()}}function la(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275template"](1,ra,2,0,"button",17),s["\u0275\u0275elementStart"](2,"button",18),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().openDialog(t)}),s["\u0275\u0275text"](3,"Baja"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.user.Valid)}}function sa(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function ca(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}let ma=(()=>{class e{constructor(e,t,n){this.usuarioService=e,this.usaurioP=t,this.dialog=n,this.displayedColumns=["config","nameTras","positionTras","departmentTras","unitMedic","action"],this.unitMedic=JSON.parse(localStorage.getItem("unit")),console.log(this.unitMedic),this.userId=JSON.parse(localStorage.getItem("user")),this.consultUsers(this.userId.Usuario.Id),console.log(this.userId.Usuario.Id)}consultUsers(e){this.usuarioService.ConsultUsersByDepartment(this.unitMedic.id,e).subscribe(e=>{this.dataSource=new A.by(e.Data),console.log(e.Data)})}ngOnInit(){}ValidateUser(e){return Gn(this,void 0,void 0,function*(){const t={usuarioModificadoId:e.user.Id,usuarioModificanteId:this.userId.Id,tipoModificacionId:"61f1a754d7be0a2b052e887e"};p().fire({title:"Validaci\xf3n de usuario",html:`Estas validando que: <b>${e.user.Usuario.Persona.Nombre} ${e.user.Usuario.Persona.ApellidoPat}.</b><br>\n       Pertenece al departamento: <b>${e.user.PuestoOrganigrama.organigramaUnidad.departamento.Nombre}.</b><br>\n       Con el puesto: <b>${e.user.PuestoOrganigrama.catalogoPuesto.Puesto}.</b>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",reverseButtons:!0,confirmButtonText:"Si, validar"}).then(e=>{e.isConfirmed&&(this.example(),this.usaurioP.AddBitacoraUsuarioPuesto(t,"true").subscribe(e=>{this.consultUsers(this.userId.Usuario.Id),p().fire("Validado","Este usuario ha sido validado.","success")},e=>{""===e.error&&void 0===e.error||p().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})}))})})}example(){return Gn(this,void 0,void 0,function*(){console.log("nuevo swal");const{value:e}=yield p().fire({title:"Selecciona un rol",input:"select",allowOutsideClick:!1,inputOptions:{Fruits:{apples:"Apples",bananas:"Bananas",grapes:"Grapes",oranges:"Oranges"},Vegetables:{potato:"Potato",broccoli:"Broccoli",carrot:"Carrot"},icecream:"Ice cream"},inputPlaceholder:"Select a fruit",showCancelButton:!0,inputValidator:e=>new Promise(t=>{t("oranges"===e?"":"You need to select oranges :)")})});e&&p().fire(`You selected: ${e}`)})}openDialog(e){console.log(e),console.log(e.user.Usuario.Id,"weeeee"),this.dialog.open(Yn,{height:"auto",width:"55%",disableClose:!0}).afterClosed().subscribe(t=>{t&&this.usaurioP.UnsuscribeUsuarioPuesto({usuarioModificadoId:e.user.Id,usuarioModificanteId:this.userId.Id,tipoModificacionId:t.tipoModificacion.id,comentario:t.justificacion},e.user.Usuario.Id).subscribe(e=>{console.log(e.Data),p().fire("Correcto","Este usuario se ha dado de baja.","success"),this.consultUsers(this.userId.Usuario.Id)},e=>{if(""!==e.error||void 0!==e.error){const t=e.error;p().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!0})}})})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](b.i),s["\u0275\u0275directiveInject"](Un),s["\u0275\u0275directiveInject"](E.uw))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-transfer-manager"]],decls:29,vars:4,consts:[[1,"centerText","m-b-0"],[2,"color","#175d6b"],["class","centerText m-t-0 m-b-0","style","color: #175d6b",4,"ngIf"],[1,"responsive-table","mat-elevation-z8","customTable"],[3,"dataSource"],["matColumnDef","config"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nameTras"],["matColumnDef","positionTras"],["matColumnDef","departmentTras"],["matColumnDef","unitMedic"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"centerText","m-t-0","m-b-0",2,"color","#175d6b"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon","color","primary","matTooltip","Modificar permisos","matTooltipClass","example-tooltip-transfer",3,"routerLink","disabled"],["class","m-r-10","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",1,"m-r-10",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-card"),s["\u0275\u0275elementStart"](1,"h2",0),s["\u0275\u0275text"](2,"Configurar permisos para el modulo de "),s["\u0275\u0275elementStart"](3,"span",1),s["\u0275\u0275text"](4,"solicitudes de traslados"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,Hn,2,1,"h2",2),s["\u0275\u0275elementStart"](6,"mat-card-content"),s["\u0275\u0275elementStart"](7,"div",3),s["\u0275\u0275elementStart"](8,"mat-table",4),s["\u0275\u0275elementContainerStart"](9,5),s["\u0275\u0275template"](10,Wn,2,0,"mat-header-cell",6),s["\u0275\u0275template"](11,Xn,4,5,"mat-cell",7),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](12,8),s["\u0275\u0275template"](13,Zn,2,0,"mat-header-cell",6),s["\u0275\u0275template"](14,Kn,2,3,"mat-cell",7),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](15,9),s["\u0275\u0275template"](16,Jn,2,0,"mat-header-cell",6),s["\u0275\u0275template"](17,ea,2,1,"mat-cell",7),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](18,10),s["\u0275\u0275template"](19,ta,2,0,"mat-header-cell",6),s["\u0275\u0275template"](20,na,2,1,"mat-cell",7),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](21,11),s["\u0275\u0275template"](22,aa,2,0,"mat-header-cell",6),s["\u0275\u0275template"](23,oa,2,1,"mat-cell",7),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](24,12),s["\u0275\u0275template"](25,ia,2,0,"mat-header-cell",6),s["\u0275\u0275template"](26,la,4,1,"mat-cell",7),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](27,sa,1,0,"mat-header-row",13),s["\u0275\u0275template"](28,ca,1,0,"mat-row",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.unitMedic),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("dataSource",t.dataSource),s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[P.a8,a.O5,P.dn,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.ge,A.ev,M.lW,me.gM,i.rH,ee.Hw,A.XQ,A.Gk],styles:[".customTable .mat-header-cell{justify-content:center!important;font-weight:700;color:#fff!important;background-color:#1f594b;padding:0 0 0 5px!important;border-right-color:#fff!important;border-right-width:1px;border-right-style:solid;font-size:11pt}.customTable .mat-table .mat-column-config{flex:0 0 9%;justify-content:center!important;padding-left:0!important}.customTable .mat-table .mat-column-unitMedic{flex:0 0 13%;justify-content:center!important}.customTable .mat-table .mat-column-action{flex:0 0 16%;justify-content:center!important}.customTable .mat-table mat-header-row,.customTable .mat-table mat-row{padding-right:0;padding-left:0;border-bottom-color:#2f3d4a;border-top-color:#2f3d4a;border-left:1px solid #2f3d4a!important}.customTable .mat-table mat-cell{padding-left:5px!important;padding-right:0!important;border-right-color:#2f3d4a!important;border-right-width:1px;border-right-style:solid}.customTable .mat-row:nth-child(2n){background-color:#fff}.customTable .mat-row:nth-child(odd){background-color:#e2eade}.example-tooltip-transfer{background:#00aaa0}"],encapsulation:2}),e})(),da=(()=>{class e{constructor(e){this._router=e,this.permisos=[]}canActivate(){return this.havePermission()}havePermission(){return this.permisos=JSON.parse(localStorage.getItem("permisos")),0!==this.permisos.filter(e=>"Administrar Permisos"===e||"Firmas"===e).length}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](i.F0))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ua=(()=>{class e{constructor(e){this.httpClient=e}ConsultModules(e){const t=(new _n.LE).set("menuParent",e);return this.httpClient.get(`${zn.N.host}/menu/module`,{params:t}).pipe((0,Ln.U)(e=>e))}ConsultActionsByModule(e,t){const n=(new _n.LE).set("moduleId",e).set("userId",t);return this.httpClient.get(`${zn.N.host}/module/actions`,{params:n}).pipe((0,Ln.U)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](_n.eN))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function pa(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Funcion"),s["\u0275\u0275elementEnd"]())}function fa(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.action.name)}}function ha(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Descripcion"),s["\u0275\u0275elementEnd"]())}function xa(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.action.description)}}function ga(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Permiso"),s["\u0275\u0275elementEnd"]())}function va(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",15),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().changePermit(t)}),s["\u0275\u0275text"](1,"Activar "),s["\u0275\u0275elementEnd"]()}}function Sa(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"button",16),s["\u0275\u0275text"](1,"Desactivar "),s["\u0275\u0275elementEnd"]())}function ba(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275template"](1,va,2,0,"button",13),s["\u0275\u0275template"](2,Sa,2,0,"button",14),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.permit),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.permit)}}function Ca(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function Ea(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}let Fa=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.modulesService=n,this.displayedColumns=["name","description","edit"]}ngOnInit(){this.consultModules()}consultModules(){this.modulesService.ConsultActionsByModule(this.data.moduleId,this.data.user.Id).subscribe(e=>{this.dataSource=new A.by(e.Data),console.log(e.Data)})}onNoClick(){this.dialogRef.close()}changePermit(e){console.log(e);const t=!0!==e.permit?"Activar":"Desactivar",n=!0!==e.permit?"De activar el permiso de la funcion":"De desactivar el permiso de la funcion";p().fire({title:"\xbfEstas seguro?",text:n+": "+e.action.name,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, "+t,reverseButtons:!0,cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&p().fire("Deleted!","Your file has been deleted.","success")})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](E.so),s["\u0275\u0275directiveInject"](E.WI),s["\u0275\u0275directiveInject"](ua))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-permit-module"]],decls:22,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"responsive-table","mat-elevation-z8"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["matColumnDef","edit"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","",1,"endAlign"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h1",0),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"uppercase"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"div",2),s["\u0275\u0275elementStart"](5,"mat-table",3),s["\u0275\u0275elementContainerStart"](6,4),s["\u0275\u0275template"](7,pa,2,0,"mat-header-cell",5),s["\u0275\u0275template"](8,fa,2,1,"mat-cell",6),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](9,7),s["\u0275\u0275template"](10,ha,2,0,"mat-header-cell",5),s["\u0275\u0275template"](11,xa,2,1,"mat-cell",6),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](12,8),s["\u0275\u0275template"](13,ga,2,0,"mat-header-cell",5),s["\u0275\u0275template"](14,ba,3,2,"mat-cell",6),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](15,Ca,1,0,"mat-header-row",9),s["\u0275\u0275template"](16,Ea,1,0,"mat-row",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",11),s["\u0275\u0275elementStart"](18,"button",12),s["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),s["\u0275\u0275elementStart"](19,"mat-icon"),s["\u0275\u0275text"](20,"cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](21," Cancelar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Agregar permisos al apartado de ",s["\u0275\u0275pipeBind1"](2,4,t.data.nameModule),""),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("dataSource",t.dataSource),s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[E.uh,E.xY,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,E.H8,M.lW,ee.Hw,A.ge,A.ev,a.O5,A.XQ,A.Gk],pipes:[a.gd],styles:[".mat-table[_ngcontent-%COMP%]   .mat-column-add[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-all[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-delete[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-edit[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-view[_ngcontent-%COMP%]{justify-content:center!important}.mat-table[_ngcontent-%COMP%]   .mat-column-all[_ngcontent-%COMP%]{flex:0 0 8%}"]}),e})();var Ia=n(79572);function ya(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h2",19),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.unitMedic)}}function wa(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h3",20),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate3"]("",e.user.Usuario.Persona.Nombre," ",e.user.Usuario.Persona.ApellidoPat," ",e.user.Usuario.Persona.ApellidoMat,"")}}function Da(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Apartado"),s["\u0275\u0275elementEnd"]())}function Ma(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.modulo.name)}}function Va(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-header-cell"),s["\u0275\u0275text"](1,"Administrar"),s["\u0275\u0275elementEnd"]())}function Na(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-cell"),s["\u0275\u0275elementStart"](1,"button",21),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().addPermitModule(t.modulo.name,t.moduloId)}),s["\u0275\u0275elementStart"](2,"mat-icon"),s["\u0275\u0275text"](3,"manage_accounts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function ka(e,t){1&e&&s["\u0275\u0275element"](0,"mat-header-row")}function Oa(e,t){1&e&&s["\u0275\u0275element"](0,"mat-row")}const Pa=function(){return["/traslado/manager"]},Aa=[{path:"",children:[{path:"solicitud",component:qe,canActivate:[c]},{path:"realizadas",component:bt,canActivate:[c]},{path:"cancelar",component:sn,canActivate:[c]},{path:"firma",component:qn,canActivate:[da]},{path:"manager",component:ma,canActivate:[da]},{path:"permit/:id/:unitMedic",component:(()=>{class e{constructor(e,t,n,a){this.route=e,this.modulesService=t,this.dialog=n,this.usuarioService=a,this.unitMedic="",this.userId="",this.displayedColumns=["module","edit"]}ngOnInit(){this.route.params.subscribe(e=>{this.unitMedic=e.unitMedic,this.userId=e.id}),this.consultModules(),this.consultUser()}consultModules(){this.modulesService.ConsultModules("61366fb1d7be0a40b654873d").subscribe(e=>{this.dataSource=new A.by(e.Data),console.log(e.Data)})}consultUser(){this.usuarioService.ConsultUSerByPosition(this.userId).subscribe(e=>{this.user=e.Data,console.log(e.Data)})}addPermitModule(e,t){this.dialog.open(Fa,{height:"auto",width:"80%",disableClose:!0,data:{user:this.user,nameModule:e,moduleId:t}}).afterClosed().subscribe(e=>{console.log("The dialog was closed")})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.gz),s["\u0275\u0275directiveInject"](ua),s["\u0275\u0275directiveInject"](E.uw),s["\u0275\u0275directiveInject"](b.i))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-view-permit-by-user"]],decls:31,vars:7,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center"],["mat-card-avatar","","fxFlex.gt-sm","5","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",1,"m-l-10",3,"routerLink"],["aria-label","Example icon-button with a heart icon"],["fxFlex.gt-sm","95","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText","m-b-0"],[2,"color","#175d6b"],["class","centerText m-t-0 m-b-0","style","color: #175d6b",4,"ngIf"],["class","centerText m-t-0 m-b-0",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayout.xs","column"],["fxFlex.gt-sm","65","fxFlex.gt-xs","100","fxFlex","100",1,"text-center"],["fxFlex.gt-sm","40","fxFlex.gt-xs","100","fxFlex","100",1,"responsive-table","mat-elevation-z8"],[3,"dataSource"],["matColumnDef","module"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","edit"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"centerText","m-t-0","m-b-0",2,"color","#175d6b"],[1,"centerText","m-t-0","m-b-0"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon","color","primary",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-card"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"button",2),s["\u0275\u0275elementStart"](4,"mat-icon",3),s["\u0275\u0275text"](5,"keyboard_return"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](6," Regresar "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",4),s["\u0275\u0275elementStart"](8,"h2",5),s["\u0275\u0275text"](9,"Asignar o quitar permisos del modulo de "),s["\u0275\u0275elementStart"](10,"span",6),s["\u0275\u0275text"](11,"SOLICITUDES DE TRASLADOS"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,ya,2,1,"h2",7),s["\u0275\u0275template"](13,wa,2,3,"h3",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"mat-card-content"),s["\u0275\u0275elementStart"](15,"div",9),s["\u0275\u0275elementStart"](16,"div",10),s["\u0275\u0275elementStart"](17,"span"),s["\u0275\u0275text"](18,"Habilitar permiso de Capturista de vales de traslado"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"mat-slide-toggle"),s["\u0275\u0275text"](20,"Slide me!"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",11),s["\u0275\u0275elementStart"](22,"mat-table",12),s["\u0275\u0275elementContainerStart"](23,13),s["\u0275\u0275template"](24,Da,2,0,"mat-header-cell",14),s["\u0275\u0275template"](25,Ma,2,1,"mat-cell",15),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](26,16),s["\u0275\u0275template"](27,Va,2,0,"mat-header-cell",14),s["\u0275\u0275template"](28,Na,4,0,"mat-cell",15),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](29,ka,1,0,"mat-header-row",17),s["\u0275\u0275template"](30,Oa,1,0,"mat-row",18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction0"](6,Pa)),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("ngIf",t.unitMedic),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.user),s["\u0275\u0275advance"](9),s["\u0275\u0275property"]("dataSource",t.dataSource),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[P.a8,F.xw,F.Wh,P.kc,F.yH,M.lW,i.rH,ee.Hw,a.O5,P.dn,Ia.Rr,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.ge,A.ev,A.XQ,A.Gk],styles:[".mat-header-cell[_ngcontent-%COMP%]{justify-content:left!important;font-weight:700;font-size:11pt}.mat-table[_ngcontent-%COMP%]   .mat-column-edit[_ngcontent-%COMP%]{justify-content:center!important;flex:0 0 20%}.mat-table[_ngcontent-%COMP%]   .mat-column.module[_ngcontent-%COMP%]{justify-content:left!important}"]}),e})(),canActivate:[da]}],canActivate:[l.a]}];var Ba=n(77154),Ra=n(69387);let Ta=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[a.ez,i.Bz.forChild(Aa),Ba.o9,d.FormsModule,d.ReactiveFormsModule,r.m,o.q,Ue.Xd,Ra.Wx],i.Bz]}),e})()}}]);