!function(){function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=n(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(c)throw i}}}}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[892],{93892:function(n,a,r){"use strict";r.r(a),r.d(a,{TrasladoPacientesModule:function(){return ur}});var l=r(61116),c=r(47066),m=r(29996),s=r(75425),d=r(82573),u=r(35366),p=function(){var e=function(){function e(t){o(this,e),this._router=t,this.permisos=[]}return i(e,[{key:"canActivate",value:function(){return this.havePermission()}},{key:"havePermission",value:function(){return this.permisos=JSON.parse(localStorage.getItem("permisos")),0!==this.permisos.filter(function(e){return"Traslado de pacientes"===e}).length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](m.F0))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),f=r(48116),h=r(31041),v=r(22501),x=r.n(v),g=r(90911),b=r(87064),S=r(85031),C=r(29609),E=r(86350),y=r(37312),w=r(30990),I=r(92935),F=r(42693),k=r(529),D=r(79996),M=function(){var e=function(){function e(t){o(this,e),this.httpClient=t}return i(e,[{key:"ConsultarUltimoAcompaniante",value:function(e){var t=(new F.LE).set("unidadMedId",e);return this.httpClient.get("".concat(k.N.host,"/acompaniante"),{params:t}).pipe((0,D.U)(function(e){return e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](F.eN))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),P=r(35965),V=r(13070),N=r(13841),O=r(9550),_=r(84369);function A(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",21),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.id),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.justificacion," ")}}function B(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo numeros. "),u["\u0275\u0275elementEnd"]())}var R=function(){var e=function(){function e(t,n,a,r){o(this,e),this.dialogRef=t,this.fb=n,this.data=a,this.acompanianteService=r,this.justificaciones=[{id:"Paciente mayor que no puede valerse por s\xed mismo",justificacion:"Paciente mayor que no puede valerse por s\xed mismo"},{id:"Paciente con padecimientos neuropsiqui\xe1tricos",justificacion:"Paciente con padecimientos neuropsiqui\xe1tricos"},{id:"Paciente con padecimientos invalidantes",justificacion:"Paciente con padecimientos invalidantes"},{id:"Paciente con una urgencia m\xe9dica",justificacion:"Paciente con una urgencia m\xe9dica"},{id:"Paciente programado para cirug\xeda de alta especialidad",justificacion:"Paciente programado para cirug\xeda de alta especialidad"},{id:"Paciente con padecimientos que pongan en riesgo su vida",justificacion:"Paciente con padecimientos que pongan en riesgo su vida"},{id:"**No identificable en FTP-01**",justificacion:"**No identificable en FTP-01**"},{id:"Paciente menor de edad",justificacion:"Paciente menor de edad"}],console.log(a.edad)}return i(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({motivo:[null,h.Validators.compose([h.Validators.required])],justificacion:[null,h.Validators.compose([h.Validators.required])],nombreAutoriza:[null,h.Validators.compose([h.Validators.required])],cargo:[null,h.Validators.compose([])],matricula:[null,h.Validators.compose([h.Validators.pattern("^([0-9])*$")])]}),this.data.edad<16?(this.form.get("motivo").setValue("Paciente menor de edad"),this.justificaciones.shift()):this.data.edad>65?(this.form.get("motivo").setValue("Paciente mayor que no puede valerse por s\xed mismo"),this.justificaciones.pop()):(this.justificaciones.pop(),this.justificaciones.shift()),this.consultarAcompaniante()}},{key:"consultarAcompaniante",value:function(){var e=this;this.acompanianteService.ConsultarUltimoAcompaniante(this.data.unidadMed).subscribe(function(t){e.form.get("nombreAutoriza").setValue(t.Data.nombreAutoriza),e.form.get("cargo").setValue(t.Data.cargo),e.form.get("matricula").setValue(t.Data.matricula)})}},{key:"onNoClick",value:function(){this.dialogRef.close(!1)}},{key:"save",value:function(){this.datosAutorizacion=this.form.getRawValue(),this.dialogRef.close({autorizacion:this.datosAutorizacion})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.so),u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](I.WI),u["\u0275\u0275directiveInject"](M))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-autoriza-acomp"]],decls:42,vars:5,consts:[["mat-dialog-title","","align","center",1,"font-bold","m-0",2,"color","#003366"],["mat-dialog-content","",1,"quita"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["appearance","outline"],["formControlName","motivo"],["style","font-size: 13px",3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Escriba la justificacion","autocomplete","off","required","","formControlName","justificacion","maxlength","250"],["input",""],["align","end"],["matInput","","placeholder","Nombre","autocomplete","off","required","","formControlName","nombreAutoriza"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Cargo","autocomplete","off","formControlName","cargo"],["fxFlex.gt-sm","22","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Matricula","autocomplete","off","formControlName","matricula","maxlength","11"],[4,"ngIf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",1,"m-0","p-0"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[2,"font-size","13px",3,"value"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h1",0),u["\u0275\u0275text"](1,"Autorizacion de acompa\xf1ante"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](2,"div",1),u["\u0275\u0275elementStart"](3,"form",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"mat-form-field",5),u["\u0275\u0275elementStart"](7,"mat-label"),u["\u0275\u0275text"](8,"Selecciona el motivo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"mat-select",6),u["\u0275\u0275template"](10,A,2,2,"mat-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"div",4),u["\u0275\u0275elementStart"](12,"mat-form-field",5),u["\u0275\u0275elementStart"](13,"mat-label"),u["\u0275\u0275text"](14,"Justificacion o Diagnostico medico"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](15,"input",8,9),u["\u0275\u0275elementStart"](17,"mat-hint",10),u["\u0275\u0275text"](18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",4),u["\u0275\u0275elementStart"](20,"mat-form-field",5),u["\u0275\u0275elementStart"](21,"mat-label"),u["\u0275\u0275text"](22,"Nombre de quien autoriza"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](23,"input",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"div",12),u["\u0275\u0275elementStart"](25,"mat-form-field",5),u["\u0275\u0275elementStart"](26,"mat-label"),u["\u0275\u0275text"](27,"Cargo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](28,"input",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"div",14),u["\u0275\u0275elementStart"](30,"mat-form-field",5),u["\u0275\u0275elementStart"](31,"mat-label"),u["\u0275\u0275text"](32,"Matricula"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](33,"input",15),u["\u0275\u0275template"](34,B,2,0,"mat-error",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"div",17),u["\u0275\u0275elementStart"](36,"div",18),u["\u0275\u0275elementStart"](37,"button",19),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275text"](38,"Cancelar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"div",18),u["\u0275\u0275elementStart"](40,"button",20),u["\u0275\u0275listener"]("click",function(){return t.save()}),u["\u0275\u0275text"](41,"Aceptar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275reference"](16);u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngForOf",t.justificaciones),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate1"]("",(null==n.value?null:n.value.length)||0,"/250"),u["\u0275\u0275advance"](16),u["\u0275\u0275property"]("ngIf",t.form.controls.matricula.hasError("pattern")),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",t.form.invalid)}},directives:[I.uh,I.xY,h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,P.xw,P.Wh,P.yH,V.KE,V.hX,N.gD,h.NgControlStatus,h.FormControlName,l.sg,O.Nt,h.DefaultValueAccessor,h.RequiredValidator,h.MaxLengthValidator,V.bx,l.O5,I.H8,_.lW,b.ey,V.TO],styles:[".mat-radio-button[_ngcontent-%COMP%]{margin:0 12px}.quita[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),e}(),j=r(11659),T=r(22797),z=r(39199);function q(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-label",26),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.nota)}}function L(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Tipo"),u["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.tipo," ")}}function $(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1," Ida"),u["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.ida," ")}}function Y(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1," Regreso"),u["\u0275\u0275elementEnd"]())}function G(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.regreso," ")}}function W(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1," Boleto"),u["\u0275\u0275elementEnd"]())}function Q(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.tipoBoleto," ")}}function X(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1," Total"),u["\u0275\u0275elementEnd"]())}function J(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.total," ")}}function Z(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1," Observaciones"),u["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.observaciones," ")}}function ee(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function te(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}function ne(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",27),u["\u0275\u0275elementStart"](1,"button",28),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().Cerrar()}),u["\u0275\u0275text"](2," Cerrar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",27),u["\u0275\u0275elementStart"](1,"button",29),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().onNoClick()}),u["\u0275\u0275text"](2," Editar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}var oe=C,re=function(){var e=function(){function e(t,n,a){o(this,e),this.dialogRef=t,this.data=n,this._solicitud=a,this.acompaniante="",this.displayedColumns=["Tipo","Ida","Regreso","Boleto","Total","Observaciones"],this.solicitudRealizada=!0,this.nota="",this.solicitudValidada=!1,this.folioSolicitud="",this.dateCita=""}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.dateCita=oe(this.data.solicitud.fechaCita).format();var t=this.data.boletos.map(function(t){return{tipo:e.regresaTipo(t.Tipo),ida:e.regresaBoleano(t.Ida),regreso:e.regresaBoleano(t.Regreso),total:t.Total,tipoBoleto:e.regresaBoleto(t.TipoBoleto),observaciones:t.Observaciones}});this.datasource=t,this.acompaniante=!0===this.data.solicitud.acompa\u00f1ante?"Si":"No",this.data.edad<16&&1===this.data.boletos.length&&(this.nota="Un menor de edad no tiene permitido viajar sin acompa\xf1ante",this.solicitudValidada=!0),1===this.data.boletos.length&&3===this.data.boletos[0].Tipo&&(this.solicitudValidada=!1),0===this.data.boletos.length&&(this.solicitudValidada=!0)}},{key:"regresaBoleano",value:function(e){return e?"Si":" - "}},{key:"regresaBoleto",value:function(e){switch(e){case 0:return"Sin boleto";case 1:return"Entero";case 2:return"Medio"}}},{key:"regresaTipo",value:function(e){switch(e){case 1:case 2:return this.validaTipo();case 3:return"Acompa\xf1ante Adulto"}}},{key:"validaTipo",value:function(){return this.data.edad<18?"Paciente Ni\xf1o":"Paciente Adulto"}},{key:"realizarsolicitud",value:function(){var e=this,t=this.data.solicitud.fechaCita;this.datos={Solicitud:this.data.solicitud,Boletos:this.data.boletos,Acompaniante:this.data.autorizacion,AutorizacionesEspeciales:this.data.autorizacionEsp},console.log("final",this.datos),x().fire({title:"Confirmar",text:"Al enviar la solicitud, no podras editar nuevamente los datos. En caso de requerir cambios posteriores tendras que cancelar el folio",icon:"warning",showCancelButton:!0,confirmButtonColor:"#36b729",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Cancelar"}).then(function(n){n.value&&(delete e.datos.Solicitud.fechaCita,e._solicitud.RealizarSolicitud(e.datos,t,e.data.uiPrei,e.data.firms).subscribe(function(t){e.folioSolicitud=t.Data.folio,e.solicitudRealizada=!1,x().fire({position:"center",title:t.Mensaje,icon:"success",showConfirmButton:!0})},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({title:"Error al registrar la solictud",text:t.Mensaje,icon:"error"})}}))})}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"Cerrar",value:function(){this.dialogRef.close(!0)}},{key:"imprimirSolicitud",value:function(){this._solicitud.printDataOnly(this.folioSolicitud,"").subscribe(function(e){var t=URL.createObjectURL(e);window.open(t)},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}},{key:"imprimirSolicitudCompleta",value:function(){this._solicitud.printRequestComplete(this.folioSolicitud,"true","").subscribe(function(e){var t=URL.createObjectURL(e);window.open(t)},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.so),u["\u0275\u0275directiveInject"](I.WI),u["\u0275\u0275directiveInject"](j.O))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-vista-previa-solicitud"]],decls:83,vars:26,consts:[["mat-dialog-title","","align","center",1,"font-bold",2,"color","#003366"],["mat-dialog-content",""],["style","color: red",4,"ngIf"],[1,"p-0"],[1,"m-t-10","m-b-10"],["fxLayout","row wrap"],["fxFlex.gt-sm","48","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[1,"responsive-table","vistaPrevia"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Tipo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Ida"],["matColumnDef","Regreso"],["matColumnDef","Boleto"],["matColumnDef","Total"],["matColumnDef","Observaciones"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","space-evently center","align","center",1,"m-0","p-0"],["fxFlex.gt-sm","13","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxFlex.gt-sm","29","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100"],[2,"color","red"],["fxFlex.gt-sm","13","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","type","button","color","warn",3,"click"],["mat-stroked-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"h1",0),u["\u0275\u0275text"](1,"Vista previa solicitud de vale de traslado"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](2,"div",1),u["\u0275\u0275template"](3,q,2,1,"mat-label",2),u["\u0275\u0275elementStart"](4,"mat-card"),u["\u0275\u0275elementStart"](5,"mat-card-content",3),u["\u0275\u0275elementStart"](6,"h4",4),u["\u0275\u0275elementStart"](7,"strong"),u["\u0275\u0275text"](8,"Nombre Paciente: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",5),u["\u0275\u0275elementStart"](11,"div",6),u["\u0275\u0275elementStart"](12,"h4",4),u["\u0275\u0275elementStart"](13,"strong"),u["\u0275\u0275text"](14,"Folio FTP-01: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"h4",4),u["\u0275\u0275elementStart"](17,"strong"),u["\u0275\u0275text"](18,"Unidad Medica: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"h4",4),u["\u0275\u0275elementStart"](21,"strong"),u["\u0275\u0275text"](22,"Fecha de la Cita: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](23),u["\u0275\u0275pipe"](24,"date"),u["\u0275\u0275pipe"](25,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"h4",4),u["\u0275\u0275elementStart"](27,"strong"),u["\u0275\u0275text"](28,"Origen: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](30,"div",6),u["\u0275\u0275elementStart"](31,"h4",4),u["\u0275\u0275elementStart"](32,"strong"),u["\u0275\u0275text"](33,"N.S.S.: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](34),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"h4",4),u["\u0275\u0275elementStart"](36,"strong"),u["\u0275\u0275text"](37,"Contrato: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](38),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"h4",4),u["\u0275\u0275elementStart"](40,"strong"),u["\u0275\u0275text"](41,"Acompa\xf1ante: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](42),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](43,"h4",4),u["\u0275\u0275elementStart"](44,"strong"),u["\u0275\u0275text"](45,"Destino: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](46),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](47,"div",5),u["\u0275\u0275elementStart"](48,"div",7),u["\u0275\u0275elementStart"](49,"div",8),u["\u0275\u0275elementStart"](50,"mat-table",9),u["\u0275\u0275elementContainerStart"](51,10),u["\u0275\u0275template"](52,L,2,0,"mat-header-cell",11),u["\u0275\u0275template"](53,U,2,1,"mat-cell",12),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](54,13),u["\u0275\u0275template"](55,$,2,0,"mat-header-cell",11),u["\u0275\u0275template"](56,H,2,1,"mat-cell",12),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](57,14),u["\u0275\u0275template"](58,Y,2,0,"mat-header-cell",11),u["\u0275\u0275template"](59,G,2,1,"mat-cell",12),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](60,15),u["\u0275\u0275template"](61,W,2,0,"mat-header-cell",11),u["\u0275\u0275template"](62,Q,2,1,"mat-cell",12),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](63,16),u["\u0275\u0275template"](64,X,2,0,"mat-header-cell",11),u["\u0275\u0275template"](65,J,2,1,"mat-cell",12),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](66,17),u["\u0275\u0275template"](67,Z,2,0,"mat-header-cell",11),u["\u0275\u0275template"](68,K,2,1,"mat-cell",12),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](69,ee,1,0,"mat-header-row",18),u["\u0275\u0275template"](70,te,1,0,"mat-row",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](71,"div",20),u["\u0275\u0275template"](72,ne,3,0,"div",21),u["\u0275\u0275template"](73,ae,3,0,"div",21),u["\u0275\u0275elementStart"](74,"div",22),u["\u0275\u0275elementStart"](75,"button",23),u["\u0275\u0275listener"]("click",function(){return t.realizarsolicitud()}),u["\u0275\u0275text"](76,"Realizar Solicitud "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](77,"div",24),u["\u0275\u0275elementStart"](78,"button",23),u["\u0275\u0275listener"]("click",function(){return t.imprimirSolicitud()}),u["\u0275\u0275text"](79," Imprimir Solo Datos "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](80,"div",25),u["\u0275\u0275elementStart"](81,"button",23),u["\u0275\u0275listener"]("click",function(){return t.imprimirSolicitudCompleta()}),u["\u0275\u0275text"](82," Imprimir Solicitud Completa "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.solicitudValidada),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](t.data.solicitud.nombrePaciente),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](t.data.solicitud.ftp01),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](t.data.unidad),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",u["\u0275\u0275pipeBind2"](24,20,t.dateCita,"dd/MM/yyyy")," ",u["\u0275\u0275pipeBind2"](25,23,t.dateCita,"HH:mm"),""),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](t.data.solicitud.origen),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate2"]("",t.data.solicitud.nss,"\xa0-\xa0",t.data.solicitud.agregadoMedico,""),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](t.data.solicitud.contratoNumeroContrato),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](t.acompaniante),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](t.data.solicitud.destino),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("dataSource",t.datasource),u["\u0275\u0275advance"](19),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",!t.solicitudRealizada),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.solicitudRealizada),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",t.solicitudValidada||!t.solicitudRealizada),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("disabled",t.solicitudRealizada),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("disabled",t.solicitudRealizada))},directives:[I.uh,I.xY,l.O5,T.a8,T.dn,P.xw,P.yH,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,I.H8,P.Wh,_.lW,V.hX,z.ge,z.ev,z.XQ,z.Gk],pipes:[l.uU],styles:[".vistaPrevia[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-Tipo[_ngcontent-%COMP%]{flex:0 0 25%;justify-content:left!important}.vistaPrevia[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-Ida[_ngcontent-%COMP%], .vistaPrevia[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-Regreso[_ngcontent-%COMP%]{flex:0 0 10%;justify-content:center!important}.vistaPrevia[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-Boleto[_ngcontent-%COMP%], .vistaPrevia[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-Total[_ngcontent-%COMP%]{flex:0 0 15%;justify-content:center!important}.vistaPrevia[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-Observaciones[_ngcontent-%COMP%]{flex:0 0 25%}"]}),e}(),ie=r(77307),le=r(7436);function ce(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"button",14),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().eliminarExcepciones()}),u["\u0275\u0275elementStart"](2,"mat-icon",15),u["\u0275\u0275text"](3,"delete"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," Excepcion "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function me(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",16),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.value),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.motivo," ")}}function se(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",17),u["\u0275\u0275elementStart"](1,"mat-label"),u["\u0275\u0275text"](2,"\xbfQuien viajara?"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div"),u["\u0275\u0275elementStart"](4,"mat-radio-group",18),u["\u0275\u0275elementStart"](5,"mat-radio-button",19),u["\u0275\u0275text"](6,"Solo el paciente"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-radio-button",20),u["\u0275\u0275text"](8,"Solo el acompa\xf1ante"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("formControl",n.controlMedicamentos),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",n.mayorEdad)}}function de(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",17),u["\u0275\u0275elementStart"](1,"form",21),u["\u0275\u0275elementStart"](2,"mat-form-field",5),u["\u0275\u0275element"](3,"textarea",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",n.formAcompaniante)}}function ue(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",4),u["\u0275\u0275elementStart"](1,"mat-form-field",5),u["\u0275\u0275element"](2,"textarea",23),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("formControl",n.controlBoleto)}}var pe=function(){var e=function(){function e(t,n,a){o(this,e),this.dialogRef=t,this.data=n,this.fb=a,this.excep=[{value:"1",motivo:"Recoleccion de medicamentos"},{value:"2",motivo:"Acompa\xf1ante extra"},{value:"3",motivo:"Medio boleto para ni\xf1os menores de 5 a\xf1os"}],this.medicamentos=!1,this.acompaniante=!1,this.medioBoleto=!1,this.controlMedicamentos=new h.FormControl("",h.Validators.required),this.controlBoleto=new h.FormControl("",h.Validators.required),this.mayorEdad=!0,this.eliminar=!1,0!=n.tipoBoleto&&this.excep.pop()}return i(e,[{key:"ngOnInit",value:function(){this.formAcompaniante=this.fb.group({justificacion:[null,h.Validators.compose([h.Validators.required])]}),this.data.edad>=18&&(this.mayorEdad=!1),null==this.data.exepcion&&null==this.data.exepcion||(this.eliminar=!0)}},{key:"motivoSeleccionado",value:function(e){switch(this.medicamentos=!1,this.acompaniante=!1,this.medioBoleto=!1,this.controlBoleto.reset(),this.controlMedicamentos.reset(),this.formAcompaniante.reset(),parseInt(e,10)){case 1:this.medicamentos=!0;break;case 2:this.acompaniante=!0;break;case 3:this.medioBoleto=!0}}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"habilitarBoton",value:function(){return!(this.medicamentos||this.medioBoleto||this.acompaniante)||!(!this.controlMedicamentos.invalid||!this.medicamentos)||!(!this.controlBoleto.invalid||!this.medioBoleto)||!(!this.formAcompaniante.invalid||!this.acompaniante)||void 0}},{key:"eliminarExcepciones",value:function(){this.dialogRef.close({valor:"",exepcion:4})}},{key:"guardar",value:function(){this.medicamentos&&this.dialogRef.close({valor:this.controlMedicamentos.value,exepcion:1}),this.acompaniante&&this.dialogRef.close({valor:this.formAcompaniante.getRawValue(),exepcion:2}),this.medioBoleto&&this.dialogRef.close({valor:this.controlBoleto.value,exepcion:3})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.so),u["\u0275\u0275directiveInject"](I.WI),u["\u0275\u0275directiveInject"](h.FormBuilder))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-excepciones"]],decls:21,vars:6,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100"],["appearance","outline"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100","class","m-t-10 m-b-10",4,"ngIf"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",1,"m-0","p-0"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-icon-button","","color","warn",3,"click"],["aria-label","Example icon-button with a heart icon"],[3,"value"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100",1,"m-t-10","m-b-10"],["aria-label","Quien viajara",3,"formControl"],["value","1",3,"disabled"],["value","2"],[3,"formGroup"],["matInput","","placeholder","Justificacion","formControlName","justificacion",2,"height","100px"],["matInput","","placeholder","Justificacion",2,"height","100px",3,"formControl"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"h1",0),u["\u0275\u0275text"](1,"Autorizaciones especiales"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](2,ce,5,0,"div",1),u["\u0275\u0275elementStart"](3,"div",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"mat-form-field",5),u["\u0275\u0275elementStart"](7,"mat-label"),u["\u0275\u0275text"](8,"Tipo de autorizacion"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"mat-select",6),u["\u0275\u0275listener"]("selectionChange",function(e){return t.motivoSeleccionado(e.value)}),u["\u0275\u0275template"](10,me,2,2,"mat-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](11,se,9,2,"div",8),u["\u0275\u0275template"](12,de,4,1,"div",8),u["\u0275\u0275template"](13,ue,3,1,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",10),u["\u0275\u0275elementStart"](15,"div",11),u["\u0275\u0275elementStart"](16,"button",12),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275text"](17,"Cerrar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",11),u["\u0275\u0275elementStart"](19,"button",13),u["\u0275\u0275listener"]("click",function(){return t.guardar()}),u["\u0275\u0275text"](20,"Guardar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.eliminar),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.excep),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.medicamentos),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.acompaniante),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.medioBoleto),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",t.habilitarBoton()))},directives:[I.uh,l.O5,I.xY,P.xw,P.Wh,P.yH,V.KE,V.hX,N.gD,l.sg,I.H8,_.lW,ie.Hw,b.ey,le.VQ,h.NgControlStatus,h.FormControlDirective,le.U0,h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,O.Nt,h.DefaultValueAccessor,h.FormControlName],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}"]}),e}(),fe=r(30526),he=r(69024),ve=r(69387),xe=r(40994),ge=r(24311),be=["folionu"];function Se(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h4",20),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Presupuesto: ",u["\u0275\u0275pipeBind1"](2,1,n.budget),"")}}function Ce(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h4",20),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Devengo: ",u["\u0275\u0275pipeBind1"](2,1,n.earn),"")}}function Ee(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h4",21),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"currency"),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Disponible: ",u["\u0275\u0275pipeBind1"](2,1,n.available),"")}}function ye(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h5",22),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.unidadMedica.unidadMed.DenominacionUni)}}function we(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"button",24),u["\u0275\u0275elementStart"](2,"mat-icon",25),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().imprimirSoloPlantilla()}),u["\u0275\u0275text"](3,"picture_as_pdf "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Ie(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"button",24),u["\u0275\u0275elementStart"](2,"mat-icon",25),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().imprimirSoloPlantilla()}),u["\u0275\u0275text"](3,"cancel "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Fe(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-label",10),u["\u0275\u0275text"](1,"Datos del traslado"),u["\u0275\u0275elementEnd"]())}function ke(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo numeros. "),u["\u0275\u0275elementEnd"]())}function De(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",51),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.NumeroContrato),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.NumeroContrato," ")}}function Me(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1,"No existe un contrato vigente para la fecha de cita seleccionada "),u["\u0275\u0275elementEnd"]())}function Pe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",51),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.destino),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.destino," ")}}function Ve(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-hint"),u["\u0275\u0275text"](1,"(LUGAR DE CITA)"),u["\u0275\u0275elementEnd"]())}function Ne(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-hint"),u["\u0275\u0275text"](1,"(PROCEDENCIA)"),u["\u0275\u0275elementEnd"]())}function Oe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",51),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.origen),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.origen," ")}}function _e(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",26),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"mat-form-field",27),u["\u0275\u0275elementStart"](3,"mat-label"),u["\u0275\u0275text"](4,"Folio FTP-01"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"input",28,29),u["\u0275\u0275listener"]("keyup.enter",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().buscarFolio()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-hint",30),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,ke,2,0,"mat-error",31),u["\u0275\u0275elementStart"](10,"button",32),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().buscarFolio()}),u["\u0275\u0275elementStart"](11,"mat-icon",33),u["\u0275\u0275text"](12,"search"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",34),u["\u0275\u0275elementStart"](14,"mat-form-field",14),u["\u0275\u0275elementStart"](15,"mat-label"),u["\u0275\u0275text"](16,"Fecha de la cita"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"input",35),u["\u0275\u0275listener"]("dateChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().fechaCitaSeleccionada(e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](18,"mat-datepicker-toggle",36),u["\u0275\u0275element"](19,"mat-datepicker",37,38),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",39),u["\u0275\u0275elementStart"](22,"mat-form-field",14),u["\u0275\u0275elementStart"](23,"mat-label"),u["\u0275\u0275text"](24,"Numero Contrato"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"mat-select",40),u["\u0275\u0275listener"]("selectionChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().numeroContratoSeleccionado(e.value)}),u["\u0275\u0275template"](26,De,2,2,"mat-option",41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](27,Me,2,0,"mat-error",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",42),u["\u0275\u0275elementStart"](29,"div",1),u["\u0275\u0275elementStart"](30,"div",43),u["\u0275\u0275elementStart"](31,"mat-checkbox",44),u["\u0275\u0275text"](32,"Ida"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"div",45),u["\u0275\u0275elementStart"](34,"mat-checkbox",44),u["\u0275\u0275text"](35,"Regreso "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](36,"div",46),u["\u0275\u0275elementStart"](37,"mat-form-field",14),u["\u0275\u0275elementStart"](38,"mat-label"),u["\u0275\u0275text"](39,"Especialidad"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](40,"input",47),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](41,"div",42),u["\u0275\u0275elementStart"](42,"div",1),u["\u0275\u0275elementStart"](43,"mat-form-field",14),u["\u0275\u0275elementStart"](44,"mat-label"),u["\u0275\u0275text"](45,"Selecciona el destino"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](46,"mat-select",48),u["\u0275\u0275listener"]("selectionChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().consultOrigin(e.value)}),u["\u0275\u0275template"](47,Pe,2,2,"mat-option",41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](48,Ve,2,0,"mat-hint",31),u["\u0275\u0275template"](49,Ne,2,0,"mat-hint",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](50,"div",1),u["\u0275\u0275elementStart"](51,"mat-form-field",14),u["\u0275\u0275elementStart"](52,"mat-label"),u["\u0275\u0275text"](53,"Selecciona el origen"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](54,"mat-select",49),u["\u0275\u0275template"](55,Oe,2,2,"mat-option",41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](56,"div",1),u["\u0275\u0275elementStart"](57,"mat-form-field",14),u["\u0275\u0275elementStart"](58,"mat-label"),u["\u0275\u0275text"](59,"Representante Legal"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](60,"input",50),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](6),o=u["\u0275\u0275reference"](20),r=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate1"]("",(null==a.value?null:a.value.length)||0,"/10"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",r.formSolicitud.controls.ftp01.hasError("pattern")),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",r.formSolicitud.controls.ftp01.hasError("pattern")||r.formSolicitud.controls.ftp01.hasError("minLength")),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("matDatepicker",o)("min",r.today),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("for",o),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",r.contratos),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",0==r.contratos.length),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("checked",!0)("formControl",r.controlIda),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("checked",!0)("formControl",r.controlRegreso),u["\u0275\u0275advance"](13),u["\u0275\u0275property"]("ngForOf",r.destinos),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",r.controlRegreso.value&&r.controlIda.value||r.controlIda.value),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",r.controlRegreso.value&&!r.controlIda.value),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngForOf",r.origenes)}}function Ae(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-label",10),u["\u0275\u0275text"](1,"Datos del paciente"),u["\u0275\u0275elementEnd"]())}function Be(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1,"Formato incorrecto "),u["\u0275\u0275elementEnd"]())}function Re(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Error formato incorrecto "),u["\u0275\u0275elementEnd"]())}function je(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",26),u["\u0275\u0275elementStart"](1,"div",39),u["\u0275\u0275elementStart"](2,"mat-form-field",14),u["\u0275\u0275elementStart"](3,"mat-label"),u["\u0275\u0275text"](4,"Nombre del Paciente"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"input",52),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",53),u["\u0275\u0275elementStart"](7,"mat-form-field",14),u["\u0275\u0275elementStart"](8,"mat-label"),u["\u0275\u0275text"](9,"NSS"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](10,"input",54),u["\u0275\u0275template"](11,Be,2,0,"mat-error",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",53),u["\u0275\u0275elementStart"](13,"mat-form-field",14),u["\u0275\u0275elementStart"](14,"mat-label"),u["\u0275\u0275text"](15,"Agregado M\xe9dico"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](16,"input",55,56),u["\u0275\u0275elementStart"](18,"mat-hint",30),u["\u0275\u0275text"](19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](20,Re,2,0,"mat-error",31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275reference"](17),a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngIf",a.formSolicitud.controls.nss.hasError("pattern")&&a.formSolicitud.controls.nss.touched||a.formSolicitud.controls.nss.hasError("minLength")),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate1"]("",(null==n.value?null:n.value.length)||0,"/8"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",a.formSolicitud.controls.agregadoMedico.hasError("pattern")&&a.formSolicitud.controls.agregadoMedico.touched)}}function Te(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-label",10),u["\u0275\u0275text"](1,"Datos del boleto y acompa\xf1ante "),u["\u0275\u0275elementEnd"]())}function ze(e,t){1&e&&u["\u0275\u0275element"](0,"div",66)}function qe(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-form-field",69),u["\u0275\u0275elementStart"](1,"mat-label"),u["\u0275\u0275text"](2,"Selecciona fecha de nacimiento"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"input",70),u["\u0275\u0275listener"]("dateChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](3).fechaNacimientoSeleccionada(e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"mat-datepicker-toggle",36),u["\u0275\u0275element"](5,"mat-datepicker",71,38),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](6),o=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("matDatepicker",a)("min",o.startDate)("max",o.maxDate),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("for",a)}}function Le(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",66),u["\u0275\u0275elementStart"](1,"mat-label"),u["\u0275\u0275text"](2,"Datos nacimiento"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",67),u["\u0275\u0275template"](4,qe,7,4,"mat-form-field",68),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",n.preguntarFechaNac)}}function Ue(e,t){1&e&&u["\u0275\u0275element"](0,"div",72)}function $e(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",72),u["\u0275\u0275elementStart"](1,"mat-label"),u["\u0275\u0275text"](2,"Cuenta con tarjeta INAPAN"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div"),u["\u0275\u0275elementStart"](4,"mat-radio-group",73),u["\u0275\u0275listener"]("change",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).tarjetaInapan(e)}),u["\u0275\u0275elementStart"](5,"mat-radio-button",74),u["\u0275\u0275text"](6,"Si "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-radio-button",63),u["\u0275\u0275text"](8,"No"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("matTooltipDisabled",!a.pacienteInapan)}}function He(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",26),u["\u0275\u0275elementStart"](1,"div",57),u["\u0275\u0275elementStart"](2,"mat-label"),u["\u0275\u0275elementStart"](3,"strong"),u["\u0275\u0275text"](4,"Datos del paciente:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](6,ze,1,0,"div",58),u["\u0275\u0275template"](7,Le,5,1,"div",58),u["\u0275\u0275template"](8,Ue,1,0,"div",59),u["\u0275\u0275template"](9,$e,9,1,"div",59),u["\u0275\u0275elementStart"](10,"div",60),u["\u0275\u0275elementStart"](11,"mat-label"),u["\u0275\u0275text"](12,"Autorizar Acompa\xf1ante"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div"),u["\u0275\u0275elementStart"](14,"mat-radio-group",61),u["\u0275\u0275listener"]("change",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().valorAcompaniante(e)}),u["\u0275\u0275elementStart"](15,"mat-radio-button",62),u["\u0275\u0275text"](16,"Si"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"mat-radio-button",63),u["\u0275\u0275text"](18,"No"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",64),u["\u0275\u0275elementStart"](20,"button",65),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().abrirDialogExcepciones()}),u["\u0275\u0275text"](21," Excepciones "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate3"](" ",a.tipo_paciente," de ",a.edad," a\xf1os ",a.tipo_boleto," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.preguntarFechaNac),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",a.preguntarFechaNac),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.pacienteInapan),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",a.pacienteInapan),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("formControl",a.control_acompaniante),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",a.formSolicitud.invalid)}}function Ye(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",75),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.id),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.nombre," ")}}function Ge(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",75),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.id),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.nombre," ")}}function We(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",76),u["\u0275\u0275elementStart"](1,"button",77),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().vistaPreviaSolicitud()}),u["\u0275\u0275text"](2," Siguiente "),u["\u0275\u0275elementStart"](3,"mat-icon"),u["\u0275\u0275text"](4,"trending_flat"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",a.formSolicitud.invalid||a.controlVoBo.invalid||a.controlValidate.invalid||!a.controlIda.value&&!a.controlRegreso.value||!a.fechaNacimiento&&a.preguntarFechaNac)}}function Qe(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",78),u["\u0275\u0275elementStart"](1,"button",77),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().sendPrintTemplate()}),u["\u0275\u0275elementStart"](2,"mat-icon"),u["\u0275\u0275text"](3,"print"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," Imprimir Plantilla "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",a.controlVoBo.invalid||a.controlValidate.invalid)}}var Xe=C,Je=function(){var e=function(){function e(t,n,a,r,i,l,c,m,s){o(this,e),this._folioFtp=t,this.fb=n,this.adapter=a,this._contrato=r,this.patientTransfer=i,this.firmService=l,this._representante=c,this.dialog=m,this._solicitud=s,this.today=new Date,this.year=this.today.getFullYear(),this.tipo_paciente="",this.tipo_boleto="",this.fechaCita="",this.pasajeros=[],this.contratos=[],this.destinos=[],this.origenes=[],this.especialidad="",this.preguntarFechaNac=!1,this.acompaniante=!1,this.control_acompaniante=new h.FormControl,this.controlIda=new h.FormControl(!0),this.controlRegreso=new h.FormControl(!0),this.pacienteInapan=!1,this.tipoBoleto=2,this.observacionesAcompa="",this.observacionesPac="",this.acompanianteExtra=!1,this.recoleccionMed=0,this.imprimirPlantilla=!0,this.ValidarFirmas=!1,this.controlVoBo=new h.FormControl("",[h.Validators.required]),this.firmsVoBo=[],this.controlValidate=new h.FormControl("",[h.Validators.required]),this.firmsValidate=[],this.budget=0,this.earn=0,this.available=0,this.controlFechaCita=new h.FormControl,this.controlFechaNacimiento=new h.FormControl,this.autorizacionEspecial=!1,this.adapter.setLocale("es-mx"),this.today.setHours(0,0,0,0)}return i(e,[{key:"ngAfterViewInit",value:function(){this.input1.nativeElement.focus()}},{key:"ngOnInit",value:function(){var e=this;this.usuarioLog=(0,g.Z)(localStorage.getItem("token")),this.unidadMedica=JSON.parse(localStorage.getItem("unit")),this.formularioSolicitud(),this.formSolicitud.controls.ftp01.valueChanges.subscribe(function(t){""===t&&e.borrarDatos(),e.formSolicitud.controls.ftp01.valid&&10===t.length?e.formSolicitud.controls.fechaCita.enable():e.formSolicitud.controls.fechaCita.disable()}),this.formSolicitud.controls.unidadMedId.setValue(this.unidadMedica.unidadMedId),this.fetchFirms()}},{key:"buscarFolio",value:function(){var e=this,t=null!==this.formSolicitud.controls.ftp01.value?this.formSolicitud.controls.ftp01.value:"";this.borrarDatos(),t.length<10?x().fire({position:"center",title:"Formato de folio incorrecto",text:"Debe contener 10 numeros",icon:"warning",showConfirmButton:!0}):this._folioFtp.consultarFolioFtp(t).subscribe(function(t){e.folio=t.Data;var n=t.Data.fechaHora.split(" "),a=n[0].split("-"),o=n[1].split(":");e.fechaCitaMedica=new Date(a[0],a[1]-1,a[2],o[0],o[1]),e.fechaCitaMedica>=e.today?(e.asignarDatosFtp(),x().fire({position:"center",title:"Folio encontrado",icon:"success",showConfirmButton:!1,timer:900})):x().fire({position:"center",title:"El folio contiene una fecha de cita anterior al dia actual.",text:"\xbfDeseas continuar?",icon:"warning",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"}).then(function(t){t.isConfirmed&&x().fire({title:"Generar solicitud",inputLabel:"Se guardaran registros de estas solicitudes atipicas.",inputPlaceholder:"Ingresa el motivo.",input:"textarea",confirmButtonColor:"#3085d6",allowOutsideClick:!1,cancelButtonColor:"#d33",cancelButtonText:"Cancelar",showCancelButton:!0,confirmButtonText:"Continuar",preConfirm:function(t){t?t.length<20?x().showValidationMessage("Escribir minimo 20 caracteres."):(e.autorizacionEspecial=!0,e.autorizacionesEspeciales={justificacion:t,tipoAutorizacion:"Fecha de cita anterior"}):x().showValidationMessage("El motivo no puede ser vacio")}}).then(function(t){t.isConfirmed&&(x().fire("Validado","Tu solicitud ha sido aprobada, ahora genera tu Solicitud de traslado.","success"),e.today=e.fechaCitaMedica,e.asignarDatosFtp())})})},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;null!==t.Data?x().fire({position:"center",title:t.Mensaje,html:"Transporte: <b>"+t.Data.transporte+"</b>,<br>Importe emitido: $<b>"+t.Data.importe+"</b> <br>",icon:"error",showConfirmButton:!0}):x().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!0})}})}},{key:"asignarDatosFtp",value:function(){this.fechaCita=this.fechaCitaMedica.toISOString();var e=Xe(this.fechaCita).format("DD-MM-YYYY");this.validarFecha=Xe(e,"DD-MM-YYYY"),this.especialidad=this.folio.especialidad,this.formSolicitud.controls.fechaCita.enable(),this.formSolicitud.controls.fechaCita.setValue(this.fechaCitaMedica),this.formSolicitud.controls.ftp01.setValue(this.folio.folioTp),this.formSolicitud.controls.nombrePaciente.setValue(this.folio.paciente),this.formSolicitud.controls.nss.setValue(this.folio.nss),this.formSolicitud.controls.agregadoMedico.setValue(this.folio.agregado),this.formSolicitud.controls.especialidad.setValue(this.folio.especialidad),this.formSolicitud.controls.nombrePaciente.disable(),this.formSolicitud.controls.nss.disable(),this.formSolicitud.controls.agregadoMedico.disable(),this.formSolicitud.controls.usuarioId.setValue(this.usuarioLog.UsuarioId),this.anioNacimiento=parseInt(this.folio.agregado.slice(2,6)),this.controlValidate.setValue(this.firmsValidate[0].id),this.controlVoBo.setValue(this.firmsVoBo[0].id),this.consultarContratos(),this.validarEdad(this.anioNacimiento)}},{key:"fetchFirms",value:function(){var e=this;this.firmService.GetAllTypeFirms(this.unidadMedica.unidadMedId,"1","true").subscribe(function(t){e.firmsVoBo=t.Data},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!0})}}),this.firmService.GetAllTypeFirms(this.unidadMedica.unidadMedId,"2","true").subscribe(function(t){e.firmsValidate=t.Data},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!0})}})}},{key:"formularioSolicitud",value:function(){this.formSolicitud=this.fb.group({especialidad:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],representanteLegal:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],nombrePaciente:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],nss:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required,h.Validators.pattern("^([0-9])*$"),h.Validators.minLength(10)])],agregadoMedico:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required,h.Validators.pattern("^[1-6]{1}[mfMF]{1}[0-9]{4}(([oO]{1}[rR]{1})|([eE]{1}[tT]{1})|([eE]{1}[cC]{1})|([sS]{1}[aA]{1})|([eE]{1}[sS]{1})|([sS]{1}[fF]{1})|([pP]{1}[eE]{1})|([nN]{1}[dD]{1}))")])],fechaCita:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],origen:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],destino:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],"acompa\xf1ante":[null,h.Validators.compose([h.Validators.required])],ftp01:[null,h.Validators.compose([h.Validators.required,h.Validators.maxLength(10),h.Validators.minLength(10),h.Validators.pattern("^([0-9])*$")])],contratoNumeroContrato:[{value:"",disabled:!0},h.Validators.compose([h.Validators.required])],unidadMedId:[null,h.Validators.compose([h.Validators.required])],usuarioId:[null,h.Validators.compose([h.Validators.required])]})}},{key:"validarEdad",value:function(e){this.preguntarFechaNac=!1,this.pacienteInapan=!1,this.edad=this.validarFecha.year()-e,this.tipo_paciente="Ni\xf1o",this.tipoBoleto=2,this.edad<5&&(this.tipo_boleto="Sin boleto",this.tipoBoleto=0),5===this.edad&&(this.preguntarFechaNac=!0,this.asignarFechas()),this.edad>5&&this.edad<13&&(this.tipo_boleto=" con Medio boleto",this.tipoBoleto=2),13===this.edad&&(this.preguntarFechaNac=!0,this.asignarFechas()),this.edad>13&&(this.tipo_boleto="con Boleto Entero",this.tipoBoleto=1),16===this.edad&&(this.preguntarFechaNac=!0,this.asignarFechas()),this.edad>17&&(this.tipo_paciente="Adulto"),this.edad>=60&&(this.pacienteInapan=!0)}},{key:"asignarFechas",value:function(){this.startDate=new Date(this.anioNacimiento,0,1),this.maxDate=new Date(this.anioNacimiento,11,31)}},{key:"valorAcompaniante",value:function(e){var t=this;"si"===e.value?this.dialog.open(R,{height:"auto",width:"45%",disableClose:!0,data:{edad:this.edad,unidadMed:this.unidadMedica.unidadMed.Id}}).afterClosed().subscribe(function(e){!1===e?(t.control_acompaniante.setValue("no"),t.formSolicitud.controls["acompa\xf1ante"].setValue(!1)):(t.formSolicitud.controls["acompa\xf1ante"].setValue(!0),t.autorizacionAcompaniante=e.autorizacion)}):this.formSolicitud.controls["acompa\xf1ante"].setValue(!1)}},{key:"fechaNacimientoSeleccionada",value:function(e){this.fechaNacimiento=new Date(e.value._i.year,e.value._i.month,e.value._i.date),this.validarFechaCitaFechaNac()}},{key:"validarFechaCitaFechaNac",value:function(){this.edad=this.validarFecha.year()-this.anioNacimiento;var e=this.fechaCitaMedica.getMonth(),t=this.fechaNacimiento.getMonth(),n=this.fechaCitaMedica.getDate(),a=this.fechaNacimiento.getDate();this.tipo_paciente=this.edad>18?"Adulto":"Ni\xf1o",t<e?this.diferenciaMenorCero(this.edad):t>e||a>n?this.diferenciaMayorCero(this.edad):this.diferenciaMenorCero(this.edad)}},{key:"diferenciaMenorCero",value:function(e){switch(e){case 5:this.tipo_boleto="Medio Boleto",this.tipoBoleto=2;break;case 13:this.tipo_boleto="Boleto Entero",this.tipoBoleto=1;break;case 16:this.acompaniante=!0,this.control_acompaniante.setValue("")}}},{key:"diferenciaMayorCero",value:function(e){switch(e){case 5:this.tipo_boleto="Sin Boleto",this.tipoBoleto=0,this.edad=this.edad-1;break;case 13:this.tipo_boleto="Medio Boleto",this.edad=this.edad-1,this.tipoBoleto=2;break;case 16:this.edad=this.edad-1,this.acompaniante=!0}}},{key:"tarjetaInapan",value:function(e){"si"===e.value?(this.tipo_boleto="Medio Boleto INAPAN",this.observacionesPac="Credencial INAPAN",this.tipoBoleto=2):(this.tipo_boleto="Boleto Entero",this.observacionesPac="",this.tipoBoleto=1)}},{key:"fechaCitaSeleccionada",value:function(e){this.fechaCita=e.value.format(),this.formSolicitud.controls.fechaCita.setValue(e.value._d);var t=Xe(this.fechaCita).format("DD-MM-YYYY");this.validarFecha=Xe(t,"DD-MM-YYYY"),this.fechaCitaMedica=new Date(e.value._i.year,e.value._i.month,e.value._i.date),this.consultarContratos(),this.validarEdad(this.anioNacimiento)}},{key:"numeroContratoSeleccionado",value:function(e){var t=this;this.consultDestination(e),this._representante.ConsultaRepresentante(e).subscribe(function(e){null!==e.Data&&(t.formSolicitud.controls.representanteLegal.setValue(e.Data.NombreCompleto),t.formSolicitud.controls.representanteLegal.disable())},function(e){""===e.error&&void 0===e.error||(t.formSolicitud.controls.representanteLegal.setValue(""),t.formSolicitud.controls.representanteLegal.enable())})}},{key:"consultarContratos",value:function(){var e=this;this._contrato.ConsultarContratoTraslado(this.unidadMedica.unidadMedId,this.fechaCita).subscribe(function(t){null!==t.Data?(e.contratos=t.Data,e.formSolicitud.controls.contratoNumeroContrato.enable()):(e.contratos=[],e.formSolicitud.controls.contratoNumeroContrato.disable(),x().fire({icon:"error",title:"Sin Contrato vigente",text:"No hay un contrato vigente para la fecha de cita seleccionada, comunicalo con el jefe inmediato."}))})}},{key:"consultDestination",value:function(e){var t=this;this.patientTransfer.ConsultarDestinos(e,this.unidadMedica.unidadMedId).subscribe(function(n){t.consultBudget(e,t.unidadMedica.unidadMedId),t.destinos=n.Data,t.formSolicitud.controls.destino.enable(),t.consultEarn("true",e,t.unidadMedica.unidadMedId)})}},{key:"consultOrigin",value:function(e){var t=this;this.patientTransfer.ConsultarOrigenes(this.formSolicitud.controls.contratoNumeroContrato.value,this.unidadMedica.unidadMedId,e).subscribe(function(e){t.origenes=e.Data,t.formSolicitud.controls.origen.enable(),t.formSolicitud.controls.origen.setValue(t.origenes[0].origen)})}},{key:"consultBudget",value:function(e,t){var n=this;this.patientTransfer.ConsultBudget(e,t).subscribe(function(e){n.budget=e.Data})}},{key:"consultEarn",value:function(e,t,n){var a=this;this.patientTransfer.ConsultEarn(e,t,n).subscribe(function(e){a.earn=e.Data,a.available=a.budget-e.Data})}},{key:"borrarDatos",value:function(){var e=this.formSolicitud.controls.unidadMedId.value;this.formSolicitud.reset(),this.formSolicitud.markAsUntouched(),this.especialidad="",this.observacionesAcompa="",this.tipoBoleto=2,this.observacionesPac="",this.controlVoBo.reset(),this.controlValidate.reset(),this.controlIda.setValue(!0),this.controlRegreso.setValue(!0),this.tipo_boleto="",this.tipo_paciente="",this.control_acompaniante.setValue(""),this.formSolicitud.controls.unidadMedId.setValue(e),this.autorizacionesEspeciales={justificacion:"",tipoAutorizacion:""}}},{key:"vistaPreviaSolicitud",value:function(){var e=this;this.solicitudTraslado=this.formSolicitud.getRawValue(),this.solicitudTraslado.fechaCita=this.fechaCita;var t=0;this.controlIda.value&&(t+=1),this.controlRegreso.value&&(t+=1),0===this.tipoBoleto&&2!=this.recoleccionMed&&this.agregarPasajero({Tipo:1,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:0,TipoBoleto:this.tipoBoleto,Observaciones:"Ni\xf1o con "+this.edad+" a\xf1os."+this.observacionesPac}),2===this.tipoBoleto&&this.edad<13?2!=this.recoleccionMed&&this.agregarPasajero({Tipo:1,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:t,TipoBoleto:this.tipoBoleto,Observaciones:"Ni\xf1o con "+this.edad+" a\xf1os. "+this.observacionesPac}):2===this.tipoBoleto&&2!=this.recoleccionMed&&this.agregarPasajero({Tipo:2,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:t,TipoBoleto:this.tipoBoleto,Observaciones:this.observacionesPac}),1===this.tipoBoleto&&this.edad<18?2!=this.recoleccionMed&&this.agregarPasajero({Tipo:2,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:t,TipoBoleto:this.tipoBoleto,Observaciones:"Ni\xf1o con "+this.edad+" a\xf1os. "+this.observacionesPac}):1===this.tipoBoleto&&2!=this.recoleccionMed&&this.agregarPasajero({Tipo:2,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:t,TipoBoleto:this.tipoBoleto,Observaciones:this.observacionesPac}),!0===this.formSolicitud.controls["acompa\xf1ante"].value&&1!=this.recoleccionMed&&this.agregarPasajero({Tipo:3,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:t,TipoBoleto:1,Observaciones:this.observacionesAcompa}),this.acompanianteExtra&&this.agregarPasajero({Tipo:3,Ida:this.controlIda.value,Regreso:this.controlRegreso.value,Total:t,TipoBoleto:1,Observaciones:"Acompa\xf1ante extra "}),this.dialog.open(re,{height:"auto",width:"80%",data:{solicitud:this.solicitudTraslado,boletos:this.pasajeros,unidad:this.unidadMedica.unidadMed.DenominacionUni,edad:this.edad,uiPrei:this.unidadMedica.unidadMed.UiPrei,autorizacion:this.autorizacionAcompaniante,firms:this.controlVoBo.value+","+this.controlValidate.value,autorizacionEsp:this.autorizacionesEspeciales},disableClose:!0}).afterClosed().subscribe(function(t){e.pasajeros=[],t&&(e.borrarDatos(),e.borrarExepciones(),e.input1.nativeElement.focus())})}},{key:"agregarPasajero",value:function(e){this.pasajeros.push(e)}},{key:"abrirDialogExcepciones",value:function(){var e=this;this.dialog.open(pe,{height:"auto",width:"40%",disableClose:!0,data:{tipoBoleto:this.tipoBoleto,edad:this.edad,exepcion:this.exepcion}}).afterClosed().subscribe(function(t){if(t){e.exepcion=t.exepcion,console.log(t);var n="";switch(t.exepcion){case 1:"1"===t.valor?(e.recoleccionMed=1,e.observacionesPac+=" Recoleccion de medicamentos. ",n="Recoleccion de medicamentos, viaja el paciente"):(e.recoleccionMed=2,n="Recoleccion de medicamentos, viaja el acompa\xf1ante",e.observacionesAcompa+=" Recoleccion de medicamentos. "),e.autorizacionesEspeciales={justificacion:n,tipoAutorizacion:"Recoleccion de medicamentos"};break;case 2:e.acompanianteExtra=!0,e.autorizacionesEspeciales={justificacion:t.valor.justificacion,tipoAutorizacion:"Acompa\xf1ante extra"};break;case 3:e.tipoBoleto=2,e.tipo_boleto=" con Medio boleto",e.autorizacionesEspeciales={justificacion:t.valor,tipoAutorizacion:"Medio boleto para ni\xf1os menores de 5 a\xf1os"},e.observacionesPac=" Autorizacion de medio boleto.";break;case 4:e.exepcion=void 0,e.borrarExepciones()}}})}},{key:"borrarExepciones",value:function(){this.preguntarFechaNac&&this.validarFechaCitaFechaNac(),"Medio Boleto INAPAN"!==this.tipo_boleto&&this.validarEdad(this.anioNacimiento),this.acompanianteExtra=!1,this.observacionesPac="",this.recoleccionMed=0,this.observacionesAcompa="",this.autorizacionesEspeciales={justificacion:"",tipoAutorizacion:""}}},{key:"imprimirSoloPlantilla",value:function(){this.imprimirPlantilla=!this.imprimirPlantilla,this.controlVoBo.reset(),this.controlValidate.reset()}},{key:"sendPrintTemplate",value:function(){this._solicitud.PrintTemplate(this.unidadMedica.unidadMedId,this.controlVoBo.value,this.controlValidate.value).subscribe(function(e){var t=URL.createObjectURL(e);window.open(t)},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](f.k),u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](b._A),u["\u0275\u0275directiveInject"](E.d),u["\u0275\u0275directiveInject"](y.o),u["\u0275\u0275directiveInject"](fe.K),u["\u0275\u0275directiveInject"](w.i),u["\u0275\u0275directiveInject"](I.uw),u["\u0275\u0275directiveInject"](j.O))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitud-traslado"]],viewQuery:function(e,t){var n;(1&e&&u["\u0275\u0275viewQuery"](be,5,u.ElementRef),2&e)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.input1=n.first))},features:[u["\u0275\u0275ProvidersFeature"]([{provide:b.Ad,useValue:"en-GB"},{provide:b._A,useClass:S.t7,deps:[b.Ad]},{provide:b.sG,useValue:S.$o}])],decls:43,vars:19,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["class","m-0",4,"ngIf"],["class","m-0 colorAvailable",4,"ngIf"],["align","center",1,"font-bold",2,"color","#003366","align-items","center!important"],["class","m-0 font-bold text-info","align","center",4,"ngIf"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],[3,"formGroup"],["style","color: #003366","class","font-bold",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center","class","p-t-20 p-r-20 p-l-20 b-all m-t-5 m-b-15","style","border-color: #a2a2a2",4,"ngIf"],[1,"font-bold",2,"color","#003366"],["fxLayout","row wrap","fxLayoutAlign","space-between center","align","end",1,"p-t-20","p-r-20","p-l-20","b-all","m-t-5",2,"border-color","#a2a2a2"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100",1,"centerText"],[1,"font-bold",2,"margin-right","15px"],["appearance","outline"],["required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","end center","align","end"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100","class","m-r-15",4,"ngIf"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100","class","m-r-15",4,"ngIf"],[1,"m-0"],[1,"m-0","colorAvailable"],["align","center",1,"m-0","font-bold","text-info"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-icon-button","",2,"margin-right","18px","font-size","25pt","color","#d60017"],["aria-label","Example",2,"font-size","25pt",3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"p-t-20","p-r-20","p-l-20","b-all","m-t-5","m-b-15",2,"border-color","#a2a2a2"],["appearance","outline","hintLabel","Maximo 10 numeros"],["matInput","","autocomplete","off","required","","formControlName","ftp01","maxlength","10","cdkFocusInitial","","id","folionu",3,"keyup.enter"],["folionu",""],["align","end"],[4,"ngIf"],["matSuffix","","mat-icon-button","","color","primary","type","button",3,"disabled","click"],["aria-label","Selecciona"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","DD/MM/AAAA","autocomplete","off","formControlName","fechaCita",3,"matDatepicker","min","dateChange"],["matSuffix","",3,"for"],["touchUi","","color","primary"],["picker",""],["fxFlex.gt-sm","40","fxFlex.gt-xs","100","fxFlex","100"],["formControlName","contratoNumeroContrato",3,"selectionChange"],["style","font-size: 14px",3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between center","fxFlex","100"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100",1,"p-r-20"],["color","primary","required","",3,"checked","formControl"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","60","fxFlex.gt-xs","100","fxFlex","100",1,"m-l-30"],["matInput","","autocomplete","off","required","","formControlName","especialidad"],["formControlName","destino",3,"selectionChange"],["formControlName","origen"],["matInput","","autocomplete","off","required","","formControlName","representanteLegal"],[2,"font-size","14px",3,"value"],["matInput","","autocomplete","off","required","","formControlName","nombrePaciente"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","autocomplete","off","required","","formControlName","nss","maxlength","11"],["matInput","","autocomplete","off","required","","formControlName","agregadoMedico","maxlength","8"],["agregado",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"b-b","m-b-10"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","22","fxFlex.gt-xs","100","fxFlex","100","class","m-b-10","align","center",4,"ngIf"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100","align","center",1,"m-b-10"],[3,"formControl","change"],["value","si"],["value","no"],["fxFlex.gt-sm","15","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"disabled","click"],["fxFlex.gt-sm","33","fxFlex.gt-xs","100","fxFlex","100"],["fxLayout","row wrap","fxLayoutAlign","space-evenly center"],["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","required","",3,"matDatepicker","min","max","dateChange"],["startView","year"],["fxFlex.gt-sm","22","fxFlex.gt-xs","100","fxFlex","100","align","center",1,"m-b-10"],[3,"change"],["value","si","matTooltip","Validar que cuente con su Tarjeta Vigente de INAPAN y solicitarle presentarla.","matTooltipClass","example-tooltip-red","matTooltipShowDelay","0","aria-label","Button that shows a red tooltip","matTooltipHideDelay","2500",3,"matTooltipDisabled"],[3,"value"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100",1,"m-r-15"],["mat-flat-button","","type","button","color","primary",3,"disabled","click"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100",1,"m-r-15"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-content"),u["\u0275\u0275elementStart"](2,"div",0),u["\u0275\u0275elementStart"](3,"div",1),u["\u0275\u0275template"](4,Se,3,3,"h4",2),u["\u0275\u0275template"](5,Ce,3,3,"h4",2),u["\u0275\u0275template"](6,Ee,3,3,"h4",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",1),u["\u0275\u0275elementStart"](8,"mat-card-title",4),u["\u0275\u0275text"](9," Solicitud de Traslado de Pacientes "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](10,ye,2,1,"h5",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](11,we,4,0,"div",6),u["\u0275\u0275template"](12,Ie,4,0,"div",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"form",7),u["\u0275\u0275template"](14,Fe,2,0,"mat-label",8),u["\u0275\u0275template"](15,_e,61,16,"div",9),u["\u0275\u0275template"](16,Ae,2,0,"mat-label",8),u["\u0275\u0275template"](17,je,21,3,"div",9),u["\u0275\u0275template"](18,Te,2,0,"mat-label",8),u["\u0275\u0275template"](19,He,22,9,"div",9),u["\u0275\u0275elementStart"](20,"mat-label",10),u["\u0275\u0275text"](21,"Datos de las firmas"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"div",11),u["\u0275\u0275elementStart"](23,"div",12),u["\u0275\u0275elementStart"](24,"mat-label",13),u["\u0275\u0275text"](25,"Vo. Bo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"mat-form-field",14),u["\u0275\u0275elementStart"](27,"mat-label"),u["\u0275\u0275text"](28,"Selecciona la firma"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"mat-select",15),u["\u0275\u0275template"](30,Ye,2,2,"mat-option",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"div",12),u["\u0275\u0275elementStart"](32,"mat-label",13),u["\u0275\u0275text"](33,"Autoriza"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"mat-form-field",14),u["\u0275\u0275elementStart"](35,"mat-label"),u["\u0275\u0275text"](36,"Selecciona la firma"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"mat-select",15),u["\u0275\u0275template"](38,Ge,2,2,"mat-option",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"mat-card-actions"),u["\u0275\u0275elementStart"](40,"div",17),u["\u0275\u0275template"](41,We,5,1,"div",18),u["\u0275\u0275template"](42,Qe,5,1,"div",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",t.budget),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.earn),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.available),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",t.unidadMedica),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",t.formSolicitud),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.formSolicitud.controls.agregadoMedico.value&&t.formSolicitud.controls.fechaCita.value&&t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.formSolicitud.controls.agregadoMedico.value&&t.formSolicitud.controls.fechaCita.value&&t.imprimirPlantilla),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("formControl",t.controlVoBo),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.firmsVoBo),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("formControl",t.controlValidate),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.firmsValidate),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.imprimirPlantilla),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.imprimirPlantilla))},directives:[T.a8,T.dn,P.xw,P.Wh,P.yH,l.O5,T.n5,h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,V.hX,V.KE,N.gD,h.RequiredValidator,h.NgControlStatus,h.FormControlDirective,l.sg,T.hq,_.lW,ie.Hw,O.Nt,h.DefaultValueAccessor,h.FormControlName,h.MaxLengthValidator,V.bx,V.R9,he.hl,ve.qQ,he.nW,he.Mq,xe.oG,xe.e_,V.TO,b.ey,le.VQ,le.U0,ge.gM],pipes:[l.H9],styles:[".mat-radio-button{margin:0 12px}.example-tooltip-red{background:#de8500}.example-tooltip-firma,.example-tooltip-red{font-size:11pt;font-weight:700;font-family:Montserrat Light,serif}.example-tooltip-firma{background:#f15333}.mat-he{text-align:left!important}.colorAvailable{color:#1976d2}"],encapsulation:2}),e}(),Ze=r(5609),Ke=r(66102),et=r(34546),tt=r(98418),nt=r(60126),at=r(95522),ot=r(27701),rt=r(97070),it=["sidenav"];function lt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",57),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n," ")}}function ct(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",57),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n," ")}}function mt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",57),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.NumeroContrato),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.NumeroContrato," ")}}function st(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",58),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](),u["\u0275\u0275reference"](2).open()}),u["\u0275\u0275elementStart"](1,"mat-icon",25),u["\u0275\u0275text"](2,"arrow_back_ios"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function dt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",58),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](),u["\u0275\u0275reference"](2).close()}),u["\u0275\u0275elementStart"](1,"mat-icon",25),u["\u0275\u0275text"](2,"arrow_forward_ios"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function ut(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h5",59),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.unitMedic.unidadMed.DenominacionUni)}}function pt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",60),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().resetFilterDates()}),u["\u0275\u0275elementStart"](1,"mat-icon"),u["\u0275\u0275text"](2,"cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function ft(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-chip",61),u["\u0275\u0275listener"]("removed",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().removeChips(e)}),u["\u0275\u0275text"](1),u["\u0275\u0275elementStart"](2,"mat-icon",62),u["\u0275\u0275text"](3,"cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("",a.filter," ")}}function ht(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Folio"),u["\u0275\u0275elementEnd"]())}function vt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.folio," ")}}function xt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Elaboracion"),u["\u0275\u0275elementEnd"]())}function gt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",a.formatExpeditionDate(n.fechaExpedicion)," ")}}function bt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"FTP01"),u["\u0275\u0275elementEnd"]())}function St(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.ftp01,"")}}function Ct(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Origen"),u["\u0275\u0275elementEnd"]())}function Et(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.origen," ")}}function yt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Destino"),u["\u0275\u0275elementEnd"]())}function wt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.destino," ")}}function It(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Nombre Paciente"),u["\u0275\u0275elementEnd"]())}function Ft(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.nombrePaciente," ")}}function kt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Fecha de Cita"),u["\u0275\u0275elementEnd"]())}function Dt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",a.formatDate(n.fechaCita)," ")}}function Mt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"PDF"),u["\u0275\u0275elementEnd"]())}function Pt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",63),u["\u0275\u0275elementStart"](2,"mat-icon",25),u["\u0275\u0275text"](3,"picture_as_pdf"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"mat-menu",null,64),u["\u0275\u0275elementStart"](6,"button",65),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().getPDF(e.folio)}),u["\u0275\u0275elementStart"](7,"mat-icon"),u["\u0275\u0275text"](8,"article"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"span"),u["\u0275\u0275text"](10,"Completo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"button",65),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().imprimirSoloDatos(e.folio)}),u["\u0275\u0275elementStart"](12,"mat-icon"),u["\u0275\u0275text"](13,"list"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"span"),u["\u0275\u0275text"](15,"Solo datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](5);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matMenuTriggerFor",a)}}function Vt(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function Nt(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}var Ot=C,_t=function(){var e=function(){function e(t,n,a,r,i,l){var c=this;o(this,e),this.userService=t,this.transferRequestService=a,this.adapter=i,this.contractService=l,this.config={},this.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"],this.pageSize=20,this.pageSizeOptions=[20,50,100],this.length=0,this.pageIndex=1,this.loadingData=!1,this.searchInputControl=new h.FormControl,this.filters=[],this.controlCompanion=new h.FormControl,this.controlDestination=new h.FormControl,this.controlOrigin=new h.FormControl,this.controlNumberContract=new h.FormControl,this.origins=[],this.destinations=[],this.withCompanion=!0,this.unaccompanied=!0,this.unitMedicalId="",this.filterNumberContract="",this.dateStart="",this.dateEnd="",this.adapter.setLocale("es-mx"),n.observe(["(max-width: 600px)"]).subscribe(function(e){c.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"]}),this.userToken=(0,g.Z)(localStorage.getItem("token")),this.range=r.group({start:new h.FormControl(null),end:new h.FormControl(null)})}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.unidadUsuario(this.userToken.UsuarioId).subscribe(function(t){e.unitMedic=t.Data,e.unitMedicalId=e.unitMedic.unidadMed.Id.toString(),e.consultCurrentContract()}),this.paginator.page.subscribe(function(t){t&&(e.pageIndex=t.pageIndex+1,e.pageSize=t.pageSize,e.consultRequest())}),this.paginator._intl.itemsPerPageLabel="Resultados por pagina",this.paginator._intl.nextPageLabel="Siguiente p\xe1gina",this.paginator._intl.lastPageLabel="\xdaltima p\xe1gina",this.paginator._intl.previousPageLabel="Pagina anterior",this.paginator._intl.firstPageLabel="Primera p\xe1gina",this.searchInputControl.valueChanges.subscribe(function(t){t||e.consultRequest()})}},{key:"consultCurrentContract",value:function(){var e=this,t=Ot().format("YYYY-MM-DDTHH:mm:ssZ");this.contractService.ConsultarContratoTraslado(this.unitMedicalId,t).subscribe(function(t){null!=t.Data?(e.contracts=t.Data,console.log(t.Data),e.determineFilters(),e.determineRangeDates()):x().fire({icon:"error",title:"Sin Resultados",text:"El ultimo contrato vigente esta vencido, puedes consultar solicitudes anteriores cambiando el rango de fechas para busqueda."})})}},{key:"determineFilters",value:function(){var e=this.contracts.map(function(e){return e.NumeroContrato});this.filterNumberContract=e.join(","),1===this.contracts.length&&(this.controlNumberContract.setValue(this.filterNumberContract),this.controlNumberContract.disable()),this.consultRequest(),this.consultOriginsFilter(this.unitMedicalId,"true","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"true","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"true","","",this.filterNumberContract,this.dateStart,this.dateEnd)}},{key:"determineRangeDates",value:function(){if(this.contracts.length>1){var e=this.contracts.map(function(e){return e.InicioContrato}).reduce(function(e,t){return new Date(e)<new Date(t)?e:t}),t=Ot(e,"DD/MM/YYYY");this.minDate=t.toDate();var n=this.contracts.map(function(e){return e.FinContrato}).reduce(function(e,t){return new Date(e)>new Date(t)?e:t}),a=Ot(n,"DD/MM/YYYY");this.maxDate=a.toDate()}else{var o=Ot(this.contracts[0].InicioContrato,"DD/MM/YYYY");this.minDate=o.toDate();var r=Ot(this.contracts[0].FinContrato,"DD/MM/YYYY");this.maxDate=r.toDate()}}},{key:"consultCompanionFilter",value:function(e,t,n,a,o,r,i){var l=this;this.transferRequestService.GetCompanionFilters(e,t,n,a,o,r,i).subscribe(function(e){var t=e.Data.map(function(e){return e.acompa\u00f1ante.Bool});l.defineCompanionFilterStatus(t)})}},{key:"defineCompanionFilterStatus",value:function(e){this.withCompanion=!0,this.unaccompanied=!0;var n,a=t(e);try{for(a.s();!(n=a.n()).done;){n.value?this.withCompanion=!1:this.unaccompanied=!1}}catch(o){a.e(o)}finally{a.f()}}},{key:"consultOriginsFilter",value:function(e,t,n,a,o,r,i){var l=this;this.transferRequestService.GetOriginFilters(e,t,n,a,o,r,i).subscribe(function(e){l.origins=e.Data.map(function(e){return e.origen})})}},{key:"consultDestinationsFilter",value:function(e,t,n,a,o,r,i){var l=this;this.transferRequestService.GetDestinationFilters(e,t,n,a,o,r,i).subscribe(function(e){l.destinations=e.Data.map(function(e){return e.destino})})}},{key:"removeChips",value:function(e){var t=this.filters.indexOf(e);t>=0&&(this.filters.splice(t,1),this.resetValueFilters(e.filter),this.consultRequest())}},{key:"resetValueFilters",value:function(e){switch(e){case"Acompa\xf1ante":this.resetFilterCompanion();break;case"Destino":this.resetFilterDestination();break;case"Origen":this.resetFilterOrigin();break;case"Numero Contrato":this.resetFilterContract()}}},{key:"resetFilterCompanion",value:function(){this.controlCompanion.reset(),this.resetAllFilters()}},{key:"resetFilterDestination",value:function(){this.controlDestination.reset(),this.resetAllFilters()}},{key:"resetFilterOrigin",value:function(){this.controlOrigin.reset(),this.resetAllFilters()}},{key:"resetFilterContract",value:function(){this.controlNumberContract.reset(),this.consultCurrentContract(),this.resetAllFilters()}},{key:"resetFilterDates",value:function(){this.range.reset(),this.range.markAsUntouched(),this.range.markAsPristine(),this.dateStart="",this.dateEnd="",this.resetAllFilters(),this.consultRequest()}},{key:"resetAllFilters",value:function(){var e=null!==this.controlOrigin.value?this.controlOrigin.value:"",t=null!==this.controlDestination.value?this.controlDestination.value:"",n=null!==this.controlCompanion.value?this.controlCompanion.value:"";this.consultOriginsFilter(this.unitMedicalId,"true",t,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"true",e,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"true",e,t,this.filterNumberContract,this.dateStart,this.dateEnd)}},{key:"changeOrigin",value:function(e){this.checkRepeatNotChips(e),this.resetAllFilters()}},{key:"changeDestination",value:function(e){this.checkRepeatNotChips(e),this.resetAllFilters()}},{key:"changeCompanion",value:function(e){var t=null!==this.controlCompanion.value?this.controlCompanion.value:"",n=null!==this.controlDestination.value?this.controlDestination.value:"";this.consultDestinationsFilter(this.unitMedicalId,"true",null!==this.controlOrigin.value?this.controlOrigin.value:"",t,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultOriginsFilter(this.unitMedicalId,"true",n,t,this.filterNumberContract,this.dateStart,this.dateEnd),this.checkRepeatNotChips(e)}},{key:"changeContractNumber",value:function(e){this.filterNumberContract=e.value,this.checkRepeatNotChips(e),this.resetAllFilters()}},{key:"checkRepeatNotChips",value:function(e){this.filters.find(function(t){return t.filter===e.filter})?this.updateValueChip(e):this.addChips(e)}},{key:"addChips",value:function(e){this.filters.push(e),this.consultRequest()}},{key:"updateValueChip",value:function(e){var t=this.filters.findIndex(function(t){return t.filter===e.filter});this.filters[t].value=e.value,this.consultRequest()}},{key:"consultRequest",value:function(){var e=this,t=null!==this.searchInputControl.value?this.searchInputControl.value:"",n=null!==this.controlCompanion.value?this.controlCompanion.value:"",a=null!==this.controlOrigin.value?this.controlOrigin.value:"",o=null!==this.controlDestination.value?this.controlDestination.value:"";this.transferRequestService.ConsultSolicitudes(this.unitMedicalId,this.pageIndex.toString(),this.pageSize.toString(),t,"true",n,a,o,this.filterNumberContract,this.dateStart,this.dateEnd).subscribe(function(t){console.log(t.Data),e.dataSource=new z.by(t.Data.registros),e.length=t.Data.total,e.loadingData=!0,0===e.dataSource.data.length&&x().fire({icon:"error",title:"Sin Resultados",text:"No se encontraron resultados para tu busqueda"})})}},{key:"formatDate",value:function(e){return Ot(e).format("DD-MM-YYYY")}},{key:"formatExpeditionDate",value:function(e){return Ot(e).format("DD-MM-YYYY")}},{key:"getPDF",value:function(e){this.transferRequestService.printRequestComplete(e,"true","true").subscribe(function(e){var t=URL.createObjectURL(e);window.open(t,"Solituddetraslado")},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}},{key:"imprimirSoloDatos",value:function(e){this.transferRequestService.printDataOnly(e,"true").subscribe(function(e){var t=URL.createObjectURL(e);window.open(t)},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}},{key:"rangeDateChange",value:function(){this.range.get("end").value&&(console.log("Filtrando por rango"),this.dateStart=this.range.get("start").value.toISOString(),this.dateEnd=this.range.get("end").value.toISOString(),this.consultRequest(),this.resetAllFilters())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](Ke.i),u["\u0275\u0275directiveInject"](et.Yg),u["\u0275\u0275directiveInject"](j.O),u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](b._A),u["\u0275\u0275directiveInject"](E.d))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitudes-realizadas"]],viewQuery:function(e,t){var n;(1&e&&(u["\u0275\u0275viewQuery"](it,5),u["\u0275\u0275viewQuery"](Ze.NW,7)),2&e)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.sidenav=n.first),u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.paginator=n.first))},decls:111,vars:29,consts:[[1,"example-container"],["fixedTopGap","0","disableClose","","mode","side",3,"perfectScrollbar"],["sidenav",""],[2,"padding","6px 12px"],[2,"margin","10px 0","color","#1976d2","font-weight","bold","text-align","center"],[1,"titles"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"formControl","change"],["value","1",3,"disabled"],["value","2",3,"disabled"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["mat-card-avatar","","fxFlex.gt-sm","3","fxFlex.gt-xs","100","fxFlex","100"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["fxFlex.gt-sm","97","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText","m-0"],[1,"m-0","centerText"],["class","m-0 font-bold text-info centerText",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"bg-light","p-r-20","p-l-20"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100"],[1,"p-b-0",2,"padding-bottom","0!important"],["matInput","","placeholder","Buscar solicitud","autocomplete","off",3,"formControl","keyup.enter"],["fxFlex.gt-sm","12","fxFlex.gt-xs","100","fxFlex","100",1,"startText"],["mat-raised-button","",1,"buttonBlue","font-bold",3,"click"],["aria-label","Example icon-button with a heart icon"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["appearance","legacy",1,"p-t-15"],[3,"formGroup","rangePicker","min","max"],["matStartDate","","formControlName","start","placeholder","Inicio","readonly",""],["matEndDate","","formControlName","end","placeholder","Fin","readonly",""],["matSuffix","",3,"for"],["picker",""],["type","button","mat-stroked-button","","matDateRangePickerCancel","","color","warn",3,"click"],["mat-raised-button","","color","primary","matDateRangePickerApply","",3,"click"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click",4,"ngIf"],["fxFlex.gt-sm","10","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["mat-raised-button","","color","accent",3,"click"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100"],["style","border-radius: 5px; font-family: 'Lucida Console', monospace; font-size: small",3,"removed",4,"ngFor","ngForOf"],[3,"hidden"],["mode","query"],[1,"responsive-table"],[3,"dataSource"],["matColumnDef","folio"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","elaboracion"],["matColumnDef","ftp"],["matColumnDef","origen"],["matColumnDef","destino"],["matColumnDef","nombre_pac"],["matColumnDef","fecha"],["matColumnDef","accion"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[3,"value"],["mat-icon-button","","color","primary",3,"click"],[1,"m-0","font-bold","text-info","centerText"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click"],[2,"border-radius","5px","font-family","'Lucida Console', monospace","font-size","small",3,"removed"],["matChipRemove",""],["mat-icon-button","",2,"font-size","25pt","color","#d60017",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-sidenav-container",0),u["\u0275\u0275elementStart"](1,"mat-sidenav",1,2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"h4",4),u["\u0275\u0275text"](5,"Filtros"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"h5",5),u["\u0275\u0275text"](7,"Acompa\xf1ante"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"mat-radio-group",6),u["\u0275\u0275listener"]("change",function(e){return t.changeCompanion({filter:"Acompa\xf1ante",value:e.value})}),u["\u0275\u0275elementStart"](9,"mat-radio-button",7),u["\u0275\u0275text"](10,"Si"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"mat-radio-button",8),u["\u0275\u0275text"](12,"No"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"h5",5),u["\u0275\u0275text"](14,"Origen"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"mat-form-field",9),u["\u0275\u0275elementStart"](16,"mat-label"),u["\u0275\u0275text"](17,"Filtrar por origen"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"mat-select",10),u["\u0275\u0275listener"]("selectionChange",function(e){return t.changeOrigin({filter:"Origen",value:e.value})}),u["\u0275\u0275template"](19,lt,2,2,"mat-option",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"h5",5),u["\u0275\u0275text"](21,"Destino"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"mat-form-field",9),u["\u0275\u0275elementStart"](23,"mat-label"),u["\u0275\u0275text"](24,"Filtrar por destino"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"mat-select",10),u["\u0275\u0275listener"]("selectionChange",function(e){return t.changeDestination({filter:"Destino",value:e.value})}),u["\u0275\u0275template"](26,ct,2,2,"mat-option",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"h5",5),u["\u0275\u0275text"](28,"Contrato(s)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"mat-form-field",9),u["\u0275\u0275elementStart"](30,"mat-label"),u["\u0275\u0275text"](31,"Filtrar por contrato"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"mat-select",10),u["\u0275\u0275listener"]("selectionChange",function(e){return t.changeContractNumber({filter:"Numero Contrato",value:e.value})}),u["\u0275\u0275template"](33,mt,2,2,"mat-option",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"mat-sidenav-content"),u["\u0275\u0275elementStart"](35,"mat-card"),u["\u0275\u0275elementStart"](36,"mat-card-content"),u["\u0275\u0275elementStart"](37,"div",12),u["\u0275\u0275elementStart"](38,"div",13),u["\u0275\u0275template"](39,st,3,0,"button",14),u["\u0275\u0275template"](40,dt,3,0,"button",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](41,"div",15),u["\u0275\u0275elementStart"](42,"h4",16),u["\u0275\u0275text"](43,"Solicitudes Realizadas de Traslado de Pacientes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"h4",17),u["\u0275\u0275text"](45,"Contratos Vigentes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](46,ut,2,1,"h5",18),u["\u0275\u0275elementStart"](47,"div",19),u["\u0275\u0275elementStart"](48,"div",20),u["\u0275\u0275elementStart"](49,"mat-form-field",21),u["\u0275\u0275elementStart"](50,"input",22),u["\u0275\u0275listener"]("keyup.enter",function(){return t.consultRequest()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](51,"div",23),u["\u0275\u0275elementStart"](52,"button",24),u["\u0275\u0275listener"]("click",function(){return t.consultRequest()}),u["\u0275\u0275elementStart"](53,"mat-icon",25),u["\u0275\u0275text"](54,"find_in_page"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](55," Buscar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](56,"div",26),u["\u0275\u0275elementStart"](57,"mat-form-field",27),u["\u0275\u0275elementStart"](58,"mat-label"),u["\u0275\u0275text"](59,"Buscar por fechas"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](60,"mat-date-range-input",28),u["\u0275\u0275element"](61,"input",29),u["\u0275\u0275element"](62,"input",30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](63,"mat-datepicker-toggle",31),u["\u0275\u0275elementStart"](64,"mat-date-range-picker",null,32),u["\u0275\u0275elementStart"](66,"mat-date-range-picker-actions"),u["\u0275\u0275elementStart"](67,"button",33),u["\u0275\u0275listener"]("click",function(){return t.resetFilterDates()}),u["\u0275\u0275text"](68,"Borrar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](69,"button",34),u["\u0275\u0275listener"]("click",function(){return t.rangeDateChange()}),u["\u0275\u0275text"](70,"Filtrar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](71,pt,3,0,"button",35),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](72,"div",36),u["\u0275\u0275elementStart"](73,"button",37),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275reference"](2).toggle()}),u["\u0275\u0275elementStart"](74,"mat-icon",25),u["\u0275\u0275text"](75,"filter_alt"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](76," Filtros "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](77,"div",38),u["\u0275\u0275elementStart"](78,"mat-chip-list"),u["\u0275\u0275template"](79,ft,4,1,"mat-chip",39),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](80,"div",40),u["\u0275\u0275element"](81,"mat-progress-bar",41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](82,"div",42),u["\u0275\u0275elementStart"](83,"mat-table",43),u["\u0275\u0275elementContainerStart"](84,44),u["\u0275\u0275template"](85,ht,2,0,"mat-header-cell",45),u["\u0275\u0275template"](86,vt,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](87,47),u["\u0275\u0275template"](88,xt,2,0,"mat-header-cell",45),u["\u0275\u0275template"](89,gt,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](90,48),u["\u0275\u0275template"](91,bt,2,0,"mat-header-cell",45),u["\u0275\u0275template"](92,St,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](93,49),u["\u0275\u0275template"](94,Ct,2,0,"mat-header-cell",45),u["\u0275\u0275template"](95,Et,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](96,50),u["\u0275\u0275template"](97,yt,2,0,"mat-header-cell",45),u["\u0275\u0275template"](98,wt,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](99,51),u["\u0275\u0275template"](100,It,2,0,"mat-header-cell",45),u["\u0275\u0275template"](101,Ft,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](102,52),u["\u0275\u0275template"](103,kt,2,0,"mat-header-cell",45),u["\u0275\u0275template"](104,Dt,2,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](105,53),u["\u0275\u0275template"](106,Mt,2,0,"mat-header-cell",45),u["\u0275\u0275template"](107,Pt,16,1,"mat-cell",46),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](108,Vt,1,0,"mat-header-row",54),u["\u0275\u0275template"](109,Nt,1,0,"mat-row",55),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](110,"mat-paginator",56),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](2),o=u["\u0275\u0275reference"](65);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("perfectScrollbar",t.config),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("formControl",t.controlCompanion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",t.withCompanion),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",t.unaccompanied),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("formControl",t.controlOrigin),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.origins),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("formControl",t.controlDestination),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.destinations),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("formControl",t.controlNumberContract),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.contracts),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",!a.opened),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",a.opened),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.unitMedic),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("formControl",t.searchInputControl),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("formGroup",t.range)("rangePicker",o)("min",t.minDate)("max",t.maxDate),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("for",o),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",t.range.get("end").value),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.filters),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("hidden",t.loadingData),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](25),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.length)("showFirstLastButtons",!0)}},directives:[tt.TM,tt.JX,nt.$V,le.VQ,h.NgControlStatus,h.FormControlDirective,le.U0,V.KE,V.hX,N.gD,l.sg,tt.Rh,T.a8,T.dn,P.xw,P.Wh,T.kc,P.yH,l.O5,O.Nt,h.DefaultValueAccessor,_.lW,ie.Hw,he.wx,h.NgControlStatusGroup,h.FormGroupDirective,he.zY,h.FormControlName,he.By,he.nW,V.R9,he._g,he.M5,he.dp,he.DK,at.qn,ot.pW,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,Ze.NW,b.ey,at.HS,at.qH,z.ge,z.ev,rt.p6,rt.VK,rt.OP,z.XQ,z.Gk],styles:[".example-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;flex:1}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:6px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.titles[_ngcontent-%COMP%]{color:#0d453c;margin:10px 0;font-weight:700}.example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),e}(),At=["sidenav"];function Bt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",38),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n," ")}}function Rt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",38),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n," ")}}function jt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",38),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n.NumeroContrato),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.NumeroContrato," ")}}function Tt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",41),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2),u["\u0275\u0275reference"](2).open()}),u["\u0275\u0275elementStart"](1,"mat-icon",42),u["\u0275\u0275text"](2,"arrow_back_ios"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function zt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",41),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2),u["\u0275\u0275reference"](2).close()}),u["\u0275\u0275elementStart"](1,"mat-icon",42),u["\u0275\u0275text"](2,"arrow_forward_ios"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function qt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",39),u["\u0275\u0275template"](1,Tt,3,0,"button",40),u["\u0275\u0275template"](2,zt,3,0,"button",40),u["\u0275\u0275elementEnd"]()),2&e){u["\u0275\u0275nextContext"]();var n=u["\u0275\u0275reference"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.opened),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.opened)}}function Lt(e,t){1&e&&u["\u0275\u0275element"](0,"div",39)}function Ut(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h5",43),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.unitMedic.unidadMed.DenominacionUni)}}function $t(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",44),u["\u0275\u0275elementStart"](1,"button",45),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().habilitarCancelacion()}),u["\u0275\u0275elementStart"](2,"mat-icon",42),u["\u0275\u0275text"](3,"delete_forever"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," Cancelar Folio "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Ht(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",44),u["\u0275\u0275elementStart"](1,"button",46),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().habilitarCancelacion()}),u["\u0275\u0275elementStart"](2,"mat-icon",42),u["\u0275\u0275text"](3,"cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," Cerrar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Yt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Introduce un numero de folio valido. "),u["\u0275\u0275elementEnd"]())}function Gt(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Campo obligatorio. "),u["\u0275\u0275elementEnd"]())}function Wt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",54),u["\u0275\u0275elementStart"](1,"mat-form-field",9),u["\u0275\u0275elementStart"](2,"mat-label"),u["\u0275\u0275text"](3,"Ingresa el motivo de cancelacion"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"textarea",55),u["\u0275\u0275template"](5,Gt,2,0,"mat-error",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",n.formCancelar.controls.Motivo.hasError("required")&&n.formCancelar.controls.Motivo.touched)}}function Qt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",56),u["\u0275\u0275elementStart"](1,"button",57),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).buscarFolio()}),u["\u0275\u0275elementStart"](2,"mat-icon",42),u["\u0275\u0275text"](3,"find_in_page"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," Buscar Folio "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",a.formCancelar.controls.Folio.invalid)}}function Xt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",58),u["\u0275\u0275elementStart"](1,"button",59),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).solicitarCancelacion()}),u["\u0275\u0275elementStart"](2,"mat-icon",42),u["\u0275\u0275text"](3,"disabled_by_default"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," Cancelar Solicitud "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",a.formCancelar.invalid)}}function Jt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"form",47),u["\u0275\u0275elementStart"](1,"div",48),u["\u0275\u0275elementStart"](2,"div",49),u["\u0275\u0275elementStart"](3,"mat-form-field",9),u["\u0275\u0275elementStart"](4,"mat-label"),u["\u0275\u0275text"](5,"Ingresa el Folio a cancelar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](6,"input",50),u["\u0275\u0275template"](7,Yt,2,0,"mat-error",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,Wt,6,1,"div",51),u["\u0275\u0275template"](9,Qt,5,1,"div",52),u["\u0275\u0275template"](10,Xt,5,1,"div",53),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("formGroup",n.formCancelar),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngIf",n.formCancelar.controls.Folio.hasError("pattern")&&n.formCancelar.controls.Folio.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.solicitud),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.solicitud),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.solicitud)}}function Zt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h5",60),u["\u0275\u0275elementStart"](2,"strong"),u["\u0275\u0275text"](3,"Folio de solicitud: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",61),u["\u0275\u0275elementStart"](6,"div",62),u["\u0275\u0275elementStart"](7,"h5",63),u["\u0275\u0275elementStart"](8,"strong"),u["\u0275\u0275text"](9,"Nombre: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"h5",63),u["\u0275\u0275elementStart"](12,"strong"),u["\u0275\u0275text"](13,"Folio FTP-01: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"h5",63),u["\u0275\u0275elementStart"](16,"strong"),u["\u0275\u0275text"](17,"Unidad Medica: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"h5",63),u["\u0275\u0275elementStart"](20,"strong"),u["\u0275\u0275text"](21,"Fecha de la Cita: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"h5",63),u["\u0275\u0275elementStart"](24,"strong"),u["\u0275\u0275text"](25,"Origen: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",62),u["\u0275\u0275elementStart"](28,"h5",63),u["\u0275\u0275elementStart"](29,"strong"),u["\u0275\u0275text"](30,"N.S.S.: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"h5",63),u["\u0275\u0275elementStart"](33,"strong"),u["\u0275\u0275text"](34,"Contrato: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](35),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](36,"h5",63),u["\u0275\u0275elementStart"](37,"strong"),u["\u0275\u0275text"](38,"Acompa\xf1ante: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](39),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"h5",63),u["\u0275\u0275elementStart"](41,"strong"),u["\u0275\u0275text"](42,"Destino: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](43),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"h5",63),u["\u0275\u0275elementStart"](45,"strong"),u["\u0275\u0275text"](46,"Fecha Expedicion: "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](47),u["\u0275\u0275pipe"](48,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.solicitudTralado.folio),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](n.solicitudTralado.nombrePaciente),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.solicitudTralado.ftp01),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"]("",n.solicitudTralado.unidadMed.DenominacionUni," "),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.dateAppointment),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.solicitudTralado.origen),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate2"]("",n.solicitudTralado.nss,"\xa0-\xa0",n.solicitudTralado.agregadoMedico," "),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.solicitudTralado.contratoNumeroContrato),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.acompaniante),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.solicitudTralado.destino),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",n.dateRequest," Hora: ",u["\u0275\u0275pipeBind2"](48,13,n.dateRequestTmp,"mediumTime"),"")}}function Kt(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",83),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).resetFilterDates()}),u["\u0275\u0275elementStart"](1,"mat-icon"),u["\u0275\u0275text"](2,"cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function en(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-chip",84),u["\u0275\u0275listener"]("removed",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"](2).removeChips(e)}),u["\u0275\u0275text"](1),u["\u0275\u0275elementStart"](2,"mat-icon",85),u["\u0275\u0275text"](3,"cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("",a.filter," ")}}function tn(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",64),u["\u0275\u0275elementStart"](1,"div",14),u["\u0275\u0275elementStart"](2,"mat-form-field",65),u["\u0275\u0275elementStart"](3,"input",66),u["\u0275\u0275listener"]("keyup.enter",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().consultRequest()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",67),u["\u0275\u0275elementStart"](5,"button",68),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().consultRequest()}),u["\u0275\u0275elementStart"](6,"mat-icon",42),u["\u0275\u0275text"](7,"find_in_page"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](8," Buscar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",69),u["\u0275\u0275elementStart"](10,"mat-form-field",70),u["\u0275\u0275elementStart"](11,"mat-label"),u["\u0275\u0275text"](12,"Buscar por fechas"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"mat-date-range-input",71),u["\u0275\u0275element"](14,"input",72),u["\u0275\u0275element"](15,"input",73),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](16,"mat-datepicker-toggle",74),u["\u0275\u0275elementStart"](17,"mat-date-range-picker",null,75),u["\u0275\u0275elementStart"](19,"mat-date-range-picker-actions"),u["\u0275\u0275elementStart"](20,"button",76),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().resetFilterDates()}),u["\u0275\u0275text"](21,"Borrar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"button",77),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().rangeDateChange()}),u["\u0275\u0275text"](23,"Filtrar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](24,Kt,3,0,"button",78),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",79),u["\u0275\u0275elementStart"](26,"button",80),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](),u["\u0275\u0275reference"](2).toggle()}),u["\u0275\u0275elementStart"](27,"mat-icon",42),u["\u0275\u0275text"](28,"filter_alt"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](29," Filtros "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](30,"div",81),u["\u0275\u0275elementStart"](31,"mat-chip-list"),u["\u0275\u0275template"](32,en,4,1,"mat-chip",82),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](18),o=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("formControl",o.searchInputControl),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("formGroup",o.range)("rangePicker",a)("min",o.minDate)("max",o.maxDate),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("for",a),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",o.range.get("end").value),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",o.filters)}}function nn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Folio"),u["\u0275\u0275elementEnd"]())}function an(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.folio," ")}}function on(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Elaboracion"),u["\u0275\u0275elementEnd"]())}function rn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",a.formatExpeditionDate(n.fechaExpedicion)," ")}}function ln(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"FTP01"),u["\u0275\u0275elementEnd"]())}function cn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.ftp01,"")}}function mn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Origen"),u["\u0275\u0275elementEnd"]())}function sn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.origen," ")}}function dn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Destino"),u["\u0275\u0275elementEnd"]())}function un(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.destino," ")}}function pn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Nombre Paciente"),u["\u0275\u0275elementEnd"]())}function fn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.nombrePaciente," ")}}function hn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Fecha de Cita"),u["\u0275\u0275elementEnd"]())}function vn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",a.formatoFecha(n.fechaCita)," ")}}function xn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"PDF"),u["\u0275\u0275elementEnd"]())}function gn(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",86),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().consultarPDF(e.folio)}),u["\u0275\u0275elementStart"](2,"mat-icon",42),u["\u0275\u0275text"](3,"picture_as_pdf"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function bn(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function Sn(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}var Cn=C,En=function(){var e=function(){function e(t,n,a,r,i,l){var c=this;o(this,e),this.userService=t,this.transferRequestService=a,this.fb=r,this.adapter=i,this.contractService=l,this.cancel=!0,this.config={},this.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"],this.pageSize=20,this.pageSizeOptions=[20,50,100],this.length=0,this.pageIndex=1,this.loadingData=!1,this.searchInputControl=new h.FormControl,this.filters=[],this.controlCompanion=new h.FormControl,this.controlDestination=new h.FormControl,this.controlOrigin=new h.FormControl,this.controlNumberContract=new h.FormControl,this.origins=[],this.destinations=[],this.withCompanion=!0,this.unaccompanied=!0,this.unitMedicalId="",this.filterNumberContract="",this.dateStart="",this.dateEnd="",this.acompaniante="",this.solicitud=!1,this.dateAppointment="",this.dateRequest="",this.cancel=!0,this.adapter.setLocale("es-mx"),n.observe(["(max-width: 600px)"]).subscribe(function(e){c.displayedColumns=["folio","elaboracion","ftp","origen","destino","nombre_pac","fecha","accion"]}),this.userToken=(0,g.Z)(localStorage.getItem("token")),this.range=r.group({start:new h.FormControl(null),end:new h.FormControl(null)})}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.unidadUsuario(this.userToken.UsuarioId).subscribe(function(t){e.unitMedic=t.Data,e.unitMedicalId=e.unitMedic.unidadMed.Id.toString(),e.consultCurrentContract()}),this.paginator.page.subscribe(function(t){t&&(e.pageIndex=t.pageIndex+1,e.pageSize=t.pageSize,e.consultRequest())}),this.formCancelar=this.fb.group({Folio:["",h.Validators.compose([h.Validators.required,h.Validators.pattern("^([0-9]){6}-[0-9]{2}-[0-9]{1,6}")])],Motivo:["",h.Validators.compose([h.Validators.required,h.Validators.minLength(30)])]}),this.paginator._intl.itemsPerPageLabel="Resultados por pagina",this.paginator._intl.nextPageLabel="Siguiente p\xe1gina",this.paginator._intl.lastPageLabel="\xdaltima p\xe1gina",this.paginator._intl.previousPageLabel="Pagina anterior",this.paginator._intl.firstPageLabel="Primera p\xe1gina",this.searchInputControl.valueChanges.subscribe(function(t){t||e.consultRequest()})}},{key:"consultCurrentContract",value:function(){var e=this,t=Cn().format("YYYY-MM-DDTHH:mm:ssZ");this.contractService.ConsultarContratoTraslado(this.unitMedicalId,t).subscribe(function(t){console.log(t.Data),null!=t.Data?(e.contracts=t.Data,e.determineFilters(),e.determineRangeDates()):x().fire({icon:"error",title:"Sin Resultados",text:"El ultimo contrato vigente esta vencido, puedes consultar solicitudes anteriores cambiando el rango de fechas para busqueda."})})}},{key:"determineFilters",value:function(){var e=this.contracts.map(function(e){return e.NumeroContrato});this.filterNumberContract=e.join(","),1===this.contracts.length&&(this.controlNumberContract.setValue(this.filterNumberContract),this.controlNumberContract.disable()),this.consultRequest(),this.consultOriginsFilter(this.unitMedicalId,"false","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"false","","",this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"false","","",this.filterNumberContract,this.dateStart,this.dateEnd)}},{key:"determineRangeDates",value:function(){if(this.contracts.length>1){var e=this.contracts.map(function(e){return e.InicioContrato}).reduce(function(e,t){return new Date(e)<new Date(t)?e:t}),t=Cn(e,"DD/MM/YYYY");this.minDate=t.toDate();var n=this.contracts.map(function(e){return e.FinContrato}).reduce(function(e,t){return new Date(e)>new Date(t)?e:t}),a=Cn(n,"DD/MM/YYYY");this.maxDate=a.toDate()}else{var o=Cn(this.contracts[0].InicioContrato,"DD/MM/YYYY");this.minDate=o.toDate();var r=Cn(this.contracts[0].FinContrato,"DD/MM/YYYY");this.maxDate=r.toDate()}}},{key:"consultRequest",value:function(){var e=this,t=null!==this.searchInputControl.value?this.searchInputControl.value:"",n=null!==this.controlCompanion.value?this.controlCompanion.value:"",a=null!==this.controlOrigin.value?this.controlOrigin.value:"",o=null!==this.controlDestination.value?this.controlDestination.value:"";this.transferRequestService.ConsultSolicitudes(this.unitMedicalId,this.pageIndex.toString(),this.pageSize.toString(),t,"false",n,a,o,this.filterNumberContract,this.dateStart,this.dateEnd).subscribe(function(t){e.dataSource=new z.by(t.Data.registros),e.length=t.Data.total,e.loadingData=!0,0===e.dataSource.data.length&&x().fire({icon:"error",title:"Sin Resultados",text:"No se encontraron resultados para tu busqueda"})})}},{key:"formatoFecha",value:function(e){var t=e.indexOf("T");return e.substring(0,t)}},{key:"consultarPDF",value:function(e){this.transferRequestService.printRequestComplete(e,"false","").subscribe(function(e){var t=URL.createObjectURL(e);window.open(t)},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})})}},{key:"habilitarCancelacion",value:function(){this.sidenav.close(),this.cancel=!this.cancel,this.formCancelar.reset(),this.solicitudTralado="",this.solicitud=!1}},{key:"buscarFolio",value:function(){var e=this;this.transferRequestService.ConsultarFolioSolicitud(this.formCancelar.controls.Folio.value).subscribe(function(t){console.log(t.Data);var n=new Date(t.Data.fechaCita),a=new Date(t.Data.fechaExpedicion);e.dateRequestTmp=new Date(t.Data.fechaExpedicion),e.dateAppointment=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),e.dateRequest=a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear(),e.solicitud=!0,e.solicitudTralado=t.Data,e.regresarAcompaniante(e.solicitudTralado.acompa\u00f1ante)},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:e.error.Mensaje,icon:"error",showConfirmButton:!0})})}},{key:"regresarAcompaniante",value:function(e){this.acompaniante=e?"Si":"No"}},{key:"solicitarCancelacion",value:function(){var e=this;x().fire({title:"Advertencia",text:"Al solicitar la cancelacion, se guardaran tus datos de usuario y el motivo de cancelacion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#36b729",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Regresar"}).then(function(t){t.value&&(e.bitacora={motivo:e.formCancelar.controls.Motivo.value,solicitudTrasladoFolio:e.formCancelar.controls.Folio.value,usuarioId:e.userToken.UsuarioId},e.transferRequestService.CancelarFolioSolicitud(e.bitacora,e.formCancelar.controls.Folio.value).subscribe(function(t){console.log(t.Mensaje),x().fire({position:"center",title:t.Mensaje,icon:"success",showConfirmButton:!0}),e.habilitarCancelacion(),e.consultRequest(),e.resetAllFilters()},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({title:"Error al cancelar la solictud",text:t.Mensaje,icon:"error"})}console.log(e.error)}))})}},{key:"changeCompanion",value:function(e){var t=null!==this.controlCompanion.value?this.controlCompanion.value:"",n=null!==this.controlDestination.value?this.controlDestination.value:"";this.consultDestinationsFilter(this.unitMedicalId,"false",null!==this.controlOrigin.value?this.controlOrigin.value:"",t,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultOriginsFilter(this.unitMedicalId,"false",n,t,this.filterNumberContract,this.dateStart,this.dateEnd),this.checkRepeatNotChips(e)}},{key:"changeDestination",value:function(e){this.checkRepeatNotChips(e),this.resetAllFilters()}},{key:"changeContractNumber",value:function(e){this.filterNumberContract=e.value,this.checkRepeatNotChips(e),this.resetAllFilters()}},{key:"consultDestinationsFilter",value:function(e,t,n,a,o,r,i){var l=this;this.transferRequestService.GetDestinationFilters(e,t,n,a,o,r,i).subscribe(function(e){l.destinations=e.Data.map(function(e){return e.destino})})}},{key:"consultOriginsFilter",value:function(e,t,n,a,o,r,i){var l=this;this.transferRequestService.GetOriginFilters(e,t,n,a,o,r,i).subscribe(function(e){l.origins=e.Data.map(function(e){return e.origen})})}},{key:"changeOrigin",value:function(e){this.checkRepeatNotChips(e),this.resetAllFilters()}},{key:"checkRepeatNotChips",value:function(e){this.filters.find(function(t){return t.filter===e.filter})?this.updateValueChip(e):this.addChips(e)}},{key:"addChips",value:function(e){this.filters.push(e),this.consultRequest()}},{key:"updateValueChip",value:function(e){var t=this.filters.findIndex(function(t){return t.filter===e.filter});this.filters[t].value=e.value,this.consultRequest()}},{key:"resetAllFilters",value:function(){var e=null!==this.controlOrigin.value?this.controlOrigin.value:"",t=null!==this.controlDestination.value?this.controlDestination.value:"",n=null!==this.controlCompanion.value?this.controlCompanion.value:"";this.consultOriginsFilter(this.unitMedicalId,"false",t,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultDestinationsFilter(this.unitMedicalId,"false",e,n,this.filterNumberContract,this.dateStart,this.dateEnd),this.consultCompanionFilter(this.unitMedicalId,"false",e,t,this.filterNumberContract,this.dateStart,this.dateEnd)}},{key:"consultCompanionFilter",value:function(e,t,n,a,o,r,i){var l=this;this.transferRequestService.GetCompanionFilters(e,t,n,a,o,r,i).subscribe(function(e){var t=e.Data.map(function(e){return e.acompa\u00f1ante.Bool});l.defineCompanionFilterStatus(t)})}},{key:"defineCompanionFilterStatus",value:function(e){this.withCompanion=!0,this.unaccompanied=!0;var n,a=t(e);try{for(a.s();!(n=a.n()).done;){n.value?this.withCompanion=!1:this.unaccompanied=!1}}catch(o){a.e(o)}finally{a.f()}}},{key:"resetFilterDates",value:function(){this.range.reset(),this.range.markAsUntouched(),this.range.markAsPristine(),this.dateStart="",this.dateEnd="",this.resetAllFilters(),this.consultRequest()}},{key:"rangeDateChange",value:function(){this.range.get("end").value&&(console.log("Filtrando por rango"),this.dateStart=this.range.get("start").value.toISOString(),this.dateEnd=this.range.get("end").value.toISOString(),this.consultRequest(),this.resetAllFilters())}},{key:"removeChips",value:function(e){var t=this.filters.indexOf(e);t>=0&&(this.filters.splice(t,1),this.resetValueFilters(e.filter),this.consultRequest())}},{key:"resetValueFilters",value:function(e){switch(e){case"Acompa\xf1ante":this.resetFilterCompanion();break;case"Destino":this.resetFilterDestination();break;case"Origen":this.resetFilterOrigin();break;case"Numero Contrato":this.resetFilterContract()}}},{key:"resetFilterCompanion",value:function(){this.controlCompanion.reset(),this.resetAllFilters()}},{key:"resetFilterDestination",value:function(){this.controlDestination.reset(),this.resetAllFilters()}},{key:"resetFilterOrigin",value:function(){this.controlOrigin.reset(),this.resetAllFilters()}},{key:"resetFilterContract",value:function(){this.controlNumberContract.reset(),this.consultCurrentContract(),this.resetAllFilters()}},{key:"formatExpeditionDate",value:function(e){return Cn(e).format("DD-MM-YYYY")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](Ke.i),u["\u0275\u0275directiveInject"](et.Yg),u["\u0275\u0275directiveInject"](j.O),u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](b._A),u["\u0275\u0275directiveInject"](E.d))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-solicitudes-canceladas"]],viewQuery:function(e,t){var n;(1&e&&(u["\u0275\u0275viewQuery"](At,5),u["\u0275\u0275viewQuery"](Ze.NW,7)),2&e)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.sidenav=n.first),u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.paginator=n.first))},decls:83,vars:26,consts:[[1,"example-container"],["fixedTopGap","0","disableClose","","mode","side",3,"perfectScrollbar"],["sidenav",""],[2,"padding","6px 12px"],[2,"margin","10px 0","color","#8e2545","font-weight","bold","text-align","center"],[1,"titles"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"formControl","change"],["value","1",3,"disabled"],["value","2",3,"disabled"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"m-b-15"],["mat-card-avatar","","fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText","m-0"],[2,"color","#ff0000"],[1,"m-0","centerText"],["class","m-0 font-bold text-info centerText",4,"ngIf"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100","class","endText",4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center","class","bg-light p-r-20 p-l-20",4,"ngIf"],[1,"responsive-table",3,"hidden"],[3,"dataSource"],["matColumnDef","folio"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","elaboracion"],["matColumnDef","ftp"],["matColumnDef","origen"],["matColumnDef","destino"],["matColumnDef","nombre_pac"],["matColumnDef","fecha"],["matColumnDef","accion"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[3,"value"],["mat-card-avatar","","fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["aria-label","Example icon-button with a heart icon"],[1,"m-0","font-bold","text-info","centerText"],["fxFlex.gt-sm","25","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["mat-raised-button","",2,"font-weight","bold","background","#eb4138","color","white",3,"click"],["mat-stroked-button","","color","warn",2,"font-weight","bold",3,"click"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"b-all",2,"padding-top","16px","padding-left","16px","padding-right","16px","margin-top","10px"],["fxFlex.gt-sm","28","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Ingresa el Folio a cancelar","autocomplete","off","formControlName","Folio"],["fxFlex.gt-sm","47","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],["fxFlex.gt-sm","23","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],["fxFlex.gt-sm","47","fxFlex.gt-xs","100","fxFlex","100"],["matInput","","placeholder","Ingresa el motivo de cancelacion","autocomplete","off","formControlName","Motivo",2,"height","70px"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-raised-button","","color","primary","type","button",2,"font-weight","bold",3,"disabled","click"],["fxFlex.gt-sm","23","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-raised-button","","color","warn",2,"font-weight","bold",3,"disabled","click"],[1,"m-t-10","m-b-10",2,"color","#003366"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","45","fxFlex.gt-xs","100","fxFlex","100"],[1,"m-t-10","m-b-10"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"bg-light","p-r-20","p-l-20"],[1,"p-b-0",2,"padding-bottom","0!important"],["matInput","","placeholder","Buscar solicitud cancelada","autocomplete","off",3,"formControl","keyup.enter"],["fxFlex.gt-sm","12","fxFlex.gt-xs","100","fxFlex","100",1,"startText"],["mat-raised-button","",1,"buttonBlue","font-bold",3,"click"],["fxFlex.gt-sm","20","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["appearance","legacy",1,"p-t-15"],[3,"formGroup","rangePicker","min","max"],["matStartDate","","formControlName","start","placeholder","Inicio","readonly",""],["matEndDate","","formControlName","end","placeholder","Fin","readonly",""],["matSuffix","",3,"for"],["picker",""],["type","button","mat-stroked-button","","matDateRangePickerCancel","","color","warn",3,"click"],["mat-raised-button","","color","primary","matDateRangePickerApply","",3,"click"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click",4,"ngIf"],["fxFlex.gt-sm","10","fxFlex.gt-xs","100","fxFlex","100",1,"endText"],["mat-raised-button","","color","accent",3,"click"],["fxFlex.gt-sm","80","fxFlex.gt-xs","100","fxFlex","100"],["style","border-radius: 5px; font-family: 'Lucida Console', monospace; font-size: small",3,"removed",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Icon","color","warn",3,"click"],[2,"border-radius","5px","font-family","'Lucida Console', monospace","font-size","small",3,"removed"],["matChipRemove",""],["mat-icon-button","",2,"font-size","25pt","color","#d60017",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-sidenav-container",0),u["\u0275\u0275elementStart"](1,"mat-sidenav",1,2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"h4",4),u["\u0275\u0275text"](5,"Filtros"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"h5",5),u["\u0275\u0275text"](7,"Acompa\xf1ante"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"mat-radio-group",6),u["\u0275\u0275listener"]("change",function(e){return t.changeCompanion({filter:"Acompa\xf1ante",value:e.value})}),u["\u0275\u0275elementStart"](9,"mat-radio-button",7),u["\u0275\u0275text"](10,"Si"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"mat-radio-button",8),u["\u0275\u0275text"](12,"No"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"h5",5),u["\u0275\u0275text"](14,"Origen"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"mat-form-field",9),u["\u0275\u0275elementStart"](16,"mat-label"),u["\u0275\u0275text"](17,"Filtrar por origen"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"mat-select",10),u["\u0275\u0275listener"]("selectionChange",function(e){return t.changeOrigin({filter:"Origen",value:e.value})}),u["\u0275\u0275template"](19,Bt,2,2,"mat-option",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"h5",5),u["\u0275\u0275text"](21,"Destino"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"mat-form-field",9),u["\u0275\u0275elementStart"](23,"mat-label"),u["\u0275\u0275text"](24,"Filtrar por destino"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"mat-select",10),u["\u0275\u0275listener"]("selectionChange",function(e){return t.changeDestination({filter:"Destino",value:e.value})}),u["\u0275\u0275template"](26,Rt,2,2,"mat-option",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"h5",5),u["\u0275\u0275text"](28,"Contrato(s)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"mat-form-field",9),u["\u0275\u0275elementStart"](30,"mat-label"),u["\u0275\u0275text"](31,"Filtrar por contrato"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"mat-select",10),u["\u0275\u0275listener"]("selectionChange",function(e){return t.changeContractNumber({filter:"Numero Contrato",value:e.value})}),u["\u0275\u0275template"](33,jt,2,2,"mat-option",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"mat-sidenav-content"),u["\u0275\u0275elementStart"](35,"mat-card"),u["\u0275\u0275elementStart"](36,"mat-card-content"),u["\u0275\u0275elementStart"](37,"div",12),u["\u0275\u0275template"](38,qt,3,2,"div",13),u["\u0275\u0275template"](39,Lt,1,0,"div",13),u["\u0275\u0275elementStart"](40,"div",14),u["\u0275\u0275elementStart"](41,"h4",15),u["\u0275\u0275text"](42,"Solicitudes "),u["\u0275\u0275elementStart"](43,"b",16),u["\u0275\u0275text"](44,"Canceladas"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](45," de Traslado de Pacientes "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](46,"h4",17),u["\u0275\u0275text"](47,"Contratos Vigentes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](48,Ut,2,1,"h5",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](49,$t,5,0,"div",19),u["\u0275\u0275template"](50,Ht,5,0,"div",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](51,Jt,11,5,"form",20),u["\u0275\u0275template"](52,Zt,49,16,"div",21),u["\u0275\u0275template"](53,tn,33,8,"div",22),u["\u0275\u0275elementStart"](54,"div",23),u["\u0275\u0275elementStart"](55,"mat-table",24),u["\u0275\u0275elementContainerStart"](56,25),u["\u0275\u0275template"](57,nn,2,0,"mat-header-cell",26),u["\u0275\u0275template"](58,an,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](59,28),u["\u0275\u0275template"](60,on,2,0,"mat-header-cell",26),u["\u0275\u0275template"](61,rn,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](62,29),u["\u0275\u0275template"](63,ln,2,0,"mat-header-cell",26),u["\u0275\u0275template"](64,cn,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](65,30),u["\u0275\u0275template"](66,mn,2,0,"mat-header-cell",26),u["\u0275\u0275template"](67,sn,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](68,31),u["\u0275\u0275template"](69,dn,2,0,"mat-header-cell",26),u["\u0275\u0275template"](70,un,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](71,32),u["\u0275\u0275template"](72,pn,2,0,"mat-header-cell",26),u["\u0275\u0275template"](73,fn,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](74,33),u["\u0275\u0275template"](75,hn,2,0,"mat-header-cell",26),u["\u0275\u0275template"](76,vn,2,1,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](77,34),u["\u0275\u0275template"](78,xn,2,0,"mat-header-cell",26),u["\u0275\u0275template"](79,gn,4,0,"mat-cell",27),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](80,bn,1,0,"mat-header-row",35),u["\u0275\u0275template"](81,Sn,1,0,"mat-row",36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](82,"mat-paginator",37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("perfectScrollbar",t.config),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("formControl",t.controlCompanion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",t.withCompanion),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",t.unaccompanied),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("formControl",t.controlOrigin),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.origins),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("formControl",t.controlDestination),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.destinations),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("formControl",t.controlNumberContract),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.contracts),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",t.cancel),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.cancel),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",t.unitMedic),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.cancel),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.cancel),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.cancel),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.solicitud),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.cancel),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("hidden",!t.cancel),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](25),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize)("length",t.length)("showFirstLastButtons",!0))},directives:[tt.TM,tt.JX,nt.$V,le.VQ,h.NgControlStatus,h.FormControlDirective,le.U0,V.KE,V.hX,N.gD,l.sg,tt.Rh,T.a8,T.dn,P.xw,P.Wh,l.O5,P.yH,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,Ze.NW,b.ey,T.kc,_.lW,ie.Hw,h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,O.Nt,h.DefaultValueAccessor,h.FormControlName,V.TO,he.wx,he.zY,he.By,he.nW,V.R9,he._g,he.M5,he.dp,he.DK,at.qn,at.HS,at.qH,z.ge,z.ev,z.XQ,z.Gk],pipes:[l.uU],styles:["[hidden][_ngcontent-%COMP%]{display:none!important}.example-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;flex:1}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:6px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.titles[_ngcontent-%COMP%]{color:#0d453c;margin:10px 0;font-weight:700}.example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),e}();function yn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo letras. "),u["\u0275\u0275elementEnd"]())}function wn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo letras. "),u["\u0275\u0275elementEnd"]())}function In(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo n\xfameros. "),u["\u0275\u0275elementEnd"]())}function Fn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",20),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.tipo," ")}}function kn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",6),u["\u0275\u0275elementStart"](1,"mat-form-field",7),u["\u0275\u0275elementStart"](2,"mat-label"),u["\u0275\u0275text"](3,"Tipo firma"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"mat-select",18),u["\u0275\u0275template"](5,Fn,2,2,"mat-option",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngForOf",n.types)}}var Dn=function(){var e=function(){function e(t,n,a,r){o(this,e),this.fb=t,this.dialogRef=n,this.usuarioService=a,this.firmService=r,this.unitId=0,this.pattern="^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1.]+( [a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1.]+)*$",this.types=[],this.types=[{value:"1",tipo:"Vo. Bo."},{value:"2",tipo:"Autoriza"}],this.createForm()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"getUnit",value:function(e){var t=this,n=!0;return this.usuarioService.unidadUsuario(e).subscribe(function(n){console.log(n.Data),t.unitId=n.Data.unidadMedId,t.firmObject.usuarioId=e,t.firmObject.unidadMedId=t.unitId,console.log(t.unitId,t.firmObject)},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({icon:"error",title:"Error",text:t.Mensaje,showConfirmButton:!0}),n=!1}}),n}},{key:"createForm",value:function(){this.formFirm=this.fb.group({nombre:["",h.Validators.compose([h.Validators.required,h.Validators.pattern(this.pattern)])],cargo:["",h.Validators.compose([h.Validators.required,h.Validators.pattern(this.pattern)])],matricula:["",h.Validators.compose([h.Validators.required,h.Validators.pattern("^([0-9])*$")])],tipo:["",h.Validators.compose([h.Validators.required])]})}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"saveFirm",value:function(){var e=this,t=localStorage.getItem("idUser");if(this.getUnit(t)){this.firmObject=this.formFirm.getRawValue();var n=this.formFirm.get("tipo").value;this.firmObject.tipo=parseInt(n.value,10),console.log(this.firmObject),x().fire({title:"Estas seguro de agregar estos datos",showCancelButton:!0,icon:"warning",confirmButtonColor:"#00b162",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Cancelar"}).then(function(t){t.value&&e.firmService.AgregarFirma(e.firmObject).subscribe(function(t){console.log(t.Mensaje),x().fire({position:"center",title:t.Mensaje,icon:"success",showConfirmButton:!0}),e.dialogRef.close(!0)},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:"Duplicado",text:t.Mensaje,icon:"error",showConfirmButton:!0})}})})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](I.so),u["\u0275\u0275directiveInject"](Ke.i),u["\u0275\u0275directiveInject"](fe.K))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-new-firm"]],decls:37,vars:6,consts:[[3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["align","center",2,"color","#003366","font-weight","bold"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end"],["appearance","outline"],["matInput","","placeholder","Nombre Completo","required","","autocomplete","off","formControlName","nombre"],[4,"ngIf"],["matInput","","placeholder","Cargo","autocomplete","off","required","","formControlName","cargo"],["matInput","","placeholder","Matricula","autocomplete","off","required","","formControlName","matricula"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end",4,"ngIf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",2,"padding-right","24px","padding-left","24px"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["aria-label","Exampl"],["required","","formControlName","tipo"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"form",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"mat-card"),u["\u0275\u0275elementStart"](5,"mat-card-title",4),u["\u0275\u0275text"](6,"Agregar nueva firma "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-card-content"),u["\u0275\u0275elementStart"](8,"div",5),u["\u0275\u0275elementStart"](9,"div",6),u["\u0275\u0275elementStart"](10,"mat-form-field",7),u["\u0275\u0275elementStart"](11,"mat-label"),u["\u0275\u0275text"](12,"Nombre Completo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](13,"input",8),u["\u0275\u0275template"](14,yn,2,0,"mat-error",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",6),u["\u0275\u0275elementStart"](16,"mat-form-field",7),u["\u0275\u0275elementStart"](17,"mat-label"),u["\u0275\u0275text"](18,"Cargo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](19,"input",10),u["\u0275\u0275template"](20,wn,2,0,"mat-error",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",6),u["\u0275\u0275elementStart"](22,"mat-form-field",7),u["\u0275\u0275elementStart"](23,"mat-label"),u["\u0275\u0275text"](24,"Matricula"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](25,"input",11),u["\u0275\u0275template"](26,In,2,0,"mat-error",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](27,kn,6,1,"div",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",13),u["\u0275\u0275elementStart"](29,"div",14),u["\u0275\u0275elementStart"](30,"button",15),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275text"](31,"Cancelar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"div",14),u["\u0275\u0275elementStart"](33,"button",16),u["\u0275\u0275listener"]("click",function(){return t.saveFirm()}),u["\u0275\u0275elementStart"](34,"mat-icon",17),u["\u0275\u0275text"](35,"save"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](36," Guardar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("formGroup",t.formFirm),u["\u0275\u0275advance"](14),u["\u0275\u0275property"]("ngIf",t.formFirm.controls.nombre.hasError("pattern")&&t.formFirm.controls.nombre.touched),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.formFirm.controls.cargo.hasError("pattern")&&t.formFirm.controls.cargo.touched),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.formFirm.controls.matricula.hasError("pattern")&&t.formFirm.controls.matricula.touched),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.types),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",t.formFirm.invalid))},directives:[h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,I.xY,P.xw,P.yH,T.a8,T.n5,T.dn,P.Wh,V.KE,V.hX,O.Nt,h.DefaultValueAccessor,h.RequiredValidator,h.NgControlStatus,h.FormControlName,l.O5,I.H8,_.lW,ie.Hw,V.TO,N.gD,l.sg,b.ey],styles:[""]}),e}(),Mn=function(){var e=function(){function e(){o(this,e)}return i(e,[{key:"transform",value:function(e){return 1===e?"Vo. Bo.":"Autoriza"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"returnTypeFirm",type:e,pure:!0}),e}();function Pn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo letras. "),u["\u0275\u0275elementEnd"]())}function Vn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo letras. "),u["\u0275\u0275elementEnd"]())}function Nn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-error"),u["\u0275\u0275text"](1," Ingresa solo n\xfameros. "),u["\u0275\u0275elementEnd"]())}function On(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",19),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.tipo," ")}}var _n=function(){var e=function(){function e(t,n,a,r,i){o(this,e),this.fb=t,this.dialogRef=n,this.usuarioService=a,this.firmService=r,this.data=i,this.unitId=0,this.pattern="^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1]+( [a-zA-Z_\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1]+)*$",this.types=[{value:"1",tipo:"Vo. Bo."},{value:"2",tipo:"Autoriza"}],this.changeDetect=!1,this.createForm()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"createForm",value:function(){this.formFirm=this.fb.group({nombre:["",h.Validators.compose([h.Validators.required,h.Validators.pattern(this.pattern)])],cargo:["",h.Validators.compose([h.Validators.required,h.Validators.pattern(this.pattern)])],tipo:["",h.Validators.compose([h.Validators.required])],matricula:["",h.Validators.compose([h.Validators.required,h.Validators.pattern("^([0-9])*$")])]}),this.formFirm.patchValue(this.data.firm);var e=new Mn;this.formFirm.controls.tipo.setValue(e.transform(this.data.firm.tipo))}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"compareFn",value:function(e,t){return e.tipo===t}},{key:"changeSelect",value:function(){this.changeDetect=!0}},{key:"editFirm",value:function(){var e=this;x().fire({title:"Estas seguro de agregar estos datos",showCancelButton:!0,icon:"warning",confirmButtonColor:"#00b162",cancelButtonColor:"#d33",confirmButtonText:"Enviar",cancelButtonText:"Cancelar"}).then(function(t){if(t.value){e.firmObj=e.formFirm.getRawValue();var n=e.formFirm.get("tipo").value;e.firmObj.tipo=parseInt(n.value,10),e.changeDetect||delete e.firmObj.tipo;var a="";e.data.firm.matricula!==e.firmObj.matricula&&(a="si");var o=localStorage.getItem("idUser");e.firmService.UpdateFirm(e.firmObj,e.data.firm.id,e.data.firm.unidadMedId.toString(),a,o).subscribe(function(t){x().fire({position:"center",title:t.Mensaje,icon:"success",showConfirmButton:!0}),console.log(t.Data),e.dialogRef.close(!0)},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:"Error",text:t.Mensaje,icon:"error",showConfirmButton:!0})}})}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](I.so),u["\u0275\u0275directiveInject"](Ke.i),u["\u0275\u0275directiveInject"](fe.K),u["\u0275\u0275directiveInject"](I.WI))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-edit-firm"]],decls:42,vars:7,consts:[["mat-dialog-content",""],[3,"formGroup"],["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["align","center",2,"color","#003366","font-weight","bold"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end"],["appearance","outline"],["matInput","","placeholder","Nombre Completo","required","","autocomplete","off","formControlName","nombre"],[4,"ngIf"],["matInput","","placeholder","Cargo","autocomplete","off","required","","formControlName","cargo"],["matInput","","placeholder","Matricula","autocomplete","off","required","","formControlName","matricula"],["required","","formControlName","tipo",3,"compareWith","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayout","row wrap","fxLayoutAlign","end center","align","end",2,"padding-right","24px","padding-left","24px"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["aria-label","Exampl"],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"form",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"mat-card"),u["\u0275\u0275elementStart"](5,"mat-card-title",4),u["\u0275\u0275text"](6,"Editar firma "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"mat-card-content"),u["\u0275\u0275elementStart"](8,"div",5),u["\u0275\u0275elementStart"](9,"div",6),u["\u0275\u0275elementStart"](10,"mat-form-field",7),u["\u0275\u0275elementStart"](11,"mat-label"),u["\u0275\u0275text"](12,"Nombre Completo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](13,"input",8),u["\u0275\u0275template"](14,Pn,2,0,"mat-error",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",6),u["\u0275\u0275elementStart"](16,"mat-form-field",7),u["\u0275\u0275elementStart"](17,"mat-label"),u["\u0275\u0275text"](18,"Cargo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](19,"input",10),u["\u0275\u0275template"](20,Vn,2,0,"mat-error",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",6),u["\u0275\u0275elementStart"](22,"mat-form-field",7),u["\u0275\u0275elementStart"](23,"mat-label"),u["\u0275\u0275text"](24,"Matricula"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](25,"input",11),u["\u0275\u0275template"](26,Nn,2,0,"mat-error",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",6),u["\u0275\u0275elementStart"](28,"mat-form-field",7),u["\u0275\u0275elementStart"](29,"mat-label"),u["\u0275\u0275text"](30,"Tipo firma"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"mat-select",12),u["\u0275\u0275listener"]("selectionChange",function(){return t.changeSelect()}),u["\u0275\u0275template"](32,On,2,2,"mat-option",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"div",14),u["\u0275\u0275elementStart"](34,"div",15),u["\u0275\u0275elementStart"](35,"button",16),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275text"](36,"Cancelar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"div",15),u["\u0275\u0275elementStart"](38,"button",17),u["\u0275\u0275listener"]("click",function(){return t.editFirm()}),u["\u0275\u0275elementStart"](39,"mat-icon",18),u["\u0275\u0275text"](40,"edit "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](41," Editar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",t.formFirm),u["\u0275\u0275advance"](13),u["\u0275\u0275property"]("ngIf",t.formFirm.controls.nombre.hasError("pattern")&&t.formFirm.controls.nombre.touched),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.formFirm.controls.cargo.hasError("pattern")&&t.formFirm.controls.cargo.touched),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.formFirm.controls.matricula.hasError("pattern")&&t.formFirm.controls.matricula.touched),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("compareWith",t.compareFn),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.types),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("disabled",!t.formFirm.dirty))},directives:[I.xY,h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,P.xw,P.yH,T.a8,T.n5,T.dn,P.Wh,V.KE,V.hX,O.Nt,h.DefaultValueAccessor,h.RequiredValidator,h.NgControlStatus,h.FormControlName,l.O5,N.gD,l.sg,I.H8,_.lW,ie.Hw,V.TO,b.ey],styles:[""]}),e}(),An=function(){var e=function(){function e(){o(this,e)}return i(e,[{key:"transform",value:function(e){return e?"Inactivar":"Activar"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"returnConditionFirm",type:e,pure:!0}),e}(),Bn=function(){var e=function(){function e(){o(this,e)}return i(e,[{key:"transform",value:function(e){return e?{text:"Activo",color:"#09b107"}:{text:"Inactivo",color:"#d60017"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"returnStateFirm",type:e,pure:!0}),e}();function Rn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Nombre"),u["\u0275\u0275elementEnd"]())}function jn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.nombre," ")}}function Tn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Cargo"),u["\u0275\u0275elementEnd"]())}function zn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.cargo,"")}}function qn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Matricula"),u["\u0275\u0275elementEnd"]())}function Ln(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.matricula)}}function Un(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Tipo de firma"),u["\u0275\u0275elementEnd"]())}function $n(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"returnTypeFirm"),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("",u["\u0275\u0275pipeBind1"](2,1,n.tipo)," ")}}function Hn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Estado"),u["\u0275\u0275elementEnd"]())}function Yn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell",20),u["\u0275\u0275pipe"](1,"returnStateFirm"),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"returnStateFirm"),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275styleProp"]("color",u["\u0275\u0275pipeBind1"](1,3,n.estado).color),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("",u["\u0275\u0275pipeBind1"](3,5,n.estado).text," ")}}function Gn(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Acciones"),u["\u0275\u0275elementEnd"]())}function Wn(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",25),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().enableFirm(e)}),u["\u0275\u0275elementStart"](1,"mat-icon",22),u["\u0275\u0275text"](2,"person_off"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Qn(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",26),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().enableFirm(e)}),u["\u0275\u0275elementStart"](1,"mat-icon",22),u["\u0275\u0275text"](2,"person"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Xn(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",21),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().openDialogFirmEdit(e)}),u["\u0275\u0275elementStart"](2,"mat-icon",22),u["\u0275\u0275text"](3,"edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](4,Wn,3,0,"button",23),u["\u0275\u0275template"](5,Qn,3,0,"button",24),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",!a.estado),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",a.estado),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.estado)}}function Jn(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function Zn(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}var Kn=function(){var e=function(){function e(t,n){o(this,e),this.dialog=t,this.firmService=n,this.displayedColumns=["name","position","matric","type","state","action"],this.pageSize=20,this.size=[20,50,100],this.totalRecords=0,this.actualPage=1,this.dataSource=new z.by}return i(e,[{key:"ngOnInit",value:function(){this.unidadMedica=JSON.parse(localStorage.getItem("unit")),console.log(this.unidadMedica),this.paginator._intl.itemsPerPageLabel="Resultados por pagina",this.getAllFirm()}},{key:"getAllFirm",value:function(){var e=this;this.firmService.GetFirmsByUnit(this.unidadMedica.unidadMedId).subscribe(function(t){console.log(t),e.dataSource.data=t.Data,e.dataSource.paginator=e.paginator,e.totalRecords=e.dataSource.data.length})}},{key:"openDialogFirm",value:function(){var e=this;this.dialog.open(Dn,{height:"auto",width:"55%",disableClose:!0}).afterClosed().subscribe(function(t){t&&e.getAllFirm()})}},{key:"openDialogFirmEdit",value:function(e){var t=this;this.dialog.open(_n,{height:"auto",width:"55%",disableClose:!0,data:{firm:e}}).afterClosed().subscribe(function(e){e&&t.getAllFirm()})}},{key:"enableFirm",value:function(e){var t=this;console.log(e);var n=(new An).transform(e.estado),a=(new Mn).transform(e.tipo),o=JSON.parse(localStorage.getItem("unit"));console.log(o),x().fire({title:"\xbfDeseas "+n+"?",html:"A <b>"+e.nombre+"</b>,<br>Como: <b>"+a+"</b> <br>Para el:  <b>"+o.unidadMed.DenominacionUni+"</b> ",showCancelButton:!0,icon:"warning",confirmButtonColor:"#00b162",cancelButtonColor:"#d33",confirmButtonText:n,cancelButtonText:"Cancelar"}).then(function(n){if(n.value){e.estado||(e.estado=!1);var a=localStorage.getItem("idUser");t.firmService.EnableFirm(e.id,e.estado.toString(),e.unidadMedId.toString(),a).subscribe(function(e){x().fire({position:"center",title:e.Mensaje,icon:"success",showConfirmButton:!0}),console.log(e.Data),t.getAllFirm()},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:"Error",text:t.Mensaje,icon:"error",showConfirmButton:!0})}})}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.uw),u["\u0275\u0275directiveInject"](fe.K))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-firmas"]],viewQuery:function(e,t){var n;(1&e&&u["\u0275\u0275viewQuery"](Ze.NW,7),2&e)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.paginator=n.first))},decls:35,vars:7,consts:[["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["align","center",2,"color","#003366","font-weight","bold"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100","align","end"],["mat-raised-button","","color","primary",3,"click"],["aria-label","Exampl"],[1,"responsive-table"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","position"],["matColumnDef","matric"],["matColumnDef","type"],["matColumnDef","state"],["style","font-weight: bold",3,"color",4,"matCellDef"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[2,"font-weight","bold"],["mat-icon-button","","color","accent",3,"disabled","click"],["aria-label","Icon"],["mat-icon-button","","style","color: #d60017",3,"click",4,"ngIf"],["mat-icon-button","","style","color: #1E88E5",3,"click",4,"ngIf"],["mat-icon-button","",2,"color","#d60017",3,"click"],["mat-icon-button","",2,"color","#1E88E5",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"mat-card"),u["\u0275\u0275elementStart"](3,"mat-card-title",2),u["\u0275\u0275text"](4,"Firmas autorizadas para las solicitudes de traslado de pacientes "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"mat-card-content"),u["\u0275\u0275elementStart"](6,"div",0),u["\u0275\u0275elementStart"](7,"div",3),u["\u0275\u0275elementStart"](8,"button",4),u["\u0275\u0275listener"]("click",function(){return t.openDialogFirm()}),u["\u0275\u0275elementStart"](9,"mat-icon",5),u["\u0275\u0275text"](10,"add_circle"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](11," Agregar firma "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",6),u["\u0275\u0275elementStart"](13,"mat-table",7),u["\u0275\u0275elementContainerStart"](14,8),u["\u0275\u0275template"](15,Rn,2,0,"mat-header-cell",9),u["\u0275\u0275template"](16,jn,2,1,"mat-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](17,11),u["\u0275\u0275template"](18,Tn,2,0,"mat-header-cell",9),u["\u0275\u0275template"](19,zn,2,1,"mat-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](20,12),u["\u0275\u0275template"](21,qn,2,0,"mat-header-cell",9),u["\u0275\u0275template"](22,Ln,2,1,"mat-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](23,13),u["\u0275\u0275template"](24,Un,2,0,"mat-header-cell",9),u["\u0275\u0275template"](25,$n,3,3,"mat-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](26,14),u["\u0275\u0275template"](27,Hn,2,0,"mat-header-cell",9),u["\u0275\u0275template"](28,Yn,4,7,"mat-cell",15),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](29,16),u["\u0275\u0275template"](30,Gn,2,0,"mat-header-cell",9),u["\u0275\u0275template"](31,Xn,6,3,"mat-cell",10),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](32,Jn,1,0,"mat-header-row",17),u["\u0275\u0275template"](33,Zn,1,0,"mat-row",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](34,"mat-paginator",19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](13),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](19),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("pageSizeOptions",t.size)("pageSize",t.pageSize)("length",t.totalRecords)("showFirstLastButtons",!0))},directives:[P.xw,P.yH,T.a8,T.n5,T.dn,_.lW,ie.Hw,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,Ze.NW,z.ge,z.ev,l.O5,z.XQ,z.Gk],pipes:[Mn,Bn],styles:[""]}),e}(),ea=function(){var e=function(){function e(t){o(this,e),this.http=t}return i(e,[{key:"AddBitacoraUsuarioPuesto",value:function(e,t,n){var a=(new F.LE).set("status",t).set("roleId",n);return this.http.post("".concat(k.N.host,"/usuarioPuesto/bitacora"),e,{params:a}).pipe((0,D.U)(function(e){return e}))}},{key:"GetTipoModificaciones",value:function(e){var t=(new F.LE).set("notId",e);return this.http.get("".concat(k.N.host,"/usuarios/tipo/modificacion"),{params:t}).pipe((0,D.U)(function(e){return e}))}},{key:"UnsuscribeUsuarioPuesto",value:function(e,t){var n=(new F.LE).set("idUser",t);return this.http.put("".concat(k.N.host,"/usuarios/unsuscribe"),e,{params:n}).pipe((0,D.U)(function(e){return e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](F.eN))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function ta(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-option",14),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.tipo," ")}}var na=function(){var e=function(){function e(t,n,a){o(this,e),this.usuarioPuesto=t,this.fb=n,this.dialogRef=a}return i(e,[{key:"ngOnInit",value:function(){this.consultTipoModificaciones(),this.form=this.fb.group({tipoModificacion:[null,h.Validators.compose([h.Validators.required])],justificacion:[null,h.Validators.compose([h.Validators.required,h.Validators.minLength(20)])]})}},{key:"consultTipoModificaciones",value:function(){var e=this;this.usuarioPuesto.GetTipoModificaciones("61f1a754d7be0a2b052e887e").subscribe(function(t){console.log(t.Data),e.tiposModificaciones=t.Data})}},{key:"onSubmit",value:function(){var e=this;x().fire({title:"Confirmaci\xf3n de baja",text:"\xbfEstas seguro de realizar esta baja?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, dar de baja",cancelButtonText:"Cancelar",reverseButtons:!0}).then(function(t){t.isConfirmed&&e.dialogRef.close(e.form.value)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](ea),u["\u0275\u0275directiveInject"](h.FormBuilder),u["\u0275\u0275directiveInject"](I.so))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dialog-delete-user"]],decls:23,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],["fxLayout","row wrap"],["fxFlex.gt-sm","95","fxFlex.gt-xs","95","fxFlex","80"],["appearance","outline"],["formControlName","tipoModificacion"],[3,"value",4,"ngFor","ngForOf"],[2,"color","crimson"],["fxFlex.gt-sm","95","fxFlex.gt-xs","95","fxFlex","80",1,"m-t-15"],["matInput","","formControlName","justificacion"],["align","end"],["mat-stroked-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"h2",0),u["\u0275\u0275text"](1,"Selecciona el tipo de baja"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](2,"mat-dialog-content",1),u["\u0275\u0275elementStart"](3,"form",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"mat-form-field",5),u["\u0275\u0275elementStart"](7,"mat-label"),u["\u0275\u0275text"](8,"Selecciona"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"mat-select",6),u["\u0275\u0275template"](10,ta,2,2,"mat-option",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"mat-hint",8),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",9),u["\u0275\u0275elementStart"](14,"mat-form-field",5),u["\u0275\u0275elementStart"](15,"mat-label"),u["\u0275\u0275text"](16,"Escribe la justificaci\xf3n"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](17,"textarea",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"mat-dialog-actions",11),u["\u0275\u0275elementStart"](19,"button",12),u["\u0275\u0275text"](20,"Cancelar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"button",13),u["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),u["\u0275\u0275text"](22,"Aceptar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("formGroup",t.form),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngForOf",t.tiposModificaciones),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==t.form.get("tipoModificacion").value?null:t.form.get("tipoModificacion").value.descripcion),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("disabled",t.form.invalid))},directives:[I.uh,I.xY,h["\u0275NgNoValidate"],h.NgControlStatusGroup,h.FormGroupDirective,P.xw,P.yH,V.KE,V.hX,N.gD,h.NgControlStatus,h.FormControlName,l.sg,V.bx,O.Nt,h.DefaultValueAccessor,I.H8,_.lW,I.ZT,b.ey],styles:[""]}),e}(),aa=function(e,t,n,a){return new(n||(n=Promise))(function(o,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function l(e){try{c(a.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}c((a=a.apply(e,t||[])).next())})};function oa(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h2",14),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.unitMedic.unidadMed.DenominacionUni)}}function ra(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Nombre"),u["\u0275\u0275elementEnd"]())}function ia(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate3"]("",n.user.Usuario.Persona.Nombre," ",n.user.Usuario.Persona.ApellidoPat," ",n.user.Usuario.Persona.ApellidoMat,"")}}function la(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Puesto"),u["\u0275\u0275elementEnd"]())}function ca(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.user.PuestoOrganigrama.catalogoPuesto.Puesto)}}function ma(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Departamento"),u["\u0275\u0275elementEnd"]())}function sa(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.user.PuestoOrganigrama.organigramaUnidad.departamento.Nombre)}}function da(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Unidad"),u["\u0275\u0275elementEnd"]())}function ua(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.unitMedic.unidadMed.DenominacionUni)}}function pa(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Usuario"),u["\u0275\u0275elementEnd"]())}function fa(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",17),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().ValidateUser(e)}),u["\u0275\u0275text"](1," Validar "),u["\u0275\u0275elementEnd"]()}}function ha(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275template"](1,fa,2,0,"button",15),u["\u0275\u0275elementStart"](2,"button",16),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().openDialog(e)}),u["\u0275\u0275text"](3,"Baja"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.user.Valid)}}function va(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function xa(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}var ga=function(){var e=function(){function e(t,n,a){o(this,e),this.usuarioService=t,this.usaurioP=n,this.dialog=a,this.displayedColumns=["nameTras","positionTras","departmentTras","unitMedic","action"],this.unitMedic=JSON.parse(localStorage.getItem("unit")),console.log(this.unitMedic),this.userId=JSON.parse(localStorage.getItem("user")),this.consultUsers(this.userId.Usuario.Id),console.log(this.userId.Usuario.Id)}return i(e,[{key:"consultUsers",value:function(e){var t=this;this.usuarioService.ConsultUsersByDepartment(this.unitMedic.id,e).subscribe(function(e){t.dataSource=new z.by(e.Data),console.log(e.Data)})}},{key:"ngOnInit",value:function(){}},{key:"ValidateUser",value:function(e){return aa(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n={usuarioModificadoId:e.user.Id,usuarioModificanteId:this.userId.Id,tipoModificacionId:"61f1a754d7be0a2b052e887e"},x().fire({title:"Validaci\xf3n de usuario",html:"Estas validando que: <b>".concat(e.user.Usuario.Persona.Nombre," ").concat(e.user.Usuario.Persona.ApellidoPat,".</b><br>\n       Pertenece al departamento: <b>").concat(e.user.PuestoOrganigrama.organigramaUnidad.departamento.Nombre,".</b><br>\n       Con el puesto: <b>").concat(e.user.PuestoOrganigrama.catalogoPuesto.Puesto,".</b>"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",reverseButtons:!0,confirmButtonText:"Si, validar"}).then(function(e){e.isConfirmed&&a.example(n)});case 2:case"end":return t.stop()}},t,this)}))}},{key:"example",value:function(e){return aa(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("nuevo swal"),t.next=3,x().fire({title:"Selecciona un rol",input:"select",allowOutsideClick:!1,inputOptions:{"614ca03ed7be0a0b8e27fca4":"Capturista de vales de traslado"},inputPlaceholder:"Selecciona",showCancelButton:!0,inputValidator:function(t){return new Promise(function(a){""!==t?(console.log("seleccionado",t),n.usaurioP.AddBitacoraUsuarioPuesto(e,"true",t).subscribe(function(e){n.consultUsers(n.userId.Usuario.Id),x().fire("Validado","Este usuario ha sido validado.","success")},function(e){""===e.error&&void 0===e.error||x().fire({position:"center",title:"Error",text:"No se pudo descargar la plantilla",icon:"error",showConfirmButton:!0})}),a("")):a("Necesitas elegi un puesto")})}});case 3:case"end":return t.stop()}},t)}))}},{key:"openDialog",value:function(e){var t=this;console.log(e),console.log(e.user.Usuario.Id,"weeeee"),this.dialog.open(na,{height:"auto",width:"55%",disableClose:!0}).afterClosed().subscribe(function(n){n&&t.usaurioP.UnsuscribeUsuarioPuesto({usuarioModificadoId:e.user.Id,usuarioModificanteId:t.userId.Id,tipoModificacionId:n.tipoModificacion.id,comentario:n.justificacion},e.user.Usuario.Id).subscribe(function(e){console.log(e.Data),x().fire("Correcto","Este usuario se ha dado de baja.","success"),t.consultUsers(t.userId.Usuario.Id)},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!0})}})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](Ke.i),u["\u0275\u0275directiveInject"](ea),u["\u0275\u0275directiveInject"](I.uw))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-transfer-manager"]],decls:26,vars:4,consts:[[1,"centerText","m-b-0"],[2,"color","#175d6b"],["class","centerText m-t-0 m-b-0","style","color: #175d6b",4,"ngIf"],[1,"responsive-table","mat-elevation-z8","customTable"],[3,"dataSource"],["matColumnDef","nameTras"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","positionTras"],["matColumnDef","departmentTras"],["matColumnDef","unitMedic"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"centerText","m-t-0","m-b-0",2,"color","#175d6b"],["class","m-r-10","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",1,"m-r-10",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"h2",0),u["\u0275\u0275text"](2,"Configurar permisos para el modulo de "),u["\u0275\u0275elementStart"](3,"span",1),u["\u0275\u0275text"](4,"solicitudes de traslados"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](5,oa,2,1,"h2",2),u["\u0275\u0275elementStart"](6,"mat-card-content"),u["\u0275\u0275elementStart"](7,"div",3),u["\u0275\u0275elementStart"](8,"mat-table",4),u["\u0275\u0275elementContainerStart"](9,5),u["\u0275\u0275template"](10,ra,2,0,"mat-header-cell",6),u["\u0275\u0275template"](11,ia,2,3,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](12,8),u["\u0275\u0275template"](13,la,2,0,"mat-header-cell",6),u["\u0275\u0275template"](14,ca,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](15,9),u["\u0275\u0275template"](16,ma,2,0,"mat-header-cell",6),u["\u0275\u0275template"](17,sa,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](18,10),u["\u0275\u0275template"](19,da,2,0,"mat-header-cell",6),u["\u0275\u0275template"](20,ua,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](21,11),u["\u0275\u0275template"](22,pa,2,0,"mat-header-cell",6),u["\u0275\u0275template"](23,ha,4,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](24,va,1,0,"mat-header-row",12),u["\u0275\u0275template"](25,xa,1,0,"mat-row",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",t.unitMedic),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](16),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[T.a8,l.O5,T.dn,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,z.ge,z.ev,_.lW,z.XQ,z.Gk],styles:[".customTable .mat-header-cell{justify-content:center!important;font-weight:700;color:#fff!important;background-color:#1f594b;padding:0 0 0 5px!important;border-right-color:#fff!important;border-right-width:1px;border-right-style:solid;font-size:11pt}.customTable .mat-table .mat-column-config{flex:0 0 9%;justify-content:center!important;padding-left:0!important}.customTable .mat-table .mat-column-unitMedic{flex:0 0 13%;justify-content:center!important}.customTable .mat-table .mat-column-action{flex:0 0 16%;justify-content:center!important}.customTable .mat-table mat-header-row,.customTable .mat-table mat-row{padding-right:0;padding-left:0;border-bottom-color:#2f3d4a;border-top-color:#2f3d4a;border-left:1px solid #2f3d4a!important}.customTable .mat-table mat-cell{padding-left:5px!important;padding-right:0!important;border-right-color:#2f3d4a!important;border-right-width:1px;border-right-style:solid}.customTable .mat-row:nth-child(2n){background-color:#fff}.customTable .mat-row:nth-child(odd){background-color:#e2eade}.example-tooltip-transfer{background:#00aaa0}"],encapsulation:2}),e}(),ba=function(){var e=function(){function e(t){o(this,e),this._router=t,this.permisos=[]}return i(e,[{key:"canActivate",value:function(){return this.havePermission()}},{key:"havePermission",value:function(){return this.permisos=JSON.parse(localStorage.getItem("permisos")),0!==this.permisos.filter(function(e){return"Administrar Permisos"===e||"Firmas"===e}).length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](m.F0))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Sa=function(){var e=function(){function e(t){o(this,e),this.httpClient=t}return i(e,[{key:"ConsultModules",value:function(e){var t=(new F.LE).set("menuParent",e);return this.httpClient.get("".concat(k.N.host,"/menu/module"),{params:t}).pipe((0,D.U)(function(e){return e}))}},{key:"ConsultActionsByModule",value:function(e,t){var n=(new F.LE).set("moduleId",e).set("userId",t);return this.httpClient.get("".concat(k.N.host,"/module/actions"),{params:n}).pipe((0,D.U)(function(e){return e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](F.eN))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Ca(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Funcion"),u["\u0275\u0275elementEnd"]())}function Ea(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.action.name)}}function ya(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Descripcion"),u["\u0275\u0275elementEnd"]())}function wa(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.action.description)}}function Ia(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Permiso"),u["\u0275\u0275elementEnd"]())}function Fa(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",15),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"]().changePermit(e)}),u["\u0275\u0275text"](1,"Activar "),u["\u0275\u0275elementEnd"]()}}function ka(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"button",16),u["\u0275\u0275text"](1,"Desactivar "),u["\u0275\u0275elementEnd"]())}function Da(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275template"](1,Fa,2,0,"button",13),u["\u0275\u0275template"](2,ka,2,0,"button",14),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.permit),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.permit)}}function Ma(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function Pa(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}var Va=function(){var e=function(){function e(t,n,a){o(this,e),this.dialogRef=t,this.data=n,this.modulesService=a,this.displayedColumns=["name","description","edit"]}return i(e,[{key:"ngOnInit",value:function(){this.consultModules()}},{key:"consultModules",value:function(){var e=this;this.modulesService.ConsultActionsByModule(this.data.moduleId,this.data.user.Id).subscribe(function(t){e.dataSource=new z.by(t.Data),console.log(t.Data)})}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"changePermit",value:function(e){console.log(e);var t=!0!==e.permit?"Activar":"Desactivar",n=!0!==e.permit?"De activar el permiso de la funcion":"De desactivar el permiso de la funcion";x().fire({title:"\xbfEstas seguro?",text:n+": "+e.action.name,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, "+t,reverseButtons:!0,cancelButtonText:"Cancelar"}).then(function(e){e.isConfirmed&&x().fire("Deleted!","Your file has been deleted.","success")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.so),u["\u0275\u0275directiveInject"](I.WI),u["\u0275\u0275directiveInject"](Sa))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-permit-module"]],decls:22,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"responsive-table","mat-elevation-z8"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["matColumnDef","edit"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","",1,"endAlign"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"h1",0),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"uppercase"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",1),u["\u0275\u0275elementStart"](4,"div",2),u["\u0275\u0275elementStart"](5,"mat-table",3),u["\u0275\u0275elementContainerStart"](6,4),u["\u0275\u0275template"](7,Ca,2,0,"mat-header-cell",5),u["\u0275\u0275template"](8,Ea,2,1,"mat-cell",6),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](9,7),u["\u0275\u0275template"](10,ya,2,0,"mat-header-cell",5),u["\u0275\u0275template"](11,wa,2,1,"mat-cell",6),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](12,8),u["\u0275\u0275template"](13,Ia,2,0,"mat-header-cell",5),u["\u0275\u0275template"](14,Da,3,2,"mat-cell",6),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](15,Ma,1,0,"mat-header-row",9),u["\u0275\u0275template"](16,Pa,1,0,"mat-row",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",11),u["\u0275\u0275elementStart"](18,"button",12),u["\u0275\u0275listener"]("click",function(){return t.onNoClick()}),u["\u0275\u0275elementStart"](19,"mat-icon"),u["\u0275\u0275text"](20,"cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](21," Cancelar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"]("Agregar permisos al apartado de ",u["\u0275\u0275pipeBind1"](2,4,t.data.nameModule),""),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](10),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[I.uh,I.xY,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,I.H8,_.lW,ie.Hw,z.ge,z.ev,l.O5,z.XQ,z.Gk],pipes:[l.gd],styles:[".mat-table[_ngcontent-%COMP%]   .mat-column-add[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-all[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-delete[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-edit[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   .mat-column-view[_ngcontent-%COMP%]{justify-content:center!important}.mat-table[_ngcontent-%COMP%]   .mat-column-all[_ngcontent-%COMP%]{flex:0 0 8%}"]}),e}(),Na=r(79572);function Oa(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h2",19),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.unitMedic)}}function _a(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h3",20),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate3"]("",n.user.Usuario.Persona.Nombre," ",n.user.Usuario.Persona.ApellidoPat," ",n.user.Usuario.Persona.ApellidoMat,"")}}function Aa(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Apartado"),u["\u0275\u0275elementEnd"]())}function Ba(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](n.modulo.name)}}function Ra(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Administrar"),u["\u0275\u0275elementEnd"]())}function ja(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275elementStart"](1,"button",21),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().addPermitModule(e.modulo.name,e.moduloId)}),u["\u0275\u0275elementStart"](2,"mat-icon"),u["\u0275\u0275text"](3,"manage_accounts"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Ta(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function za(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}var qa=function(){return["/traslado/manager"]},La=function(){var e=function(){function e(t,n,a,r){o(this,e),this.route=t,this.modulesService=n,this.dialog=a,this.usuarioService=r,this.unitMedic="",this.userId="",this.displayedColumns=["module","edit"]}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){e.unitMedic=t.unitMedic,e.userId=t.id}),this.consultModules(),this.consultUser()}},{key:"consultModules",value:function(){var e=this;this.modulesService.ConsultModules("61366fb1d7be0a40b654873d").subscribe(function(t){e.dataSource=new z.by(t.Data),console.log(t.Data)})}},{key:"consultUser",value:function(){var e=this;this.usuarioService.ConsultUSerByPosition(this.userId).subscribe(function(t){e.user=t.Data,console.log(t.Data)})}},{key:"addPermitModule",value:function(e,t){this.dialog.open(Va,{height:"auto",width:"80%",disableClose:!0,data:{user:this.user,nameModule:e,moduleId:t}}).afterClosed().subscribe(function(e){console.log("The dialog was closed")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](m.gz),u["\u0275\u0275directiveInject"](Sa),u["\u0275\u0275directiveInject"](I.uw),u["\u0275\u0275directiveInject"](Ke.i))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-view-permit-by-user"]],decls:31,vars:7,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center"],["mat-card-avatar","","fxFlex.gt-sm","5","fxFlex.gt-xs","100","fxFlex","100"],["mat-stroked-button","","color","warn",1,"m-l-10",3,"routerLink"],["aria-label","Example icon-button with a heart icon"],["fxFlex.gt-sm","95","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText","m-b-0"],[2,"color","#175d6b"],["class","centerText m-t-0 m-b-0","style","color: #175d6b",4,"ngIf"],["class","centerText m-t-0 m-b-0",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","center center","fxLayout.xs","column"],["fxFlex.gt-sm","65","fxFlex.gt-xs","100","fxFlex","100",1,"text-center"],["fxFlex.gt-sm","40","fxFlex.gt-xs","100","fxFlex","100",1,"responsive-table","mat-elevation-z8"],[3,"dataSource"],["matColumnDef","module"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","edit"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"centerText","m-t-0","m-b-0",2,"color","#175d6b"],[1,"centerText","m-t-0","m-b-0"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon","color","primary",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"div",0),u["\u0275\u0275elementStart"](2,"div",1),u["\u0275\u0275elementStart"](3,"button",2),u["\u0275\u0275elementStart"](4,"mat-icon",3),u["\u0275\u0275text"](5,"keyboard_return"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](6," Regresar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",4),u["\u0275\u0275elementStart"](8,"h2",5),u["\u0275\u0275text"](9,"Asignar o quitar permisos del modulo de "),u["\u0275\u0275elementStart"](10,"span",6),u["\u0275\u0275text"](11,"SOLICITUDES DE TRASLADOS"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](12,Oa,2,1,"h2",7),u["\u0275\u0275template"](13,_a,2,3,"h3",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"mat-card-content"),u["\u0275\u0275elementStart"](15,"div",9),u["\u0275\u0275elementStart"](16,"div",10),u["\u0275\u0275elementStart"](17,"span"),u["\u0275\u0275text"](18,"Habilitar permiso de Capturista de vales de traslado"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"mat-slide-toggle"),u["\u0275\u0275text"](20,"Slide me!"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",11),u["\u0275\u0275elementStart"](22,"mat-table",12),u["\u0275\u0275elementContainerStart"](23,13),u["\u0275\u0275template"](24,Aa,2,0,"mat-header-cell",14),u["\u0275\u0275template"](25,Ba,2,1,"mat-cell",15),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](26,16),u["\u0275\u0275template"](27,Ra,2,0,"mat-header-cell",14),u["\u0275\u0275template"](28,ja,4,0,"mat-cell",15),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](29,Ta,1,0,"mat-header-row",17),u["\u0275\u0275template"](30,za,1,0,"mat-row",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("routerLink",u["\u0275\u0275pureFunction0"](6,qa)),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",t.unitMedic),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.user),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("dataSource",t.dataSource),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[T.a8,P.xw,P.Wh,T.kc,P.yH,_.lW,m.rH,ie.Hw,l.O5,T.dn,Na.Rr,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,z.ge,z.ev,z.XQ,z.Gk],styles:[".mat-header-cell[_ngcontent-%COMP%]{justify-content:left!important;font-weight:700;font-size:11pt}.mat-table[_ngcontent-%COMP%]   .mat-column-edit[_ngcontent-%COMP%]{justify-content:center!important;flex:0 0 20%}.mat-table[_ngcontent-%COMP%]   .mat-column.module[_ngcontent-%COMP%]{justify-content:left!important}"]}),e}(),Ua=r(48243),$a=function(){var e=function(){function e(t){o(this,e),this.httpClient=t}return i(e,[{key:"ConsultAdministradoresUnidad",value:function(e,t){var n=(new F.LE).set("clvDele",e).set("roleId",t);return this.httpClient.get("".concat(k.N.host,"/traslados/administradores"),{params:n}).pipe((0,D.U)(function(e){return e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275inject"](F.eN))},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Ha(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Unidad"),u["\u0275\u0275elementEnd"]())}function Ya(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.unidad.DenominacionUni," ")}}function Ga(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Departamento"),u["\u0275\u0275elementEnd"]())}function Wa(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](a.regresaDato(n,"departamento"))}}function Qa(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Puesto"),u["\u0275\u0275elementEnd"]())}function Xa(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](a.regresaDato(n,"puesto"))}}function Ja(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Nombre"),u["\u0275\u0275elementEnd"]())}function Za(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",a.regresaDato(n,"usuario")," ")}}function Ka(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-header-cell"),u["\u0275\u0275text"](1,"Permisos"),u["\u0275\u0275elementEnd"]())}function eo(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",16),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).openDialogDepartment(e)}),u["\u0275\u0275elementStart"](1,"mat-icon"),u["\u0275\u0275text"](2,"add_moderator"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](3," Agregar "),u["\u0275\u0275elementEnd"]()}}function to(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"button",17),u["\u0275\u0275elementStart"](1,"mat-icon"),u["\u0275\u0275text"](2,"edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](3," Editar"),u["\u0275\u0275elementEnd"]())}function no(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"mat-cell"),u["\u0275\u0275template"](1,eo,4,0,"button",14),u["\u0275\u0275template"](2,to,4,0,"button",15),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!n.estado),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.estado)}}function ao(e,t){1&e&&u["\u0275\u0275element"](0,"mat-header-row")}function oo(e,t){1&e&&u["\u0275\u0275element"](0,"mat-row")}function ro(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",3),u["\u0275\u0275elementStart"](1,"mat-table",4),u["\u0275\u0275elementContainerStart"](2,5),u["\u0275\u0275template"](3,Ha,2,0,"mat-header-cell",6),u["\u0275\u0275template"](4,Ya,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](5,8),u["\u0275\u0275template"](6,Ga,2,0,"mat-header-cell",6),u["\u0275\u0275template"](7,Wa,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](8,9),u["\u0275\u0275template"](9,Qa,2,0,"mat-header-cell",6),u["\u0275\u0275template"](10,Xa,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](11,10),u["\u0275\u0275template"](12,Ja,2,0,"mat-header-cell",6),u["\u0275\u0275template"](13,Za,2,1,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275elementContainerStart"](14,11),u["\u0275\u0275template"](15,Ka,2,0,"mat-header-cell",6),u["\u0275\u0275template"](16,no,3,2,"mat-cell",7),u["\u0275\u0275elementContainerEnd"](),u["\u0275\u0275template"](17,ao,1,0,"mat-header-row",12),u["\u0275\u0275template"](18,oo,1,0,"mat-row",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("dataSource",n.dataSource),u["\u0275\u0275advance"](16),u["\u0275\u0275property"]("matHeaderRowDef",n.displayedColumns),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("matRowDefColumns",n.displayedColumns)}}var io=function(){var e=function(){function e(t,n){o(this,e),this.administradores=t,this.dialog=n,this.displayedColumns=["accion","unidad","departamento","puesto","nombre"],this.user=JSON.parse(localStorage.getItem("user")),this.consultarAdministradores()}return i(e,[{key:"ngOnInit",value:function(){}},{key:"consultarAdministradores",value:function(){var e=this;this.administradores.ConsultAdministradoresUnidad(this.user.PuestoOrganigrama.organigramaDelegacion.delegaciones.ClvDele,"614c9be1d7be0a7dcda60e33").subscribe(function(t){var n=t.Data.sort(function(e,t){return Number(t.estado)-Number(e.estado)});e.dataSource=n,console.log(e.dataSource)})}},{key:"regresaDato",value:function(e,t){return console.log(e),0!==Object.keys(e.datos).length?"departamento"===t?e.datos.puestoOrganigrama.organigramaUnidad.departamento.Nombre:"puesto"===t?e.datos.puestoOrganigrama.catalogoPuesto.Puesto:"usuario"===t&&""!=e.usuario.Id?e.usuario.Usuario.Persona.Nombre+" "+e.usuario.Usuario.Persona.ApellidoPat+" "+e.usuario.Usuario.Persona.ApellidoMat:"Aun sin registro":" "}},{key:"openDialogDepartment",value:function(e){var t;t=e.unidad.Id,this.dialog.open(Ua.d,{height:"auto",width:"60%",disableClose:!0,data:{unitMedId:t,UnitMed:"",clvDelegation:"",Delegation:"",puesto:!0}}).afterClosed().subscribe(function(e){""!==e&&console.log(e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"]($a),u["\u0275\u0275directiveInject"](I.uw))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-administrar-usuarios"]],decls:6,vars:1,consts:[[1,"centerText"],[2,"color","#003366","font-weight","bold"],["class","responsive-table adminUser",4,"ngIf"],[1,"responsive-table","adminUser"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","unidad"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","departamento"],["matColumnDef","puesto"],["matColumnDef","nombre"],["matColumnDef","accion"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","style","background-color: dodgerblue;",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",2,"background-color","dodgerblue"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"div",0),u["\u0275\u0275elementStart"](2,"mat-card-title",1),u["\u0275\u0275text"](3,"Asignaci\xf3n de administradores del modulo de traslados "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"mat-card-content"),u["\u0275\u0275template"](5,ro,19,3,"div",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",t.dataSource))},directives:[T.a8,T.n5,T.dn,l.O5,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,z.ge,z.ev,_.lW,ie.Hw,z.XQ,z.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}.adminUser[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-unidad[_ngcontent-%COMP%]{flex:0 0 20%;justify-content:left!important}.adminUser[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-departamento[_ngcontent-%COMP%]{flex:0 0 25%;justify-content:center!important}.adminUser[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-puesto[_ngcontent-%COMP%]{flex:0 0 20%;justify-content:center!important}.adminUser[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-nombre[_ngcontent-%COMP%]{flex:0 0 23%;justify-content:center!important}.adminUser[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-column-accion[_ngcontent-%COMP%]{flex:0 0 12%;justify-content:center!important}"]}),e}(),lo=r(63031);function co(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ngx-dropzone-preview",11),u["\u0275\u0275listener"]("removed",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().onRemove(e)}),u["\u0275\u0275elementStart"](1,"ngx-dropzone-label"),u["\u0275\u0275element"](2,"img",12),u["\u0275\u0275text"](3),u["\u0275\u0275pipe"](4,"number"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275property"]("removable",!0),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" (",u["\u0275\u0275pipeBind2"](4,2,a.size/1024/1024,".2")," MB) ")}}function mo(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",3),u["\u0275\u0275element"](1,"mat-progress-bar",13),u["\u0275\u0275elementEnd"]())}function so(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td"),u["\u0275\u0275elementStart"](2,"strong"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4),u["\u0275\u0275pipe"](5,"number"),u["\u0275\u0275elementStart"](6,"td"),u["\u0275\u0275elementStart"](7,"button",14),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().enviarArchivo()}),u["\u0275\u0275text"](8,"Cargar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"button",15),u["\u0275\u0275listener"]("click",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().onRemove(e)}),u["\u0275\u0275text"](10,"Seleccionar otro "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](null==a?null:a.name),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](5,2,(null==a?null:a.size)/1024/1024,".2")," MB ")}}var uo=function(){var t=function(){function t(e){o(this,t),this.ftpService=e,this.files=[],this.validado=!1}return i(t,[{key:"ngOnInit",value:function(){}},{key:"onSelect",value:function(t){var n;this.files.length<1&&(n=this.files).push.apply(n,e(t.addedFiles))}},{key:"onRemove",value:function(e){this.files.splice(this.files.indexOf(e),1),this.validado=!1}},{key:"enviarArchivo",value:function(){var e=this;this.validado=!0;var t=new FormData;t.append("file",this.files[0]),this.ftpService.CargarFolios(t).subscribe(function(t){x().fire({position:"center",title:t.Mensaje,text:"".concat(t.Data," folios"),icon:"success",showConfirmButton:!0}),e.validado=!1,e.files=[]},function(e){if(""!==e.error||void 0!==e.error){var t=e.error;x().fire({position:"center",title:t.Mensaje,icon:"error",showConfirmButton:!0})}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](f.k))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["app-cargar-ftp"]],decls:33,vars:6,consts:[[1,"example-card"],[1,"centerText"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["accept",".xlsx","matTooltip","Solo puedes seleccionar un archivo","matTooltipPosition","above","matTooltipClass","example-tooltip-red",1,"centerText",3,"multiple","disableClick","change"],[3,"removable","removed",4,"ngFor","ngForOf"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],[1,"table"],["width","30%"],["width","50%"],[4,"ngFor","ngForOf"],[3,"removable","removed"],["src","../assets/images/users/logoExcel.png","alt",""],["mode","query",1,"m-10"],["mat-raised-button","","color","primary",1,"m-l-10",3,"click"],["mat-raised-button","","color","warn",1,"m-l-10",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card",0),u["\u0275\u0275elementStart"](1,"mat-card-header",1),u["\u0275\u0275elementStart"](2,"mat-card-title"),u["\u0275\u0275text"](3,"Carga de folios TP01"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"mat-card-subtitle"),u["\u0275\u0275text"](5,'Este apartado solo acepta el reporte "GASTOS TP POR UNIDAD" que se genera en la plataforma SCACE.(http://11.1.21.70/scace/modules/reportes/gastos_tp_unidad/)'),u["\u0275\u0275element"](6,"br"),u["\u0275\u0275elementStart"](7,"strong"),u["\u0275\u0275text"](8,"*Nota:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"i"),u["\u0275\u0275text"](10,'No edites el archivo; En unidad selecciona "Todas" si tramitas TP01 de varias Unidades M\xe9dicas; La fecha inicial y final hace referencia a la fecha de cita por lo que se sugiere que la fecha inicial sea la fecha actual y la final sea 2 meses despues de la inicial.'),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"mat-card-content"),u["\u0275\u0275elementStart"](12,"div",2),u["\u0275\u0275elementStart"](13,"div",3),u["\u0275\u0275elementStart"](14,"ngx-dropzone",4),u["\u0275\u0275listener"]("change",function(e){return t.onSelect(e)}),u["\u0275\u0275elementStart"](15,"ngx-dropzone-label"),u["\u0275\u0275text"](16,"Haga clic o arrastra tu archivo aqui !!"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](17,co,5,5,"ngx-dropzone-preview",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](18,mo,2,0,"div",6),u["\u0275\u0275elementStart"](19,"div",3),u["\u0275\u0275elementStart"](20,"p"),u["\u0275\u0275text"](21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"table",7),u["\u0275\u0275elementStart"](23,"thead"),u["\u0275\u0275elementStart"](24,"tr"),u["\u0275\u0275elementStart"](25,"th",8),u["\u0275\u0275text"](26,"Nombre"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"th"),u["\u0275\u0275text"](28,"Tama\xf1o"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"th",9),u["\u0275\u0275text"](30,"Acciones"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"tbody"),u["\u0275\u0275template"](32,so,11,5,"tr",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](14),u["\u0275\u0275property"]("multiple",!1)("disableClick",t.files.length>0),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngForOf",t.files),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.validado),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Archivo para subir: ",null==t.files?null:t.files.length,""),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngForOf",t.files))},directives:[T.a8,T.dk,T.n5,T.$j,T.dn,P.xw,P.Wh,P.yH,lo._f,ge.gM,lo.Jj,l.sg,l.O5,lo.dt,ot.pW,_.lW],pipes:[l.JJ],styles:["ngx-dropzone:hover{border:2px dotted #0089e1}.example-tooltip-red{background:#b71c1c}"],encapsulation:2}),t}();function po(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",9),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"h5",10),u["\u0275\u0275text"](5,"Monto ejercido del contrato"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](6,"mat-progress-bar",11),u["\u0275\u0275elementStart"](7,"h2",12),u["\u0275\u0275text"](8),u["\u0275\u0275pipe"](9,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](3,3,n.devengo)),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("value",n.porcentajeDevengo),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](9,5,n.porcentajeDevengo/100,".2-2"))}}function fo(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",13),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function ho(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",9),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"h5",10),u["\u0275\u0275text"](4,"Total de solicitudes con acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"mat-progress-bar",14),u["\u0275\u0275elementStart"](6,"h2",12),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("",n.conAcompaniante," solicitudes"),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",100*n.porcentajeAcompanianteContrato),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](8,3,n.porcentajeAcompanianteContrato,".2-2"))}}function vo(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",13),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function xo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",9),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"h5",10),u["\u0275\u0275text"](4,"Unidad con mayor % de acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"mat-progress-bar",15),u["\u0275\u0275elementStart"](6,"h2",12),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.promedioAcompaniante.UnidadMedica.DenominacionUni),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",100*n.promedioAcompaniante.Promedio.Promedio),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](8,3,n.promedioAcompaniante.Promedio.Promedio,".2-2"))}}function go(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",13),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function bo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",9),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"h5",10),u["\u0275\u0275text"](4,"La unidad con mas traslados"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"mat-progress-bar",15),u["\u0275\u0275elementStart"](6,"h2",12),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.mayorSolicitud.unidad.DenominacionUni),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",100*n.mayorSolicitud.porcentaje),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](8,3,n.mayorSolicitud.porcentaje,".2-2"))}}function So(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",13),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function Co(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",2),u["\u0275\u0275elementStart"](1,"h3",3),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",4),u["\u0275\u0275elementStart"](4,"mat-card"),u["\u0275\u0275elementStart"](5,"mat-card-content",5),u["\u0275\u0275elementStart"](6,"h2"),u["\u0275\u0275text"](7,"Devengo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,po,10,8,"div",6),u["\u0275\u0275template"](9,fo,3,0,"div",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"mat-card"),u["\u0275\u0275elementStart"](11,"mat-card-content",5),u["\u0275\u0275elementStart"](12,"h2"),u["\u0275\u0275text"](13,"Con acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](14,ho,9,6,"div",6),u["\u0275\u0275template"](15,vo,3,0,"div",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"mat-card"),u["\u0275\u0275elementStart"](17,"mat-card-content",5),u["\u0275\u0275elementStart"](18,"h2"),u["\u0275\u0275text"](19,"Mas acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](20,xo,9,6,"div",6),u["\u0275\u0275template"](21,go,3,0,"div",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"mat-card"),u["\u0275\u0275elementStart"](23,"mat-card-content",5),u["\u0275\u0275elementStart"](24,"h2"),u["\u0275\u0275text"](25,"Mas traslados"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](26,bo,9,6,"div",6),u["\u0275\u0275template"](27,So,3,0,"div",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",7),u["\u0275\u0275elementStart"](29,"button",8),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().masDetalles(e)}),u["\u0275\u0275elementStart"](30,"mat-icon"),u["\u0275\u0275text"](31,"insert_chart_outlined"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](32," Detalles "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](a.contrato.NumeroContrato),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",a.devengo),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.devengo),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",a.conAcompaniante),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.conAcompaniante),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",a.promedioAcompaniante.Promedio.Promedio),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.promedioAcompaniante.Promedio.Promedio),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",a.mayorSolicitud.porcentaje),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!a.mayorSolicitud.porcentaje)}}var Eo=function(){var e=function(){function e(t,n){o(this,e),this.contrato=t,this.router=n,this.contratos=[]}return i(e,[{key:"ngOnInit",value:function(){this.consultarContratos()}},{key:"consultarContratos",value:function(){var e=this;this.contrato.ConsultarContratoSubTipo("5f587535d7be0a74bf7db093").subscribe(function(t){e.contratos=t.Data,console.log(e.contratos)})}},{key:"masDetalles",value:function(e){localStorage.setItem("devengoContrato",JSON.stringify(e)),this.router.navigateByUrl("/traslado/detalle/contrato")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](E.d),u["\u0275\u0275directiveInject"](m.F0))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-tablero-traslados"]],decls:6,vars:1,consts:[[1,"centerText","m-b-0"],["class","b-all","style","border-width: 4px;",4,"ngFor","ngForOf"],[1,"b-all",2,"border-width","4px"],[1,"font-bold","centerText"],[1,"card-group"],[1,"centerText"],[4,"ngIf"],[1,"centerText","m-b-15"],["mat-raised-button","","color","primary",3,"click"],[1,"m-0"],[1,"text-muted","m-t-0","m-b-10"],["mode","determinate",3,"value"],[1,"m-t-0","m-b-10"],[1,"m-t-0","m-b-10","text-muted"],["color","warn","mode","determinate",3,"value"],["color","accent","mode","determinate",3,"value"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-title"),u["\u0275\u0275elementStart"](2,"h2",0),u["\u0275\u0275text"](3,"Tablero de control para contratos de transporte subrogado"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"mat-card-content"),u["\u0275\u0275template"](5,Co,33,9,"div",1),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngForOf",t.contratos))},directives:[T.a8,T.n5,T.dn,l.sg,l.O5,_.lW,ie.Hw,ot.pW],pipes:[l.H9,l.Zx],styles:[""]}),e}(),yo=r(13464),wo=r(25233),Io=r(87065),Fo=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),ko=function(e,t,n){var a,o=[].concat(t),r=o.length,i=e.font,l=0;for(e.font=n.string,a=0;a<r;++a)l=Math.max(e.measureText(o[a]).width,l);return e.font=i,{height:r*n.lineHeight,width:l}};function Do(e,t){var n=t.x,a=t.y;if(null===n)return{x:0,y:-1};if(null===a)return{x:1,y:0};var o=e.x-n,r=e.y-a,i=Math.sqrt(o*o+r*r);return{x:i?o/i:0,y:i?r/i:-1}}function Mo(e,t,n){var a=0;return e<n.left?a|=1:e>n.right&&(a|=2),t<n.top?a|=8:t>n.bottom&&(a|=4),a}function Po(e,t){var n,a,o=t.anchor,r=e;return t.clamp&&(r=function(e,t){for(var n,a,o,r=e.x0,i=e.y0,l=e.x1,c=e.y1,m=Mo(r,i,t),s=Mo(l,c,t);m|s&&!(m&s);)8&(n=m||s)?(a=r+(l-r)*(t.top-i)/(c-i),o=t.top):4&n?(a=r+(l-r)*(t.bottom-i)/(c-i),o=t.bottom):2&n?(o=i+(c-i)*(t.right-r)/(l-r),a=t.right):1&n&&(o=i+(c-i)*(t.left-r)/(l-r),a=t.left),n===m?m=Mo(r=a,i=o,t):s=Mo(l=a,c=o,t);return{x0:r,x1:l,y0:i,y1:c}}(r,t.area)),"start"===o?(n=r.x0,a=r.y0):"end"===o?(n=r.x1,a=r.y1):(n=(r.x0+r.x1)/2,a=(r.y0+r.y1)/2),function(e,t,n,a,o){switch(o){case"center":n=a=0;break;case"bottom":n=0,a=1;break;case"right":n=1,a=0;break;case"left":n=-1,a=0;break;case"top":n=0,a=-1;break;case"start":n=-n,a=-a;break;case"end":break;default:o*=Math.PI/180,n=Math.cos(o),a=Math.sin(o)}return{x:e,y:t,vx:n,vy:a}}(n,a,e.vx,e.vy,t.align)}var Vo=function(e,t){var n=(e.startAngle+e.endAngle)/2,a=Math.cos(n),o=Math.sin(n),r=e.innerRadius,i=e.outerRadius;return Po({x0:e.x+a*r,y0:e.y+o*r,x1:e.x+a*i,y1:e.y+o*i,vx:a,vy:o},t)},No=function(e,t){var n=Do(e,t.origin),a=n.x*e.options.radius,o=n.y*e.options.radius;return Po({x0:e.x-a,y0:e.y-o,x1:e.x+a,y1:e.y+o,vx:n.x,vy:n.y},t)},Oo=function(e,t){var n=Do(e,t.origin),a=e.x,o=e.y,r=0,i=0;return e.horizontal?(a=Math.min(e.x,e.base),r=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),i=Math.abs(e.base-e.y)),Po({x0:a,y0:o+i,x1:a+r,y1:o,vx:n.x,vy:n.y},t)},_o=function(e,t){var n=Do(e,t.origin);return Po({x0:e.x,y0:e.y,x1:e.x,y1:e.y,vx:n.x,vy:n.y},t)},Ao=function(e){return Math.round(e*Fo)/Fo};function Bo(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(void 0!==n.xCenter&&void 0!==n.yCenter)return{x:n.xCenter,y:n.yCenter};var a=n.getBasePixel();return e.horizontal?{x:a,y:null}:{x:null,y:a}}function Ro(e,t,n){var a=e.shadowBlur,o=n.stroked,r=Ao(n.x),i=Ao(n.y),l=Ao(n.w);o&&e.strokeText(t,r,i,l),n.filled&&(a&&o&&(e.shadowBlur=0),e.fillText(t,r,i,l),a&&o&&(e.shadowBlur=a))}var jo=function(e,t,n,a){var o=this;o._config=e,o._index=a,o._model=null,o._rects=null,o._ctx=t,o._el=n};(0,wo.a3)(jo.prototype,{_modelize:function(e,t,n,a){var o,r=this._index,i=(0,wo.$)((0,wo.a)([n.font,{}],a,r)),l=(0,wo.a)([n.color,Io.ce.color],a,r);return{align:(0,wo.a)([n.align,"center"],a,r),anchor:(0,wo.a)([n.anchor,"center"],a,r),area:a.chart.chartArea,backgroundColor:(0,wo.a)([n.backgroundColor,null],a,r),borderColor:(0,wo.a)([n.borderColor,null],a,r),borderRadius:(0,wo.a)([n.borderRadius,0],a,r),borderWidth:(0,wo.a)([n.borderWidth,0],a,r),clamp:(0,wo.a)([n.clamp,!1],a,r),clip:(0,wo.a)([n.clip,!1],a,r),color:l,display:e,font:i,lines:t,offset:(0,wo.a)([n.offset,0],a,r),opacity:(0,wo.a)([n.opacity,1],a,r),origin:Bo(this._el,a),padding:(0,wo.D)((0,wo.a)([n.padding,0],a,r)),positioner:(o=this._el,o instanceof Io.qi?Vo:o instanceof Io.od?No:o instanceof Io.ZL?Oo:_o),rotation:(0,wo.a)([n.rotation,0],a,r)*(Math.PI/180),size:ko(this._ctx,t,i),textAlign:(0,wo.a)([n.textAlign,"start"],a,r),textShadowBlur:(0,wo.a)([n.textShadowBlur,0],a,r),textShadowColor:(0,wo.a)([n.textShadowColor,l],a,r),textStrokeColor:(0,wo.a)([n.textStrokeColor,l],a,r),textStrokeWidth:(0,wo.a)([n.textStrokeWidth,0],a,r)}},update:function(e){var t,n,a,o=this,r=null,i=null,l=o._index,c=o._config,m=(0,wo.a)([c.display,!0],e,l);m&&(n=(0,wo.v)((0,wo.Q)(c.formatter,[t=e.dataset.data[l],e]),t),(a=(0,wo.k)(n)?[]:function(e){var t,n=[];for(e=[].concat(e);e.length;)"string"==typeof(t=e.pop())?n.unshift.apply(n,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):(0,wo.k)(e)||n.unshift(""+t);return n}(n)).length&&(i=function(e){var t=e.borderWidth||0,n=e.padding,a=e.size.height,o=e.size.width,r=-o/2,i=-a/2;return{frame:{x:r-n.left-t,y:i-n.top-t,w:o+n.width+2*t,h:a+n.height+2*t},text:{x:r,y:i,w:o,h:a}}}(r=o._modelize(m,a,c,e)))),o._model=r,o._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n,a=e.ctx,o=this._model,r=this._rects;this.visible()&&(a.save(),o.clip&&(n=o.area,a.beginPath(),a.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),a.clip()),a.globalAlpha=Math.max(0,Math.min(o.opacity,1)),a.translate(Ao(t.x),Ao(t.y)),a.rotate(o.rotation),function(e,t,n){var a=n.backgroundColor,o=n.borderColor,r=n.borderWidth;(a||o&&r)&&(e.beginPath(),function(e,t,n,a,o,r){var i=Math.PI/2;if(r){var l=Math.min(r,o/2,a/2),c=t+l,m=n+l,s=t+a-l,d=n+o-l;e.moveTo(t,m),c<s&&m<d?(e.arc(c,m,l,-Math.PI,-i),e.arc(s,m,l,-i,0),e.arc(s,d,l,0,i),e.arc(c,d,l,i,Math.PI)):c<s?(e.moveTo(c,n),e.arc(s,m,l,-i,i),e.arc(c,m,l,i,Math.PI+i)):m<d?(e.arc(c,m,l,-Math.PI,0),e.arc(c,d,l,0,Math.PI)):e.arc(c,m,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,a,o)}(e,Ao(t.x)+r/2,Ao(t.y)+r/2,Ao(t.w)-r,Ao(t.h)-r,n.borderRadius),e.closePath(),a&&(e.fillStyle=a,e.fill()),o&&r&&(e.strokeStyle=o,e.lineWidth=r,e.lineJoin="miter",e.stroke()))}(a,r.frame,o),function(e,t,n,a){var o,r=a.textAlign,i=a.color,l=!!i,c=a.font,m=t.length,s=a.textStrokeColor,d=a.textStrokeWidth,u=s&&d;if(m&&(l||u))for(n=function(e,t,n){var a=n.lineHeight,o=e.w,r=e.x;return"center"===t?r+=o/2:"end"!==t&&"right"!==t||(r+=o),{h:a,w:o,x:r,y:e.y+a/2}}(n,r,c),e.font=c.string,e.textAlign=r,e.textBaseline="middle",e.shadowBlur=a.textShadowBlur,e.shadowColor=a.textShadowColor,l&&(e.fillStyle=i),u&&(e.lineJoin="round",e.lineWidth=d,e.strokeStyle=s),o=0,m=t.length;o<m;++o)Ro(e,t[o],{stroked:u,filled:l,w:n.w,x:n.x,y:n.y+n.h*o})}(a,o.lines,r.text,o),a.restore())}});var To=Number.MIN_SAFE_INTEGER||-9007199254740991,zo=Number.MAX_SAFE_INTEGER||9007199254740991;function qo(e,t,n){var a=Math.cos(n),o=Math.sin(n),r=t.x,i=t.y;return{x:r+a*(e.x-r)-o*(e.y-i),y:i+o*(e.x-r)+a*(e.y-i)}}function Lo(e,t){var n,a,o,r=zo,i=To,l=t.origin;for(n=0;n<e.length;++n)o=t.vx*((a=e[n]).x-l.x)+t.vy*(a.y-l.y),r=Math.min(r,o),i=Math.max(i,o);return{min:r,max:i}}function Uo(e,t){var n=t.x-e.x,a=t.y-e.y,o=Math.sqrt(n*n+a*a);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var $o=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function Ho(e,t,n){var a=t.positioner(e,t),o=a.vx,r=a.vy;if(!o&&!r)return{x:a.x,y:a.y};var i=n.w,l=n.h,c=t.rotation,m=Math.abs(i/2*Math.cos(c))+Math.abs(l/2*Math.sin(c)),s=Math.abs(i/2*Math.sin(c))+Math.abs(l/2*Math.cos(c)),d=1/Math.max(Math.abs(o),Math.abs(r));return m*=o*d,s*=r*d,{x:a.x+(m+=t.offset*o),y:a.y+(s+=t.offset*r)}}(0,wo.a3)($o.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this._rect;return!((e=qo(e,this.center(),-this._rotation)).x<t.x-1||e.y<t.y-1||e.x>t.x+t.w+2||e.y>t.y+t.h+2)},intersects:function(e){var t,n,a,o=this._points(),r=e._points(),i=[Uo(o[0],o[1]),Uo(o[0],o[3])];for(this._rotation!==e._rotation&&i.push(Uo(r[0],r[1]),Uo(r[0],r[3])),t=0;t<i.length;++t)if(n=Lo(o,i[t]),a=Lo(r,i[t]),n.max<a.min||a.max<n.min)return!1;return!0},_points:function(){var e=this._rect,t=this._rotation,n=this.center();return[qo({x:e.x,y:e.y},n,t),qo({x:e.x+e.w,y:e.y},n,t),qo({x:e.x+e.w,y:e.y+e.h},n,t),qo({x:e.x,y:e.y+e.h},n,t)]}});var Yo={prepare:function(e){var t,n,a,o,r,i=[];for(t=0,a=e.length;t<a;++t)for(n=0,o=e[t].length;n<o;++n)i.push(r=e[t][n]),r.$layout={_box:new $o,_hidable:!1,_visible:!0,_set:t,_idx:n};return i.sort(function(e,t){var n=e.$layout,a=t.$layout;return n._idx===a._idx?a._set-n._set:a._idx-n._idx}),this.update(i),i},update:function(e){var t,n,a,o,r,i=!1;for(t=0,n=e.length;t<n;++t)o=(a=e[t]).model(),(r=a.$layout)._hidable=o&&"auto"===o.display,r._visible=a.visible(),i|=r._hidable;i&&function(e){var t,n,a,o,r,i,l;for(t=0,n=e.length;t<n;++t)(o=(a=e[t]).$layout)._visible&&(l=new Proxy(a._el,{get:function(e,t){return e.getProps([t],!0)[t]}}),r=a.geometry(),i=Ho(l,a.model(),r),o._box.update(i,r,a.rotation()));!function(e,t){var n,a,o,r;for(n=e.length-1;n>=0;--n)for(o=e[n].$layout,a=n-1;a>=0&&o._visible;--a)(r=e[a].$layout)._visible&&o._box.intersects(r._box)&&t(o,r)}(e,function(e,t){var n=e._hidable,a=t._hidable;n&&a||a?t._visible=!1:n&&(e._visible=!1)})}(e)},lookup:function(e,t){var n,a;for(n=e.length-1;n>=0;--n)if((a=e[n].$layout)&&a._visible&&a._box.contains(t))return e[n];return null},draw:function(e,t){var n,a,o,r,i,l;for(n=0,a=t.length;n<a;++n)(r=(o=t[n]).$layout)._visible&&(i=o.geometry(),l=Ho(o._el,o.model(),i),r._box.update(l,i,o.rotation()),o.draw(e,l))}};function Go(e,t,n){if(t){var a,o=n.$context,r=n.$groups;t[r._set]&&(a=t[r._set][r._key])&&!0===(0,wo.Q)(a,[o])&&(e.$datalabels._dirty=!0,n.update(o))}}var Wo={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if((0,wo.k)(e))return null;var t,n,a,o=e;if((0,wo.i)(e))if((0,wo.k)(e.label))if((0,wo.k)(e.r))for(o="",a=0,n=(t=Object.keys(e)).length;a<n;++a)o+=(0!==a?", ":"")+t[a]+": "+e[t[a]];else o=e.r;else o=e.label;return""+o},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(e){e.$datalabels={_actives:[]}},beforeUpdate:function(e){var t=e.$datalabels;t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var a,o,r,i,l,c,m,s,d=t.index,u=e.$datalabels,p=u._datasets[d]=[],f=e.isDatasetVisible(d),h=e.data.datasets[d],v=function(e,t){var n,a,o,r=e.datalabels,i=[];return!1===r?null:(!0===r&&(r={}),t=(0,wo.a3)({},[t,r]),a=t.labels||{},o=Object.keys(a),delete t.labels,o.length?o.forEach(function(e){a[e]&&i.push((0,wo.a3)({},[t,a[e],{_key:e}]))}):i.push(t),n=i.reduce(function(e,t){return(0,wo.E)(t.listeners||{},function(n,a){e[a]=e[a]||{},e[a][t._key||"$default"]=n}),delete t.listeners,e},{}),{labels:i,listeners:n})}(h,n),x=t.meta.data||[],g=e.ctx;for(g.save(),a=0,r=x.length;a<r;++a)if((m=x[a]).$datalabels=[],f&&m&&e.getDataVisibility(a)&&!m.skip)for(o=0,i=v.labels.length;o<i;++o)c=(l=v.labels[o])._key,(s=new jo(l,g,m,a)).$groups={_set:d,_key:c||"$default"},s.$context={active:!1,chart:e,dataIndex:a,dataset:h,datasetIndex:d},s.update(s.$context),m.$datalabels.push(s),p.push(s);g.restore(),(0,wo.a3)(u._listeners,v.listeners,{merger:function(e,n,a){n[e]=n[e]||{},n[e][t.index]=a[e],u._listened=!0}})},afterUpdate:function(e,t){e.$datalabels._labels=Yo.prepare(e.$datalabels._datasets,t)},afterDatasetsDraw:function(e){Yo.draw(e,e.$datalabels._labels)},beforeEvent:function(e,t){if(e.$datalabels._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":!function(e,t){var n,a,o=e.$datalabels,r=o._listeners;if(r.enter||r.leave){if("mousemove"===t.type)a=Yo.lookup(o._labels,t);else if("mouseout"!==t.type)return;n=o._hovered,o._hovered=a,function(e,t,n,a){var o,r;(n||a)&&(n?a?n!==a&&(r=o=!0):r=!0:o=!0,r&&Go(e,t.leave,n),o&&Go(e,t.enter,a))}(e,r,n,a)}}(e,n);break;case"click":!function(e,t){var n=e.$datalabels,a=n._listeners.click,o=a&&Yo.lookup(n._labels,t);o&&Go(e,a,o)}(e,n)}}},afterEvent:function(e){var t,n,a,o,r,i,l,c=e.$datalabels,m=function(e,t){var n,a,o,r,i=e.slice(),l=[];for(n=0,o=t.length;n<o;++n)-1===(a=i.indexOf(r=t[n]))?l.push([r,1]):i.splice(a,1);for(n=0,o=i.length;n<o;++n)l.push([i[n],-1]);return l}(c._actives,c._actives=e.getActiveElements());for(t=0,n=m.length;t<n;++t)if((r=m[t])[1])for(a=0,o=(l=r[0].element.$datalabels||[]).length;a<o;++a)(i=l[a]).$context.active=1===r[1],i.update(i.$context);(c._dirty||m.length)&&(Yo.update(c._labels),e.render()),delete c._dirty}},Qo=r(57173);function Xo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",10),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"currency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"h5",11),u["\u0275\u0275text"](5,"Monto ejercido del contrato"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](6,"mat-progress-bar",12),u["\u0275\u0275elementStart"](7,"h2",13),u["\u0275\u0275text"](8),u["\u0275\u0275pipe"](9,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](3,3,n.item.devengo)),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("value",n.item.porcentajeDevengo),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](9,5,n.item.porcentajeDevengo/100,".2-2"))}}function Jo(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",14),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function Zo(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",10),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"h5",11),u["\u0275\u0275text"](4,"Total de solicitudes con acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"mat-progress-bar",15),u["\u0275\u0275elementStart"](6,"h2",13),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("",n.item.conAcompaniante," solicitudes"),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",100*n.item.porcentajeAcompanianteContrato),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](8,3,n.item.porcentajeAcompanianteContrato,".2-2"))}}function Ko(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",14),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function er(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",10),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"h5",11),u["\u0275\u0275text"](4,"Unidad con mayor % de acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"mat-progress-bar",16),u["\u0275\u0275elementStart"](6,"h2",13),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.item.promedioAcompaniante.UnidadMedica.DenominacionUni),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",100*n.item.promedioAcompaniante.Promedio.Promedio),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](8,3,n.item.promedioAcompaniante.Promedio.Promedio,".2-2"))}}function tr(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",14),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function nr(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h1",10),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"h5",11),u["\u0275\u0275text"](4,"La unidad con mas traslados"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"mat-progress-bar",16),u["\u0275\u0275elementStart"](6,"h2",13),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"percent"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.item.mayorSolicitud.unidad.DenominacionUni),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("value",100*n.item.mayorSolicitud.porcentaje),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](8,3,n.item.mayorSolicitud.porcentaje,".2-2"))}}function ar(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"h2",14),u["\u0275\u0275text"](2,"Sin datos"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function or(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"canvas",28),u["\u0275\u0275listener"]("chartHover",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).chartHovered(e)})("chartClick",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).chartClicked(e)}),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("data",a.data2)("options",a.barChartOptions)("plugins",a.barChartPlugins)("type",a.barChartType)}}function rr(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"canvas",29),u["\u0275\u0275listener"]("chartHover",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).chartHovered(e)}),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("data",a.data3)("options",a.barChartOptions2)("plugins",a.barChartPlugins)("type",a.barChartType)}}function ir(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"canvas",30),u["\u0275\u0275listener"]("chartHover",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).chartHovered(e)}),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("data",a.data4)("options",a.barChartOptions3)("plugins",a.barChartPlugins)("type",a.barChartType)}}function lr(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",17),u["\u0275\u0275elementStart"](1,"mat-tab-group",18),u["\u0275\u0275elementStart"](2,"mat-tab",19),u["\u0275\u0275elementStart"](3,"mat-card"),u["\u0275\u0275elementStart"](4,"mat-card-content"),u["\u0275\u0275elementStart"](5,"div",20),u["\u0275\u0275elementStart"](6,"button",21),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().descargarImagen("myChart1","devengo_mes")}),u["\u0275\u0275elementStart"](7,"mat-icon"),u["\u0275\u0275text"](8,"cloud_download"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",22),u["\u0275\u0275template"](10,or,1,4,"canvas",23),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"mat-tab",24),u["\u0275\u0275elementStart"](12,"mat-card"),u["\u0275\u0275elementStart"](13,"mat-card-content"),u["\u0275\u0275elementStart"](14,"div",20),u["\u0275\u0275elementStart"](15,"button",21),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().descargarImagen("myChart2","solicitudes_realizadas")}),u["\u0275\u0275elementStart"](16,"mat-icon"),u["\u0275\u0275text"](17,"cloud_download"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",22),u["\u0275\u0275template"](19,rr,1,4,"canvas",25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"mat-tab",26),u["\u0275\u0275elementStart"](21,"mat-card"),u["\u0275\u0275elementStart"](22,"mat-card-content"),u["\u0275\u0275elementStart"](23,"div",20),u["\u0275\u0275elementStart"](24,"button",21),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().descargarImagen("myChart3","porcentaje_acompaniantes")}),u["\u0275\u0275elementStart"](25,"mat-icon"),u["\u0275\u0275text"](26,"cloud_download"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",22),u["\u0275\u0275template"](28,ir,1,4,"canvas",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("backgroundColor",a.colorTab),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",a.datos.devengo.length>0),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",a.datos.devengo.length>0),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngIf",a.datos.devengo.length>0)}}var cr,mr,sr=[{path:"",children:[{path:"solicitud",component:Je,canActivate:[p]},{path:"realizadas",component:_t,canActivate:[p]},{path:"cancelar",component:En,canActivate:[p]},{path:"firma",component:Kn,canActivate:[ba]},{path:"manager",component:ga,canActivate:[ba]},{path:"permit/:id/:unitMedic",component:La,canActivate:[ba]},{path:"administradores",component:io},{path:"ftp",component:uo},{path:"tablero",component:Eo},{path:"detalle/contrato",component:(cr=function(){function e(t,n){o(this,e),this.router=t,this.contrato=n,this.mesesNombre=[{numero:1,nombre:"ENERO"},{numero:2,nombre:"FEBRERO"},{numero:3,nombre:"MARZO"},{numero:4,nombre:"ABRIL"},{numero:5,nombre:"MAYO"},{numero:6,nombre:"JUNIO"},{numero:7,nombre:"JULIO"},{numero:8,nombre:"AGOSTO"},{numero:9,nombre:"SEPTIEMBRE"},{numero:10,nombre:"OCTUBRE"},{numero:11,nombre:"NOVIEMBRE"},{numero:12,nombre:"DICIEMBRE"}],this.item=JSON.parse(localStorage.getItem("devengoContrato")),this.meses=[],this.barChartOptions={responsive:!0,color:"black",scales:{x:{ticks:{color:"black"}},y:{ticks:{color:"black",callback:function(e,t,n){return e>=1e3?"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"$"+e}}}},plugins:{tooltip:{callbacks:{label:function(e){return e.dataset.label||""}}},legend:{display:!0},title:{display:!0,text:"Devengo por mes",color:"black"},datalabels:{anchor:"end",align:"end",color:"#C02942",formatter:function(e,t){return"bar"===t.dataset.type?e>=1e3?"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"$"+e:""},font:{weight:"bold",size:13}}}},this.barChartOptions2={responsive:!0,indexAxis:"y",color:"black",scales:{x:{ticks:{color:"black"}},y:{ticks:{color:"black"}}},plugins:{legend:{display:!0,position:"right"},title:{display:!0,text:"Solicitudes por unidad",color:"black"},datalabels:{anchor:"end",align:"end",color:"#C02942",font:{weight:"bold",size:13},formatter:function(e){return" "+e}}}},this.barChartOptions3={responsive:!0,indexAxis:"y",color:"black",scales:{x:{ticks:{color:"black",callback:function(e,t,n){var a=parseFloat(e.toString());return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}}},y:{ticks:{color:"black"}}},plugins:{tooltip:{callbacks:{label:function(e){var t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed.x&&(t+=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.parsed.x)),t}}},legend:{display:!0,position:"top"},title:{display:!0,text:"Porcentaje de solicitudes con acompa\xf1antes por unidad",color:"black"},datalabels:{anchor:"center",align:"center",color:"white",font:{weight:"bold",size:20},formatter:function(e,t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}}}},this.barChartType="bar",this.barChartPlugins=[Wo]}return i(e,[{key:"ngOnInit",value:function(){this.cargarDatos()}},{key:"regresar",value:function(){localStorage.removeItem("devengoContrato"),this.router.navigateByUrl("/traslado/tablero")}},{key:"cargarDatos",value:function(){var e=this;this.contrato.ConsultarDetalleContrato(this.item.contrato.NumeroContrato).subscribe(function(t){e.datos=t.Data,e.crearArreglo(),e.asignarValores()})}},{key:"crearArreglo",value:function(){var e=this,t=this.item.contrato.InicioContrato.split("/"),n=this.item.contrato.FinContrato.split("/"),a=new Date(t[2],t[1]-1,t[0]).getTime(),o=new Date(n[2],n[1]-1,n[0]).getTime();this.gastoPromedio=1.16*this.item.contrato.MontoTotal/((o-a)/864e5)*30;for(var r=function(t){var n=e.datos.devengo.filter(function(n){if(e.mesesNombre[t].numero===n.mes)return{mes:e.mesesNombre[t].nombre,devengo:n.devengo}});e.meses.push(n.length>0?{mes:e.mesesNombre[t].nombre,devengo:n[0].devengo,promedio:e.gastoPromedio}:{mes:e.mesesNombre[t].nombre,devengo:0,promedio:e.gastoPromedio})},i=0;i<this.mesesNombre.length;i++)r(i);var l=this.datos.acompaniante.map(function(e){return{unidad:e.unidad.DenominacionUni,total:e.total,acompaniante:e.acompaniante}}),c=this.datos.acompaniante.map(function(e){return{unidad:e.unidad.DenominacionUni,promedio:e.promedio}});this.datosHorizontal=l,this.datosPorcentaje=c}},{key:"asignarValores",value:function(){var e=new Intl.NumberFormat("en",{style:"currency",currency:"MXN"}).format(this.gastoPromedio);this.datosPorcentaje.sort(function(e,t){return t.promedio>e.promedio?1:t.promedio<e.promedio?-1:0}),console.log(this.meses),this.data2={labels:this.meses.map(function(e){return e.mes}),datasets:[{type:"bar",data:this.meses.map(function(e){return e.devengo}),label:this.item.contrato.NumeroContrato,backgroundColor:"#032E46",borderColor:"#032E46",hoverBackgroundColor:"#032E46"},{type:"line",data:this.meses.map(function(e){return e.promedio}),label:"Promedio mensual ".concat(e),order:1,borderDash:[10,5],backgroundColor:"#DDCAA1",borderColor:"#DDCAA1",pointBackgroundColor:"#BF9B51"}]},this.data3={labels:this.datosHorizontal.map(function(e){return e.unidad}),datasets:[{data:this.datosHorizontal.map(function(e){return e.total}),label:"Solicitudes totales",backgroundColor:"#0C555C",borderColor:"#0C555C",hoverBackgroundColor:"#0C555C"},{data:this.datosHorizontal.map(function(e){return e.acompaniante}),label:"Solicitudes con acompa\xf1antes",backgroundColor:"#D6523C",borderColor:"#D6523C",hoverBackgroundColor:"#D6523C"}]},this.data4={labels:this.datosPorcentaje.map(function(e){return e.unidad}),datasets:[{data:this.datosPorcentaje.map(function(e){return e.promedio}),label:"Porcentaje",backgroundColor:"#0F3057",borderColor:"#0F3057",hoverBackgroundColor:"#0F3057"}]}}},{key:"chartClicked",value:function(e){console.log("event:",e.event.chart)}},{key:"descargarImagen",value:function(e,t){var n=document.createElement("a"),a=document.getElementById(e);n.download="".concat(t,".png"),n.href=a.toDataURL("image/png",1),n.click()}},{key:"chartHovered",value:function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e)}}]),e}(),cr.\u0275fac=function(e){return new(e||cr)(u["\u0275\u0275directiveInject"](m.F0),u["\u0275\u0275directiveInject"](E.d))},cr.\u0275cmp=u["\u0275\u0275defineComponent"]({type:cr,selectors:[["app-detalle-por-contrato"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275viewQuery"](yo.jh,5),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.chart=n.first)},decls:43,vars:10,consts:[[1,"centerText","m-b-0"],[1,"startText","m-l-20"],["mat-raised-button","","color","warn",2,"background-color","#E91818",3,"click"],[1,"b-all",2,"border-width","4px"],[1,"font-bold","centerText"],["fxLayout","row wrap","fxLayoutAlign","space-evenly center"],["fxFlex.gt-sm","24","fxFlex.gt-xs","100","fxFlex","100"],[1,"centerText"],[4,"ngIf"],["fxFlex.gt-sm","90","fxFlex.gt-xs","100","fxFlex","100",4,"ngIf"],[1,"m-0"],[1,"text-muted","m-t-0","m-b-10"],["mode","determinate",3,"value"],[1,"m-t-0","m-b-10"],[1,"m-t-0","m-b-10","text-muted"],["color","warn","mode","determinate",3,"value"],["color","accent","mode","determinate",3,"value"],["fxFlex.gt-sm","90","fxFlex.gt-xs","100","fxFlex","100"],["animationDuration","1500ms",3,"backgroundColor"],["label","Devengo"],[1,"endText"],["mat-raised-button","","color","primary",3,"click"],[2,"display","block"],["baseChart","","id","myChart1",3,"data","options","plugins","type","chartHover","chartClick",4,"ngIf"],["label","Solicitudes realizadas"],["baseChart","","id","myChart2",3,"data","options","plugins","type","chartHover",4,"ngIf"],["label","Porcentaje mayor acompa\xf1antes"],["baseChart","","id","myChart3",3,"data","options","plugins","type","chartHover",4,"ngIf"],["baseChart","","id","myChart1",3,"data","options","plugins","type","chartHover","chartClick"],["baseChart","","id","myChart2",3,"data","options","plugins","type","chartHover"],["baseChart","","id","myChart3",3,"data","options","plugins","type","chartHover"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"mat-card"),u["\u0275\u0275elementStart"](1,"mat-card-title"),u["\u0275\u0275elementStart"](2,"h2",0),u["\u0275\u0275text"](3,"Tablero de control para contratos de transporte subrogado"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",1),u["\u0275\u0275elementStart"](5,"button",2),u["\u0275\u0275listener"]("click",function(){return t.regresar()}),u["\u0275\u0275elementStart"](6,"mat-icon"),u["\u0275\u0275text"](7,"keyboard_return"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](8," Regresar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"mat-card-content"),u["\u0275\u0275elementStart"](10,"div",3),u["\u0275\u0275elementStart"](11,"h3",4),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",5),u["\u0275\u0275elementStart"](14,"div",6),u["\u0275\u0275elementStart"](15,"mat-card"),u["\u0275\u0275elementStart"](16,"mat-card-content",7),u["\u0275\u0275elementStart"](17,"h2"),u["\u0275\u0275text"](18,"Devengo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](19,Xo,10,8,"div",8),u["\u0275\u0275template"](20,Jo,3,0,"div",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",6),u["\u0275\u0275elementStart"](22,"mat-card"),u["\u0275\u0275elementStart"](23,"mat-card-content",7),u["\u0275\u0275elementStart"](24,"h2"),u["\u0275\u0275text"](25,"Con acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](26,Zo,9,6,"div",8),u["\u0275\u0275template"](27,Ko,3,0,"div",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"div",6),u["\u0275\u0275elementStart"](29,"mat-card"),u["\u0275\u0275elementStart"](30,"mat-card-content",7),u["\u0275\u0275elementStart"](31,"h2"),u["\u0275\u0275text"](32,"Mas acompa\xf1antes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](33,er,9,6,"div",8),u["\u0275\u0275template"](34,tr,3,0,"div",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"div",6),u["\u0275\u0275elementStart"](36,"mat-card"),u["\u0275\u0275elementStart"](37,"mat-card-content",7),u["\u0275\u0275elementStart"](38,"h2"),u["\u0275\u0275text"](39,"Mas traslados"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](40,nr,9,6,"div",8),u["\u0275\u0275template"](41,ar,3,0,"div",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](42,lr,29,4,"div",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](12),u["\u0275\u0275textInterpolate"](t.item.contrato.NumeroContrato),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngIf",t.item.devengo),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.item.devengo),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.item.conAcompaniante),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.item.conAcompaniante),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.item.promedioAcompaniante.Promedio.Promedio),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.item.promedioAcompaniante.Promedio.Promedio),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",t.item.mayorSolicitud.porcentaje),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.item.mayorSolicitud.porcentaje),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.datos))},directives:[T.a8,T.n5,_.lW,ie.Hw,T.dn,P.xw,P.Wh,P.yH,l.O5,ot.pW,Qo.SP,Qo.uX,yo.jh],pipes:[l.H9,l.Zx],styles:[".mat-tab-header{background-color:#16584b}.mat-tab-header,.mat-tab-label{color:#fff!important}"],encapsulation:2}),cr)}],canActivate:[d.a]}],dr=r(77154),ur=((mr=function e(){o(this,e)}).\u0275fac=function(e){return new(e||mr)},mr.\u0275mod=u["\u0275\u0275defineNgModule"]({type:mr}),mr.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[l.ez,m.Bz.forChild(sr),dr.o9,h.FormsModule,h.ReactiveFormsModule,s.m,c.q,nt.Xd,ve.Wx],m.Bz]}),mr)}}])}();